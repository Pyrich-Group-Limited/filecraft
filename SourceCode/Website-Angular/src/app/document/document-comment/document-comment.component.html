<div class="d-flex">
  <span mat-dialog-title class="dialog-title">
    {{'COMMENT' | translate}}
    <app-page-help-text [code]="'DOCUMENT_COMMENTS'"></app-page-help-text>
  </span>
  <button mat-icon-button class="ms-auto" (click)="closeDialog()">
    <i-feather class="close-icon text-danger" name="x"></i-feather>
  </button>
</div>
<mat-dialog-content>
  <div class="row">
    <div class="col-sm-12">
      <div class="list-group">
        <div *ngFor="let documentComment of documentComments" class="list-group-item list-group-item-action"
          aria-current="true">
          <span class="mb-1">
            <span *hasClaim="['all_documents_delete_comment','assigned_documents_delete_comment']" role="button"
              class="badge" (click)="onDelete(documentComment.id)">
              <i-feather name="trash" class="small-icon text-danger"></i-feather>
            </span>
            {{documentComment.comment}}
          </span>
          <div class="w-100">
            <small class="mr-2">
              {{'BY' | translate}} <small class="text-primary">{{documentComment?.createdBy}}
              </small>
              {{'AT' | translate}}
              {{documentComment.createdDate | utcToLocalTime:'shortDate'}}
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <form [formGroup]="commentForm" class="mt-3">
        <div class="form-group">
          <textarea class="form-control" formControlName="comment" rows="3"></textarea>
          <div *ngIf="commentForm.get('comment').touched && commentForm.get('comment').errors">
            <div class="text-danger" *ngIf="commentForm.get('comment').errors?.required">
              {{'COMMENT_IS_REQUIRED' | translate}}
            </div>
          </div>
        </div>
        <div class="col-md-12 mt-2">
          <button *hasClaim="['all_documents_add_comment','assigned_documents_add_comment']" (click)="addComment()"
            type="submit" class="btn btn-success">
            <i-feather name="message-circle"></i-feather>
            {{'ADD_COMMENT' | translate}}
          </button>
        </div>
      </form>
    </div>
  </div>
</mat-dialog-content>
