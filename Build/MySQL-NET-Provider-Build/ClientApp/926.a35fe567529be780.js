"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[926],{1152:(O,C,o)=>{o.d(C,{U:()=>m});var c=o(3824);class m extends c.u{id="";createdBy="";categoryId="";documentStatusId="";storageSettingId="";createDate}},7008:(O,C,o)=>{o.d(C,{M:()=>v});var c=o(4438),m=o(1626);let v=(()=>{class n{httpClient;constructor(e){this.httpClient=e}getAllCategories(){return this.httpClient.get("Category")}delete(e){return this.httpClient.delete(`Category/${e}`)}update(e){return this.httpClient.put(`Category/${e.id}`,e)}add(e){return this.httpClient.post("Category",e)}getSubCategories(e){return this.httpClient.get(`Category/${e}/subcategories`)}getAllCategoriesForDropDown(){return this.httpClient.get("Category/dropdown")}static \u0275fac=function(D){return new(D||n)(c.KVO(m.Qq))};static \u0275prov=c.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},6228:(O,C,o)=>{o.d(C,{Z:()=>I});var c=o(4438),m=o(1626),v=o(9437),n=o(7598);let I=(()=>{class e{commonHttpErrorService=(0,c.WQX)(n.T);httpClient=(0,c.WQX)(m.Qq);getDocumentStatuss(){return this.httpClient.get("documentstatus").pipe((0,v.W)(this.commonHttpErrorService.handleError))}getDocumentStatusById(u){return this.httpClient.get(`documentstatus/${u}`).pipe((0,v.W)(this.commonHttpErrorService.handleError))}addDocumentStatus(u){return this.httpClient.post("documentstatus",u).pipe((0,v.W)(this.commonHttpErrorService.handleError))}updateDocumentStatus(u){return this.httpClient.post(`documentstatus/${u.id}`,u).pipe((0,v.W)(this.commonHttpErrorService.handleError))}deleteDocumentStatus(u){return this.httpClient.delete(`documentstatus/${u}`).pipe((0,v.W)(this.commonHttpErrorService.handleError))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=c.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},5321:(O,C,o)=>{o.d(C,{g:()=>X});var c=o(9417),m=o(5351),v=o(8),n=o(4438),I=o(1626);let e=(()=>{class _{httpClient;constructor(l){this.httpClient=l}getDocumentComment(l){return this.httpClient.get(`documentComment/${l}`)}deleteDocumentComment(l){return this.httpClient.delete(`documentComment/${l}`)}saveDocumentComment(l){return this.httpClient.post("documentComment/",l)}static \u0275fac=function(h){return new(h||_)(n.KVO(I.Qq))};static \u0275prov=n.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();var D=o(4481),u=o(2243),t=o(177),A=o(8834),$=o(2728),V=o(9036),x=o(5464),j=o(3955),M=o(9519);const N=()=>["all_documents_add_comment","assigned_documents_add_comment"],P=()=>["all_documents_delete_comment","assigned_documents_delete_comment"];function U(_,L){if(1&_){const l=n.RV6();n.j41(0,"span",21),n.bIt("click",function(){n.eBV(l);const k=n.XpG().$implicit,F=n.XpG();return n.Njj(F.onDelete(k.id))}),n.nrm(1,"i-feather",22),n.k0s()}}function B(_,L){if(1&_&&(n.j41(0,"div",15)(1,"span",16),n.DNE(2,U,2,0,"span",17),n.EFF(3),n.k0s(),n.j41(4,"div",18)(5,"small",19),n.EFF(6),n.nI1(7,"translate"),n.j41(8,"small",20),n.EFF(9),n.k0s(),n.EFF(10),n.nI1(11,"translate"),n.nI1(12,"utcToLocalTime"),n.k0s()()()),2&_){const l=L.$implicit;n.R7$(2),n.Y8G("hasClaim",n.lJ4(13,P)),n.R7$(),n.SpI(" ",l.comment," "),n.R7$(3),n.SpI(" ",n.bMT(7,6,"BY")," "),n.R7$(3),n.SpI("",null==l?null:l.createdBy," "),n.R7$(),n.Lme(" ",n.bMT(11,8,"AT")," ",n.i5U(12,10,l.createdDate,"shortDate")," ")}}function W(_,L){1&_&&(n.j41(0,"div",24),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&_&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"COMMENT_IS_REQUIRED")," "))}function G(_,L){if(1&_&&(n.j41(0,"div"),n.DNE(1,W,3,3,"div",23),n.k0s()),2&_){let l;const h=n.XpG();n.R7$(),n.Y8G("ngIf",null==(l=h.commentForm.get("comment").errors)?null:l.required)}}function Y(_,L){if(1&_){const l=n.RV6();n.j41(0,"button",25),n.bIt("click",function(){n.eBV(l);const k=n.XpG();return n.Njj(k.addComment())}),n.nrm(1,"i-feather",26),n.EFF(2),n.nI1(3,"translate"),n.k0s()}2&_&&(n.R7$(2),n.SpI(" ",n.bMT(3,1,"ADD_COMMENT")," "))}let X=(()=>{class _ extends v.${fb;data;documentCommentService;dialogRef;commonDialogService;translationService;commentForm;documentComments=[];constructor(l,h,k,F,E,b){super(),this.fb=l,this.data=h,this.documentCommentService=k,this.dialogRef=F,this.commonDialogService=E,this.translationService=b}ngOnInit(){this.createForm(),this.getDocumentComment()}closeDialog(){this.dialogRef.close()}createForm(){this.commentForm=this.fb.group({comment:["",[c.k0.required]]})}getDocumentComment(){this.sub$.sink=this.documentCommentService.getDocumentComment(this.data.id).subscribe(l=>{this.documentComments=l})}patchComment(l){this.commentForm.patchValue({comment:l})}addComment(){if(this.commentForm.invalid)return void this.commentForm.markAllAsTouched();const l={documentId:this.data.id,comment:this.commentForm.get("comment").value};this.sub$.sink=this.documentCommentService.saveDocumentComment(l).subscribe(h=>{this.patchComment(""),this.commentForm.markAsUntouched(),this.getDocumentComment()})}onDelete(l){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")}?`).subscribe(h=>{h&&(this.sub$.sink=this.documentCommentService.deleteDocumentComment(l).subscribe(()=>{this.getDocumentComment()}))})}static \u0275fac=function(h){return new(h||_)(n.rXU(c.ze),n.rXU(m.Vh),n.rXU(e),n.rXU(m.CP),n.rXU(D.Z),n.rXU(u.L))};static \u0275cmp=n.VBU({type:_,selectors:[["app-document-comment"]],features:[n.Vt3],decls:20,vars:9,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"ms-auto",3,"click"],["name","x",1,"close-icon","text-danger"],[1,"row"],[1,"col-sm-12"],[1,"list-group"],["class","list-group-item list-group-item-action","aria-current","true",4,"ngFor","ngForOf"],[1,"mt-3",3,"formGroup"],[1,"form-group"],["formControlName","comment","rows","3",1,"form-control"],[4,"ngIf"],[1,"col-md-12","mt-2"],["type","submit","class","btn btn-success",3,"click",4,"hasClaim"],["aria-current","true",1,"list-group-item","list-group-item-action"],[1,"mb-1"],["role","button","class","badge",3,"click",4,"hasClaim"],[1,"w-100"],[1,"mr-2"],[1,"text-primary"],["role","button",1,"badge",3,"click"],["name","trash",1,"small-icon","text-danger"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","submit",1,"btn","btn-success",3,"click"],["name","message-circle"]],template:function(h,k){1&h&&(n.j41(0,"div",0)(1,"span",1),n.EFF(2),n.nI1(3,"translate"),n.nrm(4,"app-page-help-text",2),n.k0s(),n.j41(5,"button",3),n.bIt("click",function(){return k.closeDialog()}),n.nrm(6,"i-feather",4),n.k0s()(),n.j41(7,"mat-dialog-content")(8,"div",5)(9,"div",6)(10,"div",7),n.DNE(11,B,13,14,"div",8),n.k0s()()(),n.j41(12,"div",5)(13,"div",6)(14,"form",9)(15,"div",10),n.nrm(16,"textarea",11),n.DNE(17,G,2,1,"div",12),n.k0s(),n.j41(18,"div",13),n.DNE(19,Y,4,3,"button",14),n.k0s()()()()()),2&h&&(n.R7$(2),n.SpI(" ",n.bMT(3,6,"COMMENT")," "),n.R7$(2),n.Y8G("code","DOCUMENT_COMMENTS"),n.R7$(7),n.Y8G("ngForOf",k.documentComments),n.R7$(3),n.Y8G("formGroup",k.commentForm),n.R7$(3),n.Y8G("ngIf",k.commentForm.get("comment").touched&&k.commentForm.get("comment").errors),n.R7$(2),n.Y8G("hasClaim",n.lJ4(8,N)))},dependencies:[t.Sq,t.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,m.BI,m.Yi,A.iY,$.i,V.J,x.X,j.D9,M.o]})}return _})()},6971:(O,C,o)=>{o.d(C,{o:()=>K});var c=o(9417),m=o(5351),v=o(8),n=o(177),I=o(2765),e=o(3887),D=o(5084),u=o(2356),t=o(4438);class A{constructor(g,i){this._document=i;const r=this._textarea=this._document.createElement("textarea"),a=r.style;a.position="fixed",a.top=a.opacity="0",a.left="-999em",r.setAttribute("aria-hidden","true"),r.value=g,r.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(r)}copy(){const g=this._textarea;let i=!1;try{if(g){const r=this._document.activeElement;g.select(),g.setSelectionRange(0,g.value.length),i=this._document.execCommand("copy"),r&&r.focus()}}catch{}return i}destroy(){const g=this._textarea;g&&(g.remove(),this._textarea=void 0)}}let $=(()=>{class s{constructor(i){this._document=i}copy(i){const r=this.beginCopy(i),a=r.copy();return r.destroy(),a}beginCopy(i){return new A(i,this._document)}static{this.\u0275fac=function(r){return new(r||s)(t.KVO(n.qQ))}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const V=new t.nKC("CDK_COPY_TO_CLIPBOARD_CONFIG");let x=(()=>{class s{constructor(i,r,a){this._clipboard=i,this._ngZone=r,this.text="",this.attempts=1,this.copied=new t.bkB,this._pending=new Set,a&&null!=a.attempts&&(this.attempts=a.attempts)}copy(i=this.attempts){if(i>1){let r=i;const a=this._clipboard.beginCopy(this.text);this._pending.add(a);const y=()=>{const R=a.copy();R||! --r||this._destroyed?(this._currentTimeout=null,this._pending.delete(a),a.destroy(),this.copied.emit(R)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(y,1))};y()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(i=>i.destroy()),this._pending.clear(),this._destroyed=!0}static{this.\u0275fac=function(r){return new(r||s)(t.rXU($),t.rXU(t.SKi),t.rXU(V,8))}}static{this.\u0275dir=t.FsC({type:s,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(r,a){1&r&&t.bIt("click",function(){return a.copy()})},inputs:{text:[0,"cdkCopyToClipboard","text"],attempts:[0,"cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"},standalone:!0})}}return s})(),j=(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({})}}return s})();var M=o(4823),N=o(6600),P=o(5464),U=o(8834),B=o(4304),W=o(5794),G=o(4481),Y=o(2243),X=o(9036),_=o(3955);function L(s,g){if(1&s){const i=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"label",15),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.j41(6,"div",16)(7,"button",17),t.bIt("click",function(){t.eBV(i);const a=t.XpG();return t.Njj(a.deleteDocumentLink())}),t.nrm(8,"i-feather",18),t.k0s(),t.j41(9,"button",19),t.bIt("click",function(){t.eBV(i);const a=t.XpG();return t.Njj(a.openLinkSettings())}),t.nrm(10,"i-feather",20),t.k0s()()(),t.j41(11,"div",21)(12,"div",22),t.nrm(13,"input",23),t.j41(14,"div",24)(15,"button",25),t.nrm(16,"i-feather",26),t.EFF(17),t.nI1(18,"translate"),t.k0s()()()()()}if(2&s){const i=t.XpG();t.R7$(4),t.JRh(t.bMT(5,3,"LINK_SHARING_IS_ON")),t.R7$(10),t.Y8G("cdkCopyToClipboard",i.documentLinkForm.get("linkCode").value),t.R7$(3),t.SpI(" ",t.bMT(18,5,"COPY")," ")}}function l(s,g){if(1&s){const i=t.RV6();t.qex(0),t.j41(1,"div",38),t.nrm(2,"input",39),t.nI1(3,"translate"),t.j41(4,"div",40)(5,"button",41),t.bIt("click",function(){t.eBV(i);const a=t.sdS(8);return t.Njj(a.open())}),t.nrm(6,"i-feather",42),t.k0s()(),t.nrm(7,"mat-datepicker",null,0),t.k0s(),t.j41(9,"div",38),t.nrm(10,"input",43),t.nI1(11,"translate"),t.j41(12,"div",40)(13,"button",44),t.bIt("click",function(){t.eBV(i);const a=t.sdS(16);return t.Njj(a.open())}),t.nrm(14,"i-feather",45),t.k0s()(),t.nrm(15,"ngx-material-timepicker",null,1),t.k0s(),t.bVm()}if(2&s){const i=t.sdS(8),r=t.sdS(16),a=t.XpG(2);t.R7$(2),t.FS9("placeholder",t.bMT(3,8,"MM_DD_YYYY")),t.Y8G("matDatepicker",i)("min",a.minDate),t.R7$(8),t.FS9("placeholder",t.bMT(11,10,"EXPIRY_TIME")),t.Y8G("format",24)("ngxTimepicker",r)("disableClick",!0),t.R7$(3),t.Y8G("for",r)}}function h(s,g){1&s&&(t.j41(0,"div",46),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"EXPIRY_DATE_AND_TIME_ARE_REQUIRED")," "))}function k(s,g){1&s&&(t.j41(0,"div",46),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"EXPIRY_TIME_ARE_REQUIRED")," "))}function F(s,g){if(1&s&&(t.j41(0,"div"),t.DNE(1,k,3,3,"div",32),t.k0s()),2&s){let i;const r=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(i=r.documentLinkForm.get("linkExpiryTime"))||null==i.errors?null:i.errors.required)}}function E(s,g){1&s&&(t.nrm(0,"input",47),t.nI1(1,"translate")),2&s&&t.FS9("placeholder",t.bMT(1,1,"ENTER_PASSWORD"))}function b(s,g){1&s&&(t.j41(0,"div",46),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PASSWORD_IS_REQUIRED")," "))}function d(s,g){if(1&s&&(t.j41(0,"div",27)(1,"div")(2,"section")(3,"label",28),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p"),t.nrm(7,"mat-checkbox",29),t.j41(8,"label",30),t.EFF(9),t.nI1(10,"translate"),t.k0s()(),t.DNE(11,l,17,12,"ng-container",31)(12,h,3,3,"div",32)(13,F,2,1,"div",31),t.k0s(),t.nrm(14,"hr"),t.j41(15,"section")(16,"span"),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"p"),t.nrm(20,"mat-checkbox",33),t.j41(21,"label",34),t.EFF(22),t.nI1(23,"translate"),t.k0s()(),t.DNE(24,E,2,3,"input",35)(25,b,3,3,"div",32),t.k0s(),t.nrm(26,"hr"),t.j41(27,"section")(28,"span"),t.EFF(29),t.nI1(30,"translate"),t.k0s(),t.j41(31,"p"),t.nrm(32,"mat-checkbox",36),t.j41(33,"label",37),t.EFF(34),t.nI1(35,"translate"),t.k0s()()()()()),2&s){let i;const r=t.XpG();t.R7$(4),t.JRh(t.bMT(5,11,"LINK_EXPIRATION")),t.R7$(5),t.JRh(t.bMT(10,13,"IS_LINK_VALID_UNTIL")),t.R7$(2),t.Y8G("ngIf",r.documentLinkForm.get("isLinkExpiryTime").value),t.R7$(),t.Y8G("ngIf",r.documentLinkForm.get("isLinkExpiryTime").touched&&r.documentLinkForm.hasError("linkExpiryDateValidator")),t.R7$(),t.Y8G("ngIf",(null==(i=r.documentLinkForm.get("linkExpiryTime"))?null:i.hasError("required"))&&(null==(i=r.documentLinkForm.get("linkExpiryDate"))?null:i.touched)),t.R7$(4),t.SpI(" ",t.bMT(18,15,"PASSWORD_PROTECTION"),""),t.R7$(5),t.JRh(t.bMT(23,17,"IS_PASSWORD_REQUIRED")),t.R7$(2),t.Y8G("ngIf",r.documentLinkForm.get("isPassword").value),t.R7$(),t.Y8G("ngIf",r.documentLinkForm.get("isPassword").touched&&r.documentLinkForm.hasError("passwordValidator")),t.R7$(4),t.SpI(" ",t.bMT(30,19,"ALLOW_DOWNLOAD"),""),t.R7$(5),t.JRh(t.bMT(35,21,"USERS_WITH_LINK_CAN_DOWNLOAD_THIS_ITEM"))}}function f(s,g){if(1&s){const i=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){t.eBV(i);const a=t.XpG();return t.Njj(a.createLink())}),t.nrm(1,"i-feather",49),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&s&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"CREATE_LINK")," "))}function p(s,g){if(1&s){const i=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){t.eBV(i);const a=t.XpG();return t.Njj(a.createLink())}),t.nrm(1,"i-feather",49),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&s&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"UPDATE_LINK")," "))}function T(s,g){1&s&&(t.j41(0,"div",50)(1,"div",51)(2,"span",52),t.EFF(3,"Loading..."),t.k0s()()())}let K=(()=>{class s extends v.${dialogRef;data;fb;documentService;toastrService;commonDialogService;translationService;documentLinkForm;isEditMode=!1;isResetLink=!1;minDate=new Date;isLoading=!1;baseUrl=`${window.location.protocol}//${window.location.host}/preview/`;constructor(i,r,a,y,R,S,H){super(),this.dialogRef=i,this.data=r,this.fb=a,this.documentService=y,this.toastrService=R,this.commonDialogService=S,this.translationService=H}ngOnInit(){this.createDocumentLinkForm(),this.data.link&&this.data.link.id&&(this.isEditMode=!0,this.pathValue())}timeValidator(i){const r=i.get("linkExpiryTime")?.value;return i.get("linkExpiryDate")?.value&&!r?i.get("linkExpiryTime")?.setErrors({required:!0}):i.get("linkExpiryDate")?.setErrors(null),null}pathValue(){if(this.documentLinkForm.patchValue(this.data.link),this.documentLinkForm.get("linkCode").setValue(`${this.baseUrl}${this.data.link.linkCode}`),this.data.link.linkExpiryTime){const i=new Date(this.data.link.linkExpiryTime),r=i.getHours().toString().padStart(2,"0"),a=i.getMinutes().toString().padStart(2,"0");this.documentLinkForm.get("linkExpiryDate").setValue(i),this.documentLinkForm.get("linkExpiryTime").setValue(`${r}:${a}`),this.documentLinkForm.get("isLinkExpiryTime").setValue(!0)}this.data.link.password&&this.documentLinkForm.get("isPassword").setValue(!0)}createDocumentLinkForm(){this.documentLinkForm=this.fb.group({id:[""],isLinkExpiryTime:[!1],linkExpiryDate:[new Date],linkExpiryTime:["12:00"],isPassword:[!1],password:[""],linkCode:[""],isAllowDownload:[!1]},{validators:[this.checkData,this.timeValidator]})}checkData(i){let r=i.get("isLinkExpiryTime").value,a=i.get("linkExpiryDate").value,y=i.get("isPassword").value,R=i.get("password").value;const S={};return r&&!a&&(S.linkExpiryDateValidator=!0),y&&!R&&(S.passwordValidator=!0),S}openLinkSettings(){this.isResetLink=!this.isResetLink}createLink(){if(!this.documentLinkForm.valid)return void this.documentLinkForm.markAllAsTouched();const i=this.createBuildObject();this.isLoading=!0,this.sub$.sink=this.documentService.createDocumentShareableLink(i).subscribe(r=>{this.toastrService.success(this.translationService.getValue("LINK_GENERATED_SUCCESSFULLY")),this.data.link=r,this.isEditMode=!0,this.isResetLink=!1,this.isLoading=!1,this.pathValue()},()=>this.isLoading=!1)}deleteDocumentLink(){this.sub$.sink=this.commonDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")).subscribe(i=>{i&&(this.isLoading=!0,this.sub$.sink=this.documentService.deleteDocumentShareableLInk(this.data.link.id).subscribe(()=>{this.isLoading=!1,this.toastrService.success(this.translationService.getValue("DOCUMENT_LINK_DELETED_SUCCESSFULLY")),this.dialogRef.close()},()=>this.isLoading=!1))})}closeDialog(){this.dialogRef.close()}createBuildObject(){const i=this.documentLinkForm.get("id").value;let r=this.documentLinkForm.get("linkCode").value;r&&(r=r.replace(this.baseUrl,""));let a=null;if(this.documentLinkForm.get("isLinkExpiryTime").value){const R=new Date(this.documentLinkForm.get("linkExpiryDate").value),S=this.documentLinkForm.get("isLinkExpiryTime").value?this.documentLinkForm.get("linkExpiryTime").value:"";if(S&&"string"==typeof S){const[H,w]=S.split(":").map(Number);a=new Date(R.getFullYear(),R.getMonth(),R.getDate(),H,w)}}return{id:i,documentId:this.data.document.id,isAllowDownload:this.documentLinkForm.get("isAllowDownload").value,password:this.documentLinkForm.get("isPassword").value?this.documentLinkForm.get("password").value:"",linkExpiryTime:a,linkCode:r}}static \u0275fac=function(r){return new(r||s)(t.rXU(m.CP),t.rXU(m.Vh),t.rXU(c.ze),t.rXU(B.D),t.rXU(W.tw),t.rXU(G.Z),t.rXU(Y.L))};static \u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],standalone:!0,features:[t.Vt3,t.aNF],decls:14,vars:10,consts:[["linkExpiryDatePicker",""],["timePicker",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"ms-auto",3,"click"],["name","x",1,"close-icon"],[1,"form-group",3,"formGroup"],["class","mb-3",4,"ngIf"],["class","mb-2",4,"ngIf"],["type","submit","class","btn-sm btn btn-success",3,"click",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"mb-3"],[1,"row","align-items-center","justify-content-between"],[1,"col-md","col"],["for","link",1,"form-label"],[1,"col-auto","col-m-auto"],["mat-icon-button","",1,"text-danger","btn",3,"click"],["name","trash"],["mat-icon-button","",1,"text-success","btn",3,"click"],["name","settings"],[1,"row","mt-2"],[1,"col-md-12","input-group"],["formControlName","linkCode","type","text","id","link",1,"form-control"],["matTooltip","Copy","role","button",1,"input-group-append",3,"cdkCopyToClipboard"],["type","button",1,"btn","btn-success","btn-sm"],["name","copy",1,"small-icon"],[1,"mb-2"],["for","isLinkExpiryTime",1,"form-label"],["color","primary","formControlName","isLinkExpiryTime"],["for","isLinkExpiryTime"],[4,"ngIf"],["class","text-danger",4,"ngIf"],["color","primary","formControlName","isPassword"],["for","isPassword"],["autocomplete","new-password","type","password","class","form-control","formControlName","password",3,"placeholder",4,"ngIf"],["formControlName","isAllowDownload","color","primary"],["for","isAllowDownload"],[1,"input-group","mb-3"],["matInput","","formControlName","linkExpiryDate",1,"form-control",3,"placeholder","matDatepicker","min"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],["formControlName","linkExpiryTime","readonly","",1,"form-control","timepicker-input",3,"format","placeholder","ngxTimepicker","disableClick"],["ngxMaterialTimepickerToggleIcon","","type","button",1,"btn","btn-primary","calendar-button",3,"click","for"],["name","clock",1,"small-icon"],[1,"text-danger"],["autocomplete","new-password","type","password","formControlName","password",1,"form-control",3,"placeholder"],["type","submit",1,"btn-sm","btn","btn-success",3,"click"],["name","save",1,"small-icon"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(r,a){1&r&&(t.j41(0,"div",2)(1,"span",3),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"app-page-help-text",4),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){return a.closeDialog()}),t.nrm(6,"i-feather",6),t.k0s()(),t.j41(7,"mat-dialog-content")(8,"form",7),t.DNE(9,L,19,7,"div",8)(10,d,36,23,"div",9)(11,f,4,3,"button",10)(12,p,4,3,"button",10),t.k0s(),t.DNE(13,T,4,0,"div",11),t.k0s()),2&r&&(t.R7$(2),t.JRh(t.bMT(3,8,"SHAREABLE_LINK")),t.R7$(2),t.Y8G("code","SHAREABLE_LINK"),t.R7$(4),t.Y8G("formGroup",a.documentLinkForm),t.R7$(),t.Y8G("ngIf",a.isEditMode),t.R7$(),t.Y8G("ngIf",!a.isEditMode||a.isResetLink),t.R7$(),t.Y8G("ngIf",!a.isEditMode),t.R7$(),t.Y8G("ngIf",a.isEditMode&&a.isResetLink),t.R7$(),t.Y8G("ngIf",a.isLoading))},dependencies:[c.X1,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,n.bT,e.G,X.J,_.D9,N.WX,I.g7,I.So,D.X6,D.Vh,D.bZ,u.c9,u.zk,u.v2,u.m7,j,x,M.uc,M.oV,m.hM,m.BI,m.Yi,U.Hl,U.iY,P.M,P.X]})}return s})()},6660:(O,C,o)=>{o.d(C,{V:()=>F});var c=o(1626),m=o(5351),v=o(5203),n=o(2899),I=o(8),e=o(4438),D=o(7542),u=o(5794),t=o(4304),A=o(9301),$=o(2243),V=o(4481),x=o(177),j=o(9213),M=o(8834),N=o(2728),P=o(9036),U=o(5464),B=o(4823),W=o(3955),G=o(8599),Y=o(9519);function X(E,b){1&E&&(e.j41(0,"span",9),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&E&&(e.R7$(),e.SpI("",e.bMT(2,1,"CURRENT_VERSION")," "))}function _(E,b){if(1&E){const d=e.RV6();e.j41(0,"span",13),e.bIt("click",function(){e.eBV(d);const p=e.XpG(2).$implicit,T=e.XpG();return e.Njj(T.downloadDocument(p))}),e.j41(1,"mat-icon"),e.EFF(2," download"),e.k0s()()}}function L(E,b){if(1&E){const d=e.RV6();e.j41(0,"span",15),e.bIt("click",function(){e.eBV(d);const p=e.XpG(3).$implicit,T=e.XpG();return e.Njj(T.restoreDocumentVersion(p))}),e.j41(1,"mat-icon"),e.EFF(2," restore"),e.k0s()()}}function l(E,b){if(1&E&&(e.qex(0),e.DNE(1,L,3,0,"span",14),e.bVm()),2&E){const d=e.XpG(3);e.R7$(),e.Y8G("ngIf",!d.data.isAssignUser)}}function h(E,b){if(1&E){const d=e.RV6();e.j41(0,"div")(1,"span",10),e.bIt("click",function(){e.eBV(d);const p=e.XpG().$implicit,T=e.XpG();return e.Njj(T.onDocumentView(p))}),e.j41(2,"mat-icon"),e.EFF(3," visibility"),e.k0s()(),e.DNE(4,_,3,0,"span",11)(5,l,2,1,"ng-container",12),e.k0s()}if(2&E){const d=e.XpG(2);e.R7$(4),e.Y8G("ngIf",!d.data.isAssignUser),e.R7$(),e.Y8G("hasClaim","all_documents_restore_version")}}function k(E,b){if(1&E&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"utcToLocalTime"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"td"),e.DNE(8,X,3,3,"span",7)(9,h,6,2,"div",8),e.k0s()()),2&E){const d=b.$implicit;e.R7$(2),e.JRh(e.i5U(3,5,d.modifiedDate,"full")),e.R7$(3),e.Lme(" ",e.bMT(6,8,"ADDED_BY "),"",d.createdByUser," "),e.R7$(3),e.Y8G("ngIf",d.isCurrentVersion),e.R7$(),e.Y8G("ngIf",!d.isCurrentVersion)}}let F=(()=>{class E extends I.${data;overlay;dialogRef;toastrService;documentService;commonService;translationService;commandDialogService;documentVersions=[];constructor(d,f,p,T,K,s,g,i){super(),this.data=d,this.overlay=f,this.dialogRef=p,this.toastrService=T,this.documentService=K,this.commonService=s,this.translationService=g,this.commandDialogService=i}ngOnInit(){}closeDialog(){this.dialogRef.close()}onDocumentView(d){const p=d.url.split(".")[1];this.overlay.open(n.X,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:d.id,name:this.data.name,extension:p,isVersion:!0,id:this.data.id,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1}})}restoreDocumentVersion(d){this.sub$.sink=this.commandDialogService.deleteConformationDialog(this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_RESTORE_THIS_TO_CURRENT_VERSION")).subscribe(f=>{f&&(this.sub$.sink=this.documentService.restoreDocumentVersion(this.data.id,d.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("VERSION_RESTORED_SUCCESSFULLY")),this.dialogRef.close(!0)}))})}downloadDocument(d){const f={documentId:d.id,name:"",extension:d.url.split(".")[1],isVersion:!0,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1};this.sub$.sink=this.commonService.downloadDocument(f).subscribe({next:p=>{p.type===c.hv.Response&&(this.addDocumentTrail(this.data.id,v.X.Download.toString()),this.downloadFile(p))},error:p=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))}})}addDocumentTrail(d,f){this.sub$.sink=this.commonService.addDocumentAuditTrail({documentId:d,operationName:f}).subscribe(T=>{})}downloadFile(d){const f=new Blob([d.body],{type:d.body.type}),p=document.createElement("a");p.setAttribute("style","display:none;"),document.body.appendChild(p),p.download=this.data.name,p.href=URL.createObjectURL(f),p.target="_blank",p.click(),document.body.removeChild(p)}static \u0275fac=function(f){return new(f||E)(e.rXU(m.Vh),e.rXU(D.j),e.rXU(m.CP),e.rXU(u.tw),e.rXU(t.D),e.rXU(A.h),e.rXU($.L),e.rXU(V.Z))};static \u0275cmp=e.VBU({type:E,selectors:[["app-document-version-history"]],features:[e.Vt3],decls:12,vars:9,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"ms-auto",3,"click"],["name","x",1,"close-icon","text-danger"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],["class","badge bg-success",4,"ngIf"],[4,"ngIf"],[1,"badge","bg-success"],["matTooltip","view","role","button",1,"material-icons-outlined","me-2","text-primary",3,"click"],["role","button","class","me-2 text-primary","matTooltip","Download",3,"click",4,"ngIf"],[4,"hasClaim"],["role","button","matTooltip","Download",1,"me-2","text-primary",3,"click"],["role","button","matTooltip","Restore to Current Version","class","material-icons-outlined text-primary",3,"click",4,"ngIf"],["role","button","matTooltip","Restore to Current Version",1,"material-icons-outlined","text-primary",3,"click"]],template:function(f,p){1&f&&(e.j41(0,"div",0)(1,"span",1),e.EFF(2),e.nI1(3,"limitTo"),e.nI1(4,"translate"),e.nrm(5,"app-page-help-text",2),e.k0s(),e.j41(6,"button",3),e.bIt("click",function(){return p.closeDialog()}),e.nrm(7,"i-feather",4),e.k0s()(),e.j41(8,"mat-dialog-content")(9,"table",5)(10,"tbody"),e.DNE(11,k,10,10,"tr",6),e.k0s()()()),2&f&&(e.R7$(2),e.Lme(" ",e.i5U(3,4,p.data.name,10),"'s ",e.bMT(4,7,"VERSION_HISOTRY")," "),e.R7$(3),e.Y8G("code","VERSION_HISTORY"),e.R7$(6),e.Y8G("ngForOf",p.data.documentVersions))},dependencies:[x.Sq,x.bT,m.BI,m.Yi,j.An,M.iY,N.i,P.J,U.X,B.oV,W.D9,G.H,Y.o],styles:[".table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:none}"]})}return E})()},4432:(O,C,o)=>{o.d(C,{V:()=>I});var c=o(4438),m=o(1626),v=o(9437),n=o(7598);let I=(()=>{class e{commonHttpErrorService=(0,c.WQX)(n.T);httpClient=(0,c.WQX)(m.Qq);getStorageSettings(){return this.httpClient.get("storagesetting").pipe((0,v.W)(this.commonHttpErrorService.handleError))}getStorageSetting(u){return this.httpClient.get(`storagesetting/${u}`).pipe((0,v.W)(this.commonHttpErrorService.handleError))}addStorageSetting(u){return this.httpClient.post("storagesetting",u).pipe((0,v.W)(this.commonHttpErrorService.handleError))}updateStorageSetting(u){return this.httpClient.post(`storagesetting/${u.id}`,u).pipe((0,v.W)(this.commonHttpErrorService.handleError))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=c.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},4907:(O,C,o)=>{o.d(C,{e:()=>c});var c=function(m){return m[m.AWS=0]="AWS",m[m.CLOUDFLARE=1]="CLOUDFLARE",m[m.LOCAL=2]="LOCAL",m}(c||{})},115:(O,C,o)=>{o.d(C,{K:()=>v});var c=o(4907),m=o(4438);let v=(()=>{class n{transform(e,...D){const u=D[0]?`- ${D[0]}`:"";switch(e){case c.e.LOCAL:return"Local";case c.e.AWS:return`AWS ${u}`;case c.e.CLOUDFLARE:return`Cloudflare-R2 ${u}`;default:return"Unknown"}}static \u0275fac=function(D){return new(D||n)};static \u0275pipe=m.EJ8({name:"storageType",type:n,pure:!0,standalone:!0})}return n})()}}]);