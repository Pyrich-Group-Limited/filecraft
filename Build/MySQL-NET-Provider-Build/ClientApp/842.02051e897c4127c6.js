"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[842],{4184:(Kt,lt,u)=>{u.d(lt,{C:()=>Wt});var k=u(5351),E=u(9159),B=u(8),o=u(9417),A=u(8359),t=u(4438),K=u(2812),S=u(5794),x=u(9301),G=u(2243),q=u(177),W=u(3719),rt=u(2798),z=u(6600),Z=u(5084),_t=u(2765),V=u(8834),j=u(9213),v=u(5464),F=u(3955);function tt(_,b){if(1&_&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&_){const p=t.XpG();t.R7$(),t.SpI(" ",p.selectedRoles[0].name," ")}}function dt(_,b){if(1&_&&(t.j41(0,"span",23),t.EFF(1),t.k0s()),2&_){const p=t.XpG();t.R7$(),t.Lme(" (+",p.selectedRoles.length-1," ",2===p.selectedRoles.length?"other":"others",") ")}}function et(_,b){if(1&_&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&_){const p=b.$implicit;t.Y8G("value",p),t.R7$(),t.SpI(" ",p.name," ")}}function it(_,b){1&_&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_IS_REQURED")," "))}function Tt(_,b){1&_&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"END_DATE_IS_REQURED")," "))}function Rt(_,b){if(1&_){const p=t.RV6();t.j41(0,"div",7)(1,"div",25)(2,"mat-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",26),t.nrm(6,"input",27),t.j41(7,"div",28)(8,"button",29),t.bIt("click",function(){t.eBV(p);const m=t.sdS(11);return t.Njj(m.open())}),t.nrm(9,"i-feather",30),t.k0s()(),t.nrm(10,"mat-datepicker",null,0),t.k0s(),t.DNE(12,it,3,3,"mat-error",10),t.k0s(),t.j41(13,"div",25)(14,"mat-label"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"div",26),t.nrm(18,"input",31),t.j41(19,"div",28)(20,"button",29),t.bIt("click",function(){t.eBV(p);const m=t.sdS(23);return t.Njj(m.open())}),t.nrm(21,"i-feather",30),t.k0s()(),t.nrm(22,"mat-datepicker",null,1),t.k0s(),t.DNE(24,Tt,3,3,"mat-error",10),t.k0s()()}if(2&_){let p,d;const m=t.sdS(11),f=t.sdS(23),D=t.XpG();t.R7$(3),t.JRh(t.bMT(4,8,"CHOOSE_A_START_DATE")),t.R7$(3),t.Y8G("min",D.minDate)("matDatepicker",m),t.R7$(6),t.Y8G("ngIf",D.permissionForm.get("startDate").touched&&(null==(p=D.permissionForm.get("startDate").errors)?null:p.required)),t.R7$(3),t.JRh(t.bMT(16,10,"CHOOSE_A_END_DATE")),t.R7$(3),t.Y8G("min",D.permissionForm.get("startDate").value)("matDatepicker",f),t.R7$(6),t.Y8G("ngIf",D.permissionForm.get("startDate").touched&&(null==(d=D.permissionForm.get("endDate").errors)?null:d.required))}}function bt(_,b){1&_&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PLEASE_CONFIGURE_EMAIL_SMTP_SETTINGS")," "))}let nt=(()=>{class _ extends B.${documentPermissionService;toastrService;data;dialogRef;fb;commonService;translationService;selectedRoles=[];minDate;permissionForm;subscriptions=new A.yU;smtpConfigured;constructor(p,d,m,f,D,y,N){super(),this.documentPermissionService=p,this.toastrService=d,this.data=m,this.dialogRef=f,this.fb=D,this.commonService=y,this.translationService=N,this.minDate=new Date}ngOnInit(){this.createUserPermissionForm(),this.subscriptions.add(this.commonService.IsSmtpConfigured.subscribe(p=>{null!=p?this.smtpConfigured=p:this.checkEmailSMTPSettings()}))}checkEmailSMTPSettings(){this.sub$.sink=this.commonService.checkEmailSMTPSetting().subscribe({next:p=>{},error:p=>{this.toastrService.error(this.translationService.getValue("SMTP_SETTINGS_ERROR"))}})}createUserPermissionForm(){this.permissionForm=this.fb.group({isTimeBound:new o.hs(!1),startDate:[""],endDate:[""],isAllowDownload:new o.hs(!1),isAllowEmailNotification:new o.hs(!1)})}timeBoundChange(p){p.checked?(this.permissionForm.get("startDate").setValidators([o.k0.required]),this.permissionForm.get("endDate").setValidators([o.k0.required])):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("startDate").updateValueAndValidity(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.get("endDate").updateValueAndValidity())}saveDocumentRolePermission(){if(!this.permissionForm.valid)return void this.permissionForm.markAllAsTouched();if(0==this.selectedRoles.length)return void this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_ATLEAST_ONE_ROLE"));let p=this.selectedRoles.map(d=>Object.assign({},{id:"",documentId:this.data.documentId,roleId:d.id},this.permissionForm.value));this.sub$.sink=this.documentPermissionService.addDocumentRolePermission(p).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_ADDED_SUCCESSFULLY")),this.dialogRef.close(!0)})}onNoClick(){this.dialogRef.close()}static \u0275fac=function(d){return new(d||_)(t.rXU(K._),t.rXU(S.tw),t.rXU(k.Vh),t.rXU(k.CP),t.rXU(o.ze),t.rXU(x.h),t.rXU(G.L))};static \u0275cmp=t.VBU({type:_,selectors:[["app-manage-role-permission"]],features:[t.Vt3],decls:42,vars:28,consts:[["startDatePicker",""],["endDatePicker",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"formGroup"],[1,"row"],[1,"form-group","col-md-12"],["multiple","",1,"form-control",3,"valueChange","value"],[4,"ngIf"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row",4,"ngIf"],["color","primary","formControlName","isAllowDownload"],[1,"col-md-12"],["color","primary","formControlName","isAllowEmailNotification"],["class","alert alert-warning mt-2",4,"ngIf"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"example-additional-selection"],[3,"value"],[1,"form-group","col-md-6"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"min","matDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],["formControlName","endDate",1,"form-control",3,"min","matDatepicker"],[1,"alert","alert-warning","mt-2"]],template:function(d,m){1&d&&(t.j41(0,"div",2)(1,"h2",3),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return m.onNoClick()}),t.j41(5,"mat-icon",5),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"mat-dialog-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"mat-label"),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"mat-select",9),t.mxI("valueChange",function(D){return t.DH7(m.selectedRoles,D)||(m.selectedRoles=D),D}),t.j41(15,"mat-select-trigger"),t.DNE(16,tt,2,1,"span",10)(17,dt,2,2,"span",11),t.k0s(),t.DNE(18,et,2,2,"mat-option",12),t.k0s()()(),t.j41(19,"div",7)(20,"mat-checkbox",13),t.bIt("change",function(D){return m.timeBoundChange(D)}),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.DNE(23,Rt,25,12,"div",14),t.j41(24,"div",7)(25,"mat-checkbox",15),t.EFF(26),t.nI1(27,"translate"),t.k0s()(),t.j41(28,"div",16)(29,"mat-checkbox",17),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.DNE(32,bt,3,3,"div",18),t.j41(33,"div",16)(34,"button",19),t.bIt("click",function(){return m.saveDocumentRolePermission()}),t.nrm(35,"i-feather",20),t.EFF(36),t.nI1(37,"translate"),t.k0s(),t.j41(38,"button",21),t.bIt("click",function(){return m.onNoClick()}),t.nrm(39,"i-feather",22),t.EFF(40),t.nI1(41,"translate"),t.k0s()()()()),2&d&&(t.R7$(2),t.JRh(t.bMT(3,14,"ROLE_PERMISSION")),t.R7$(6),t.Y8G("formGroup",m.permissionForm),t.R7$(4),t.JRh(t.bMT(13,16,"ROLES")),t.R7$(2),t.R50("value",m.selectedRoles),t.R7$(2),t.Y8G("ngIf",m.selectedRoles.length>0),t.R7$(),t.Y8G("ngIf",m.selectedRoles.length>1),t.R7$(),t.Y8G("ngForOf",m.data.roles),t.R7$(3),t.SpI(" ",t.bMT(22,18,"SPACIFY_THE_PERIOD"),""),t.R7$(2),t.Y8G("ngIf",m.permissionForm.get("isTimeBound").value),t.R7$(3),t.JRh(t.bMT(27,20,"ALLOW_DOWNLOAD")),t.R7$(4),t.JRh(t.bMT(31,22,"IS_ALLOW_NOTIFICATION")),t.R7$(2),t.Y8G("ngIf",m.permissionForm.get("isAllowEmailNotification").value&&!m.smtpConfigured),t.R7$(4),t.SpI(" ",t.bMT(37,24,"SAVE")," "),t.R7$(4),t.SpI(" ",t.bMT(41,26,"CANCEL")," "))},dependencies:[o.qT,o.me,o.BC,o.cb,o.j4,o.JD,q.Sq,q.bT,k.BI,k.Yi,W.nJ,W.TL,rt.VO,rt.$2,z.wT,Z.Vh,Z.bZ,_t.So,V.iY,j.An,v.X,F.D9]})}return _})();function ht(_,b){if(1&_&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&_){const p=t.XpG();t.R7$(),t.E5c(" ",p.selectedUsers[0].firstName," ",p.selectedUsers[0].lastName," (",p.selectedUsers[0].userName,") ")}}function U(_,b){if(1&_&&(t.j41(0,"span",24),t.EFF(1),t.k0s()),2&_){const p=t.XpG();t.R7$(),t.Lme(" (+",p.selectedUsers.length-1," ",2===p.selectedUsers.length?"other":"others",") ")}}function O(_,b){if(1&_&&(t.j41(0,"mat-option",25),t.EFF(1),t.k0s()),2&_){const p=b.$implicit;t.Y8G("value",p),t.R7$(),t.E5c(" ",p.firstName," ",p.lastName," (",p.userName,") ")}}function J(_,b){1&_&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_IS_REQURED")," "))}function Y(_,b){1&_&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"END_DATE_IS_REQURED")," "))}function X(_,b){if(1&_){const p=t.RV6();t.j41(0,"div",7)(1,"div",26)(2,"mat-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",27),t.nrm(6,"input",28),t.j41(7,"div",29)(8,"button",30),t.bIt("click",function(){t.eBV(p);const m=t.sdS(11);return t.Njj(m.open())}),t.nrm(9,"i-feather",31),t.k0s()(),t.nrm(10,"mat-datepicker",null,0),t.k0s(),t.DNE(12,J,3,3,"mat-error",10),t.k0s(),t.j41(13,"div",26)(14,"mat-label"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"div",27),t.nrm(18,"input",32),t.j41(19,"div",29)(20,"button",30),t.bIt("click",function(){t.eBV(p);const m=t.sdS(23);return t.Njj(m.open())}),t.nrm(21,"i-feather",31),t.k0s()(),t.nrm(22,"mat-datepicker",null,1),t.k0s(),t.DNE(24,Y,3,3,"mat-error",10),t.k0s()()}if(2&_){let p,d;const m=t.sdS(11),f=t.sdS(23),D=t.XpG();t.R7$(3),t.JRh(t.bMT(4,8,"CHOOSE_A_START_DATE")),t.R7$(3),t.Y8G("min",D.minDate)("matDatepicker",m),t.R7$(6),t.Y8G("ngIf",D.permissionForm.get("startDate").touched&&(null==(p=D.permissionForm.get("startDate").errors)?null:p.required)),t.R7$(3),t.JRh(t.bMT(16,10,"CHOOSE_A_END_DATE")),t.R7$(3),t.Y8G("min",D.permissionForm.get("startDate").value)("matDatepicker",f),t.R7$(6),t.Y8G("ngIf",D.permissionForm.get("startDate").touched&&(null==(d=D.permissionForm.get("endDate").errors)?null:d.required))}}function H(_,b){1&_&&(t.j41(0,"div",33),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PLEASE_CONFIGURE_EMAIL_SMTP_SETTINGS")," "))}let gt=(()=>{class _ extends B.${documentPermissionService;toastrService;data;dialogRef;fb;commonService;translationService;selectedUsers=[];minDate;subscriptions=new A.yU;smtpConfigured;permissionForm;constructor(p,d,m,f,D,y,N){super(),this.documentPermissionService=p,this.toastrService=d,this.data=m,this.dialogRef=f,this.fb=D,this.commonService=y,this.translationService=N,this.minDate=new Date}ngOnInit(){this.createUserPermissionForm(),this.subscriptions.add(this.commonService.IsSmtpConfigured.subscribe(p=>{null!=p?this.smtpConfigured=p:this.checkEmailSMTPSettings()}))}checkEmailSMTPSettings(){this.sub$.sink=this.commonService.checkEmailSMTPSetting().subscribe({next:p=>{},error:p=>{this.toastrService.error(this.translationService.getValue("SMTP_SETTINGS_ERROR"))}})}createUserPermissionForm(){this.permissionForm=this.fb.group({isTimeBound:new o.hs(!1),startDate:[""],endDate:[""],isAllowDownload:new o.hs(!1),isAllowEmailNotification:new o.hs(!1)})}timeBoundChange(p){p.checked?(this.permissionForm.get("startDate").setValidators([o.k0.required]),this.permissionForm.get("endDate").setValidators([o.k0.required])):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("startDate").updateValueAndValidity(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.get("endDate").updateValueAndValidity())}saveDocumentUserPermission(){if(!this.permissionForm.valid)return void this.permissionForm.markAllAsTouched();if(0==this.selectedUsers.length)return void this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_ATLEAST_ONE_USER"));let p=this.selectedUsers.map(d=>Object.assign({},{id:"",documentId:this.data.documentId,userId:d.id},this.permissionForm.value));this.sub$.sink=this.documentPermissionService.addDocumentUserPermission(p).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_ADDED_SUCCESSFULLY")),this.dialogRef.close(!0)})}onNoClick(){this.dialogRef.close()}static \u0275fac=function(d){return new(d||_)(t.rXU(K._),t.rXU(S.tw),t.rXU(k.Vh),t.rXU(k.CP),t.rXU(o.ze),t.rXU(x.h),t.rXU(G.L))};static \u0275cmp=t.VBU({type:_,selectors:[["app-manage-user-permission"]],features:[t.Vt3],decls:42,vars:28,consts:[["startDatePicker",""],["endDatePicker",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[1,"form-group",3,"formGroup"],[1,"row"],[1,"form-group","col-md-12"],["multiple","",1,"form-control",3,"valueChange","value"],[4,"ngIf"],["class","example-additional-selection",4,"ngIf"],["color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary","formControlName","isTimeBound",3,"change"],["class","row",4,"ngIf"],["color","primary","formControlName","isAllowDownload"],[1,"col-md-12"],["color","primary","formControlName","isAllowEmailNotification"],["class","alert alert-warning mt-2",4,"ngIf"],[1,"col-12"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"example-additional-selection"],["color","primary",3,"value"],[1,"form-group","col-md-6"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"min","matDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],["formControlName","endDate",1,"form-control",3,"min","matDatepicker"],[1,"alert","alert-warning","mt-2"]],template:function(d,m){1&d&&(t.j41(0,"div",2)(1,"h2",3),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return m.onNoClick()}),t.j41(5,"mat-icon",5),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"mat-dialog-content")(8,"form",6)(9,"div",7)(10,"div",8)(11,"mat-label"),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"mat-select",9),t.mxI("valueChange",function(D){return t.DH7(m.selectedUsers,D)||(m.selectedUsers=D),D}),t.j41(15,"mat-select-trigger"),t.DNE(16,ht,2,3,"span",10)(17,U,2,2,"span",11),t.k0s(),t.DNE(18,O,2,4,"mat-option",12),t.k0s()()(),t.j41(19,"div",7)(20,"mat-checkbox",13),t.bIt("change",function(D){return m.timeBoundChange(D)}),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.DNE(23,X,25,12,"div",14),t.j41(24,"div",7)(25,"mat-checkbox",15),t.EFF(26),t.nI1(27,"translate"),t.k0s()(),t.j41(28,"div",16)(29,"mat-checkbox",17),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.DNE(32,H,3,3,"div",18),t.j41(33,"div",19)(34,"button",20),t.bIt("click",function(){return m.saveDocumentUserPermission()}),t.nrm(35,"i-feather",21),t.EFF(36),t.nI1(37,"translate"),t.k0s(),t.j41(38,"button",22),t.bIt("click",function(){return m.onNoClick()}),t.nrm(39,"i-feather",23),t.EFF(40),t.nI1(41,"translate"),t.k0s()()()()),2&d&&(t.R7$(2),t.JRh(t.bMT(3,14,"USER_PERMISSION")),t.R7$(6),t.Y8G("formGroup",m.permissionForm),t.R7$(4),t.JRh(t.bMT(13,16,"USERS")),t.R7$(2),t.R50("value",m.selectedUsers),t.R7$(2),t.Y8G("ngIf",m.selectedUsers.length>0),t.R7$(),t.Y8G("ngIf",m.selectedUsers.length>1),t.R7$(),t.Y8G("ngForOf",m.data.users),t.R7$(3),t.SpI(" ",t.bMT(22,18,"SPACIFY_THE_PERIOD"),""),t.R7$(2),t.Y8G("ngIf",m.permissionForm.get("isTimeBound").value),t.R7$(3),t.JRh(t.bMT(27,20,"ALLOW_DOWNLOAD")),t.R7$(4),t.JRh(t.bMT(31,22,"IS_ALLOW_NOTIFICATION")),t.R7$(2),t.Y8G("ngIf",m.permissionForm.get("isAllowEmailNotification").value&&!m.smtpConfigured),t.R7$(4),t.SpI(" ",t.bMT(37,24,"SAVE")," "),t.R7$(4),t.SpI(" ",t.bMT(41,26,"CANCEL"),""))},dependencies:[o.qT,o.me,o.BC,o.cb,o.j4,o.JD,q.Sq,q.bT,k.BI,k.Yi,W.nJ,W.TL,rt.VO,rt.$2,z.wT,Z.Vh,Z.bZ,_t.So,V.iY,j.An,v.X,F.D9]})}return _})();var mt=u(4304),jt=u(1188),Nt=u(4481),At=u(6695),$t=u(9036),st=u(9519);const Lt=["userPermissionsPaginator"],Et=()=>[10,20,50,100];function ft(_,b){if(1&_&&(t.j41(0,"div",35)(1,"p")(2,"b"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.EFF(5),t.k0s()()),2&_){const p=t.XpG(2);t.R7$(3),t.SpI("",t.bMT(4,2,"DESCRIPTION"),":"),t.R7$(2),t.SpI(" ",p.document.description," ")}}function kt(_,b){if(1&_&&(t.j41(0,"div",32)(1,"div",33)(2,"p")(3,"b"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.EFF(6),t.k0s()(),t.DNE(7,ft,6,4,"div",34),t.k0s()),2&_){const p=t.XpG();t.R7$(4),t.SpI("",t.bMT(5,3,"DOCUMENT_NAME"),":"),t.R7$(2),t.SpI(" ",p.document.name," "),t.R7$(),t.Y8G("ngIf",p.document.description)}}function vt(_,b){1&_&&(t.j41(0,"th",36),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION")," "))}function Pt(_,b){if(1&_){const p=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(p);const m=t.XpG().$implicit,f=t.XpG();return t.Njj(f.deleteDocumentUserPermission(m))}),t.nrm(1,"i-feather",40),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&_&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"DELETE")," "))}function Gt(_,b){if(1&_){const p=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(p);const m=t.XpG().$implicit,f=t.XpG();return t.Njj(f.deleteDocumentRolePermission(m))}),t.nrm(1,"i-feather",40),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&_&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"DELETE")," "))}function Ct(_,b){if(1&_&&(t.j41(0,"td",37),t.DNE(1,Pt,4,3,"button",38)(2,Gt,4,3,"button",38),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.Y8G("ngIf","User"==p.type),t.R7$(),t.Y8G("ngIf","Role"==p.type)}}function yt(_,b){1&_&&(t.j41(0,"th",41),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ALLOW_DOWNLOAD")," "))}function St(_,b){1&_&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"YES")," "))}function Ft(_,b){1&_&&(t.qex(0),t.EFF(1),t.nI1(2,"translate"),t.bVm()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"NO")," "))}function Vt(_,b){if(1&_&&(t.j41(0,"td",42),t.DNE(1,St,3,3,"ng-container",43)(2,Ft,3,3,"ng-container",43),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.Y8G("ngIf",p.isAllowDownload),t.R7$(),t.Y8G("ngIf",!p.isAllowDownload)}}function at(_,b){1&_&&(t.j41(0,"th",41),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.JRh(t.bMT(2,1,"TYPE")))}function pt(_,b){if(1&_&&(t.j41(0,"td",42),t.EFF(1),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.SpI(" ",p.type," ")}}function g(_,b){1&_&&(t.j41(0,"th",41),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"USER_ROLE_NAME")," "))}function $(_,b){if(1&_&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&_){const p=t.XpG().$implicit;t.R7$(),t.Lme(" ",p.user.firstName," ",p.user.lastName," ")}}function r(_,b){if(1&_&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&_){const p=t.XpG().$implicit;t.R7$(),t.SpI(" ",p.role.name," ")}}function h(_,b){if(1&_&&(t.j41(0,"td",42),t.DNE(1,$,2,2,"span",43)(2,r,2,1,"span",43),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.Y8G("ngIf","User"==p.type),t.R7$(),t.Y8G("ngIf","Role"==p.type)}}function l(_,b){1&_&&(t.j41(0,"th",41),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.JRh(t.bMT(2,1,"EMAIL")))}function C(_,b){if(1&_&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&_){const p=t.XpG().$implicit;t.R7$(),t.SpI(" ",p.user.email," ")}}function R(_,b){1&_&&(t.j41(0,"span"),t.EFF(1," -- "),t.k0s())}function ot(_,b){if(1&_&&(t.j41(0,"td",42),t.DNE(1,C,2,1,"span",43)(2,R,2,0,"span",43),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.Y8G("ngIf","User"==p.type),t.R7$(),t.Y8G("ngIf","Role"==p.type)}}function Q(_,b){1&_&&(t.j41(0,"th",41),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE")," "))}function ct(_,b){if(1&_&&(t.qex(0),t.EFF(1),t.nI1(2,"utcToLocalTime"),t.bVm()),2&_){const p=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,p.startDate,"shortDate")," ")}}function xt(_,b){1&_&&(t.qex(0),t.EFF(1," -- "),t.bVm())}function Dt(_,b){if(1&_&&(t.j41(0,"td",42),t.DNE(1,ct,3,4,"ng-container",43)(2,xt,2,0,"ng-container",43),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.Y8G("ngIf",p.isTimeBound),t.R7$(),t.Y8G("ngIf",!p.isTimeBound)}}function Ot(_,b){1&_&&(t.j41(0,"th",41),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&_&&(t.R7$(),t.JRh(t.bMT(2,1,"END_DATE")))}function Bt(_,b){if(1&_&&(t.qex(0),t.EFF(1),t.nI1(2,"utcToLocalTime"),t.bVm()),2&_){const p=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,p.endDate,"shortDate")," ")}}function Mt(_,b){1&_&&(t.qex(0),t.EFF(1," -- "),t.bVm())}function It(_,b){if(1&_&&(t.j41(0,"td",42),t.DNE(1,Bt,3,4,"ng-container",43)(2,Mt,2,0,"ng-container",43),t.k0s()),2&_){const p=b.$implicit;t.R7$(),t.Y8G("ngIf",p.isTimeBound),t.R7$(),t.Y8G("ngIf",!p.isTimeBound)}}function Ut(_,b){1&_&&(t.j41(0,"td",44),t.nrm(1,"mat-paginator",45,1),t.k0s()),2&_&&(t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(1,Et)))}function Yt(_,b){1&_&&(t.j41(0,"tr")(1,"td",46)(2,"div",47)(3,"b"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()()),2&_&&(t.R7$(4),t.SpI(" ",t.bMT(5,1,"NO_DATA_FOUND"),""))}function Xt(_,b){1&_&&t.nrm(0,"tr",48)}function Ht(_,b){1&_&&t.nrm(0,"tr",49)}function Qt(_,b){1&_&&t.nrm(0,"tr",50)}let Wt=(()=>{class _ extends B.${documentService;documentPermissionService;route;commonDialogService;toastrService;dialog;commonService;data;dialogRef;translationService;documentPermissions=[];document;footerToDisplayed=["footer"];users=[];roles=[];documentPermissionsColumns=["action","type","isAllowDownload","name","email","startDate","endDate"];permissionsDataSource;userPermissionsPaginator;constructor(p,d,m,f,D,y,N,ut,zt,qt){super(),this.documentService=p,this.documentPermissionService=d,this.route=m,this.commonDialogService=f,this.toastrService=D,this.dialog=y,this.commonService=N,this.data=ut,this.dialogRef=zt,this.translationService=qt,this.document=ut}ngOnInit(){this.sub$.sink=this.route.params.subscribe(p=>{this.getDocumentPrmission(),this.getUsers(),this.getRoles()})}getDocumentPrmission(){this.sub$.sink=this.documentPermissionService.getDoucmentPermission(this.document.id).subscribe(p=>{this.documentPermissions=p,this.permissionsDataSource=new E.I6(this.documentPermissions),this.permissionsDataSource.paginator=this.userPermissionsPaginator})}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(p=>this.users=p)}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(p=>this.roles=p)}deleteDocumentUserPermission(p){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")}?`).subscribe(d=>{d&&(this.sub$.sink=this.documentPermissionService.deleteDocumentUserPermission(p.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_DELETED_SUCCESSFULLY")),this.getDocumentPrmission()}))})}deleteDocumentRolePermission(p){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")}?`).subscribe(d=>{d&&(this.sub$.sink=this.documentPermissionService.deleteDocumentRolePermission(p.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("PERMISSION_DELETED_SUCCESSFULLY")),this.getDocumentPrmission()}))})}addDocumentUserPermission(){const p=this.dialog.open(gt,{width:"600px",data:Object.assign({users:this.users,documentId:this.document.id})});this.sub$.sink=p.afterClosed().subscribe(d=>{d&&this.getDocumentPrmission()})}addDocumentRolePermission(){const p=this.dialog.open(nt,{width:"600px",data:Object.assign({roles:this.roles,documentId:this.document.id})});this.sub$.sink=p.afterClosed().subscribe(d=>{d&&this.getDocumentPrmission()})}applyPermissionFilter(p){const d=p.target.value.trim().toLocaleLowerCase();var m=this.documentPermissions.filter(f=>"User"==f.type&&(f.user.firstName.toLocaleLowerCase().includes(d)||f.user.lastName.toLocaleLowerCase().includes(d)||f.user.email.toLocaleLowerCase().includes(d))||"Role"==f.type&&f.role.name.toLocaleLowerCase().includes(d));this.permissionsDataSource=new E.I6(m),this.permissionsDataSource.paginator=this.userPermissionsPaginator}closeDialog(){this.dialogRef.close()}static \u0275fac=function(d){return new(d||_)(t.rXU(mt.D),t.rXU(K._),t.rXU(jt.nX),t.rXU(Nt.Z),t.rXU(S.tw),t.rXU(k.bZ),t.rXU(x.h),t.rXU(k.Vh),t.rXU(k.CP),t.rXU(G.L))};static \u0275cmp=t.VBU({type:_,selectors:[["app-document-permission-list"]],viewQuery:function(d,m){if(1&d&&t.GBs(Lt,5),2&d){let f;t.mGM(f=t.lsd())&&(m.userPermissionsPaginator=f.first)}},features:[t.Vt3],decls:54,vars:22,consts:[["input1",""],["userPermissionsPaginator",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["code","SHARE_DOCUMENT"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],["class","col-md-12 row pl-0",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm","m-bottom-10","m-top-10",3,"click"],["name","plus",1,"small-icon"],["type","button",1,"btn","btn-danger","btn-sm","m-bottom-10","m-top-10","ms-3",3,"click"],[1,"col-md-12","form-group","mt-2","mb-2"],[1,"form-control",3,"keyup","placeholder"],[1,"grid-height-permission"],["mat-table","",3,"dataSource"],["matColumnDef","action"],["style","width: 20%","mat-header-cell","",4,"matHeaderCellDef"],["style","width: 20%","mat-cell","",4,"matCellDef"],["matColumnDef","isAllowDownload"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","footer"],["mat-footer-cell","","colspan","7",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[1,"col-md-12","row","pl-0"],[1,"col-md-4"],["class","col-md-8",4,"ngIf"],[1,"col-md-8"],["mat-header-cell","",2,"width","20%"],["mat-cell","",2,"width","20%"],["class","btn btn-danger btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","trash",1,"small-icon"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-footer-cell","","colspan","7"],[3,"pageSizeOptions"],["colspan","5"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(d,m){if(1&d){const f=t.RV6();t.j41(0,"div",2)(1,"span",3),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"app-page-help-text",4),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(f),t.Njj(m.closeDialog())}),t.j41(6,"mat-icon",6),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-dialog-content"),t.DNE(9,kt,8,5,"div",7),t.j41(10,"button",8),t.bIt("click",function(){return t.eBV(f),t.Njj(m.addDocumentUserPermission())}),t.nrm(11,"i-feather",9),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"button",10),t.bIt("click",function(){return t.eBV(f),t.Njj(m.addDocumentRolePermission())}),t.nrm(15,"i-feather",9),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.j41(18,"div",11)(19,"label"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"input",12,0),t.nI1(24,"translate"),t.bIt("keyup",function(y){return t.eBV(f),t.Njj(m.applyPermissionFilter(y))}),t.k0s()(),t.j41(25,"div",13)(26,"table",14),t.qex(27,15),t.DNE(28,vt,3,3,"th",16)(29,Ct,3,2,"td",17),t.bVm(),t.qex(30,18),t.DNE(31,yt,3,3,"th",19)(32,Vt,3,2,"td",20),t.bVm(),t.qex(33,21),t.DNE(34,at,3,3,"th",19)(35,pt,2,1,"td",20),t.bVm(),t.qex(36,22),t.DNE(37,g,3,3,"th",19)(38,h,3,2,"td",20),t.bVm(),t.qex(39,23),t.DNE(40,l,3,3,"th",19)(41,ot,3,2,"td",20),t.bVm(),t.qex(42,24),t.DNE(43,Q,3,3,"th",19)(44,Dt,3,2,"td",20),t.bVm(),t.qex(45,25),t.DNE(46,Ot,3,3,"th",19)(47,It,3,2,"td",20),t.bVm(),t.qex(48,26),t.DNE(49,Ut,3,2,"td",27),t.bVm(),t.DNE(50,Yt,6,3,"tr",28)(51,Xt,1,0,"tr",29)(52,Ht,1,0,"tr",30)(53,Qt,1,0,"tr",31),t.k0s()()()}2&d&&(t.R7$(2),t.SpI("",t.bMT(3,12,"SHARE_DOCUMENT")," "),t.R7$(7),t.Y8G("ngIf",m.document),t.R7$(3),t.SpI(" ",t.bMT(13,14,"ASSIGN_USERS")," "),t.R7$(4),t.SpI(" ",t.bMT(17,16,"ASSIGN_ROLES")," "),t.R7$(4),t.JRh(t.bMT(21,18,"FILTER")),t.R7$(2),t.FS9("placeholder",t.bMT(24,20,"SEARCH_BY_USER_ROLE_NAME_AND_EMAIL")),t.R7$(4),t.Y8G("dataSource",m.permissionsDataSource),t.R7$(25),t.Y8G("matHeaderRowDef",m.documentPermissionsColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",m.documentPermissionsColumns),t.R7$(),t.Y8G("matFooterRowDef",m.footerToDisplayed)("matFooterRowDefSticky",!0))},dependencies:[q.bT,E.Zl,E.tL,E.ji,E.cC,E.YV,E.iL,E.Zq,E.xW,E.KS,E.$R,E.Qo,E.YZ,E.NB,E.iF,E.ky,k.BI,k.Yi,At.iy,V.iY,j.An,v.X,$t.J,F.D9,st.o]})}return _})()},4155:(Kt,lt,u)=>{u.r(lt),u.d(lt,{DocumentPermissionModule:()=>_});var k=u(177),E=u(9159),B=u(5351),o=u(2798),A=u(450),t=u(6695),K=u(9631),S=u(1188),x=u(4184),G=u(4438);const q=[{path:":id",component:x.C}];let W=(()=>{class b{static \u0275fac=function(m){return new(m||b)};static \u0275mod=G.$C({type:b});static \u0275inj=G.G2t({imports:[S.iI.forChild(q),S.iI]})}return b})();var rt=u(5084),z=u(6600),Z=u(9417),_t=u(2812);u(6860),u(9969);let Bt=(()=>{class b{static{this.\u0275fac=function(m){return new(m||b)}}static{this.\u0275mod=G.$C({type:b})}static{this.\u0275inj=G.G2t({imports:[z.yE,z.yE]})}}return b})();var Mt=u(2765),It=u(6471),Ut=u(3955),Yt=u(9213),Xt=u(8834),Ht=u(5464),Qt=u(3887),Wt=u(3679);let _=(()=>{class b{static \u0275fac=function(m){return new(m||b)};static \u0275mod=G.$C({type:b});static \u0275inj=G.G2t({providers:[_t._,{provide:z.Ju,useValue:"en-GB"}],imports:[W,Z.YN,Z.X1,k.MD,E.tP,B.hM,o.Ve,A.mV,t.Ou,K.fS,rt.X6,z.WX,Bt,Mt.g7,It.YN,Ut.h,Xt.Hl,Yt.m_,Ht.M,Qt.G,Wt.Y]})}return b})()},2812:(Kt,lt,u)=>{u.d(lt,{_:()=>A});var k=u(9437),E=u(4438),B=u(1626),o=u(7598);let A=(()=>{class t{httpClient;commonHttpErrorService;constructor(S,x){this.httpClient=S,this.commonHttpErrorService=x}getDoucmentPermission(S){return this.httpClient.get(`DocumentRolePermission/${S}`).pipe((0,k.W)(this.commonHttpErrorService.handleError))}deleteDocumentUserPermission(S){return this.httpClient.delete(`DocumentUserPermission/${S}`).pipe((0,k.W)(this.commonHttpErrorService.handleError))}deleteDocumentRolePermission(S){return this.httpClient.delete(`DocumentRolePermission/${S}`).pipe((0,k.W)(this.commonHttpErrorService.handleError))}addDocumentUserPermission(S){return this.httpClient.post("DocumentUserPermission",{documentUserPermissions:S}).pipe((0,k.W)(this.commonHttpErrorService.handleError))}addDocumentRolePermission(S){return this.httpClient.post("DocumentRolePermission",{documentRolePermissions:S}).pipe((0,k.W)(this.commonHttpErrorService.handleError))}multipleDocumentsToUsersAndRoles(S){return this.httpClient.post("DocumentRolePermission/multiple",S).pipe((0,k.W)(this.commonHttpErrorService.handleError))}static \u0275fac=function(x){return new(x||t)(E.KVO(B.Qq),E.KVO(o.T))};static \u0275prov=E.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},7461:(Kt,lt,u)=>{u.r(lt),u.d(lt,{DocumentModule:()=>Ya});var k=u(177),E=u(1188),B=u(3870),o=u(5024),A=u(1626),t=u(4438),K=u(6695),S=u(2042),x=u(5203),G=u(1152),q=u(2899),W=u(7786),rt=u(3726),z=u(8141),Z=u(152),_t=u(3294),V=u(8),j=u(5321),v=u(9417),F=u(5351),tt=u(5794),dt=u(4304),et=u(9301),it=u(2243),Tt=u(7008),Rt=u(6228),bt=u(3719),nt=u(2798),ht=u(6600),U=u(9213),O=u(8834),J=u(2728),Y=u(9036),X=u(5464),H=u(3955);const gt=i=>({"margin-left.px":i}),mt=i=>({color:i});function jt(i,s){1&i&&(t.j41(0,"div",23),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"NAME_IS_REQUIRED")," "))}function Nt(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,jt,3,3,"div",22),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("name").errors)?null:e.required)}}function At(i,s){if(1&i&&(t.j41(0,"div")(1,"b"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.name,"")}}function $t(i,s){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function st(i,s){if(1&i&&(t.j41(0,"mat-option",24)(1,"div",25),t.DNE(2,At,3,1,"div",10)(3,$t,2,1,"div",10),t.k0s()()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.Y8G("ngStyle",t.eq3(4,gt,20*e.deafLevel)),t.R7$(),t.Y8G("ngIf",!e.parentId),t.R7$(),t.Y8G("ngIf",e.parentId)}}function Lt(i,s){1&i&&(t.j41(0,"div",23),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CATEGORY_IS_REQUIRED")," "))}function Et(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Lt,3,3,"div",22),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("categoryId").errors)?null:e.required)}}function ft(i,s){if(1&i&&(t.j41(0,"mat-option",24)(1,"span",26),t.EFF(2),t.k0s()()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.Y8G("ngStyle",t.eq3(3,mt,null==e?null:e.colorCode)),t.R7$(),t.SpI(" ",e.name," ")}}function kt(i,s){1&i&&(t.j41(0,"label"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"META_TAGS")," "))}function vt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onAddAnotherMetaTag())}),t.nrm(1,"i-feather",35),t.k0s()}}function Pt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(e);const n=t.XpG().index,c=t.XpG();return t.Njj(c.onDeleteMetaTag(n))}),t.nrm(1,"i-feather",37),t.k0s()}}function Gt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",27),t.qex(1,28),t.DNE(2,kt,3,3,"label",10),t.j41(3,"div",6)(4,"div",29)(5,"input",30),t.bIt("change",function(n){const c=t.eBV(e).index,T=t.XpG();return t.Njj(T.onMetatagChange(n,c))}),t.k0s()(),t.j41(6,"div",31),t.DNE(7,vt,2,0,"button",32)(8,Pt,2,0,"button",33),t.k0s()(),t.bVm(),t.k0s()}if(2&i){const e=s.index;t.R7$(),t.Y8G("formGroupName",e),t.R7$(),t.Y8G("ngIf",0==e),t.R7$(5),t.Y8G("ngIf",0==e),t.R7$(),t.Y8G("ngIf",0!=e)}}function Ct(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",38),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveDocument())}),t.nrm(1,"i-feather",39),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"SAVE"),""))}let yt=(()=>{class i extends V.${fb;dialogRef;data;toastrService;documentService;commonService;translationService;categoryService;documentStatusService;document;documentForm;extension="";documentSource;allCategories=[];documentStatuses=[];get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}constructor(e,a,n,c,T,I,L,w,P){super(),this.fb=e,this.dialogRef=a,this.data=n,this.toastrService=c,this.documentService=T,this.commonService=I,this.translationService=L,this.categoryService=w,this.documentStatusService=P}ngOnInit(){this.createDocumentForm(),this.pushValuesDocumentMetatagArray(),this.patchDocumentForm(),this.getCategories(),this.populateDocumentStatus()}populateDocumentStatus(){this.data&&this.data.documentStatuses&&this.data.documentStatuses.length>0?this.documentStatuses=[...this.data.documentStatuses]:this.documentStatusService.getDocumentStatuss().subscribe(e=>{e&&e.length>0&&(this.documentStatuses=[...e])})}getCategories(){this.data.categories&&this.data.categories.length>0?this.setDeafLevel():this.categoryService.getAllCategoriesForDropDown().subscribe(e=>{e&&e.length>0&&(this.data.categories=[...e],this.setDeafLevel())})}setDeafLevel(e,a){const n=this.data.categories.filter(c=>c.parentId==a);return n.length>0&&n.map((c,T)=>{c.deafLevel=e?e.deafLevel+1:0,c.index=(e?e.index:0)+T*Math.pow(.1,c.deafLevel),this.allCategories.push(c),this.setDeafLevel(c,c.id)}),e}patchDocumentForm(){this.documentForm.patchValue({name:this.data.document.name,description:this.data.document.description,categoryId:this.data.document.categoryId,documentStatusId:this.data.document.documentStatusId})}createDocumentForm(){this.documentForm=this.fb.group({name:["",[v.k0.required]],description:[""],categoryId:["",[v.k0.required]],documentStatusId:[""],documentMetaTags:this.fb.array([])})}SaveDocument(){this.documentForm.valid?this.sub$.sink=this.documentService.updateDocument(this.buildDocumentObject()).subscribe(e=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_UPDATE_SUCCESSFULLY")),this.addDocumentTrail()}):this.markFormGroupTouched(this.documentForm)}addDocumentTrail(){const e={documentId:this.data.document.id,operationName:x.X.Modified.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(e).subscribe(a=>{this.dialogRef.close("loaded")})}markFormGroupTouched(e){Object.values(e.controls).forEach(a=>{a.markAsTouched(),a.controls&&this.markFormGroupTouched(a)})}buildDocumentObject(){const e=this.documentMetaTagsArray.value;return{id:this.data.document.id,categoryId:this.documentForm.get("categoryId").value,documentStatusId:this.documentForm.get("documentStatusId").value,description:this.documentForm.get("description").value,name:this.documentForm.get("name").value,documentMetaDatas:[...e]}}onDocumentCancel(){this.dialogRef.close("canceled")}onAddAnotherMetaTag(){this.documentMetaTagsArray.insert(0,this.editDocmentMetaData({id:"",documentId:this.document&&this.document.id?this.document.id:"",metatag:""}))}onDeleteMetaTag(e){this.documentMetaTagsArray.removeAt(e)}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],metatag:[""]})}pushValuesDocumentMetatagArray(){this.sub$.sink=this.documentService.getdocumentMetadataById(this.data.document.id).subscribe(e=>{e.length>0?e.map(a=>{this.documentMetaTagsArray.push(this.editDocmentMetaData(a))}):this.documentMetaTagsArray.push(this.buildDocumentMetaTag())})}onMetatagChange(e,a){if(!this.documentMetaTagsArray.at(a).get("metatag").value)return;const c=this.documentMetaTagsArray.at(a).get("metatag");c.setValidators([v.k0.required]),c.updateValueAndValidity()}editDocmentMetaData(e){return this.fb.group({id:[e.id],documentId:[e.documentId],metatag:[e.metatag]})}static \u0275fac=function(a){return new(a||i)(t.rXU(v.ze),t.rXU(F.CP),t.rXU(F.Vh),t.rXU(tt.tw),t.rXU(dt.D),t.rXU(et.h),t.rXU(it.L),t.rXU(Tt.M),t.rXU(Rt.Z))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-edit"]],features:[t.Vt3],decls:54,vars:31,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["code","ADD_DOCUMENT"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"formGroup"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["formControlName","name","type","text",1,"form-control"],[4,"ngIf"],["formControlName","categoryId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["formControlName","documentStatusId",1,"form-control"],["class","","formArrayName","documentMetaTags",4,"ngFor","ngForOf"],[1,"col-sm-12"],["formControlName","description",1,"form-control"],[1,"mt-2","col-md-12"],["class","btn btn-success btn-sm me-2","cdkFocusInitial","",3,"click",4,"hasClaim"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"value"],[1,"country-item",3,"ngStyle"],[3,"ngStyle"],["formArrayName","documentMetaTags",1,""],[3,"formGroupName"],[1,"form-group","col-md","mb-1","col"],["formControlName","metatag","type","text",1,"form-control",3,"change"],[1,"form-group","col-md-auto","col-auto","ps-1"],["class","btn btn-outline-success","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],["name","plus",1,"small-icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],["name","trash",1,"small-icon"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"span",1),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"app-page-help-text",2),t.k0s(),t.j41(5,"button",3),t.bIt("click",function(){return n.onDocumentCancel()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-dialog-content")(9,"form",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"label"),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.nrm(16,"input",9),t.DNE(17,Nt,2,1,"div",10),t.k0s()(),t.j41(18,"div",7)(19,"div",8)(20,"mat-label"),t.EFF(21),t.nI1(22,"translate"),t.k0s(),t.j41(23,"mat-select",11)(24,"mat-option"),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.DNE(27,st,4,6,"mat-option",12),t.k0s(),t.DNE(28,Et,2,1,"div",10),t.k0s()(),t.j41(29,"div",13)(30,"div",8)(31,"label"),t.EFF(32),t.nI1(33,"translate"),t.k0s(),t.j41(34,"mat-select",14)(35,"mat-option"),t.EFF(36),t.nI1(37,"translate"),t.k0s(),t.DNE(38,ft,3,5,"mat-option",12),t.k0s()()(),t.j41(39,"div",7),t.DNE(40,Gt,9,4,"div",15),t.k0s(),t.j41(41,"div",16)(42,"div",8)(43,"label"),t.EFF(44),t.nI1(45,"translate"),t.k0s(),t.j41(46,"textarea",17),t.EFF(47,"        "),t.k0s()()(),t.j41(48,"div",18),t.DNE(49,Ct,4,3,"button",19),t.j41(50,"button",20),t.bIt("click",function(){return n.onDocumentCancel()}),t.nrm(51,"i-feather",21),t.EFF(52),t.nI1(53,"translate"),t.k0s()()()()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,15,"MANAGE_DOCUMENT")," "),t.R7$(7),t.Y8G("formGroup",n.documentForm),t.R7$(5),t.JRh(t.bMT(15,17,"NAME")),t.R7$(3),t.Y8G("ngIf",n.documentForm.get("name").touched&&n.documentForm.get("name").errors),t.R7$(4),t.JRh(t.bMT(22,19,"CATEGORY")),t.R7$(4),t.SpI("-- ",t.bMT(26,21,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.allCategories),t.R7$(),t.Y8G("ngIf",n.documentForm.get("categoryId").touched&&n.documentForm.get("categoryId").errors),t.R7$(4),t.JRh(t.bMT(33,23,"DOCUMENT_STATUS")),t.R7$(4),t.SpI("-- ",t.bMT(37,25,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.documentStatuses),t.R7$(2),t.Y8G("ngForOf",n.documentMetaTagsArray.controls),t.R7$(4),t.JRh(t.bMT(45,27,"DESCRIPTION")),t.R7$(5),t.Y8G("hasClaim","all_documents_edit_document"),t.R7$(3),t.JRh(t.bMT(53,29,"CANCEL")))},dependencies:[k.Sq,k.bT,k.B3,v.qT,v.me,v.BC,v.cb,v.j4,v.JD,v.$R,v.v8,F.BI,F.Yi,bt.nJ,nt.VO,ht.wT,U.An,O.iY,J.i,Y.J,X.X,H.D9]})}return i})();var St=u(4184),Ft=u(8359),Vt=u(2812),at=u(5084),pt=u(2765),g=u(6471);function $(i,s){if(1&i&&(t.j41(0,"mat-chip",25),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.JRh(e.name)}}function r(i,s){if(1&i&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.E5c(" ",e.firstName," ",e.lastName," (",e.userName,") ")}}function h(i,s){if(1&i&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function l(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_IS_REQURED")," "))}function C(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"END_DATE_IS_REQURED")," "))}function R(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",27)(1,"div",28)(2,"mat-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",29),t.nrm(6,"input",30),t.j41(7,"div",31)(8,"button",32),t.bIt("click",function(){t.eBV(e);const n=t.sdS(11);return t.Njj(n.open())}),t.nrm(9,"i-feather",33),t.k0s()(),t.nrm(10,"mat-datepicker",null,0),t.k0s(),t.DNE(12,l,3,3,"mat-error",34),t.k0s(),t.j41(13,"div",28)(14,"mat-label"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"div",29),t.nrm(18,"input",35),t.j41(19,"div",31)(20,"button",32),t.bIt("click",function(){t.eBV(e);const n=t.sdS(23);return t.Njj(n.open())}),t.nrm(21,"i-feather",33),t.k0s()(),t.nrm(22,"mat-datepicker",null,1),t.k0s(),t.DNE(24,C,3,3,"mat-error",34),t.k0s()()}if(2&i){let e,a;const n=t.sdS(11),c=t.sdS(23),T=t.XpG();t.R7$(3),t.JRh(t.bMT(4,8,"CHOOSE_A_START_DATE")),t.R7$(3),t.Y8G("min",T.minDate)("matDatepicker",n),t.R7$(6),t.Y8G("ngIf",T.permissionForm.get("startDate").touched&&(null==(e=T.permissionForm.get("startDate").errors)?null:e.required)),t.R7$(3),t.JRh(t.bMT(16,10,"CHOOSE_A_END_DATE")),t.R7$(3),t.Y8G("min",T.permissionForm.get("startDate").value)("matDatepicker",c),t.R7$(6),t.Y8G("ngIf",T.permissionForm.get("startDate").touched&&(null==(a=T.permissionForm.get("endDate").errors)?null:a.required))}}function ot(i,s){1&i&&(t.j41(0,"div",36),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PLEASE_CONFIGURE_EMAIL_SMTP_SETTINGS")," "))}let Q=(()=>{class i extends V.${documentPermissionService;toastrService;commonService;data;dialogRef;fb;translationService;documentPermissions=[];documents;users=[];roles=[];permissionForm;subscriptions=new Ft.yU;smtpConfigured=!1;minDate=new Date;constructor(e,a,n,c,T,I,L){super(),this.documentPermissionService=e,this.toastrService=a,this.commonService=n,this.data=c,this.dialogRef=T,this.fb=I,this.translationService=L}ngOnInit(){this.documents=this.data,this.getUsers(),this.getRoles(),this.createFormGroup(),this.subscriptions.add(this.commonService.IsSmtpConfigured.subscribe(e=>{null!=e?this.smtpConfigured=e:this.checkEmailSMTPSettings()}))}createFormGroup(){this.permissionForm=this.fb.group({roles:[],users:[],isTimeBound:[!1],startDate:[],endDate:[],isAllowDownload:[!1],isAllowEmailNotification:[!1]})}timeBoundChange(e){e.checked?(this.permissionForm.get("startDate").setValidators([v.k0.required]),this.permissionForm.get("endDate").setValidators([v.k0.required]),this.permissionForm.updateValueAndValidity()):(this.permissionForm.get("startDate").clearValidators(),this.permissionForm.get("endDate").clearValidators(),this.permissionForm.updateValueAndValidity())}buildObject(){return{roles:this.permissionForm.get("roles").value,users:this.permissionForm.get("users").value,isTimeBound:this.permissionForm.get("isTimeBound").value,startDate:this.permissionForm.get("startDate").value,endDate:this.permissionForm.get("endDate").value,isAllowDownload:this.permissionForm.get("isAllowDownload").value,documents:this.documents.map(a=>a.id),isAllowEmailNotification:this.permissionForm.get("isAllowEmailNotification").value}}saveDocumentUserPermission(){if(!this.permissionForm.valid)return void this.permissionForm.markAllAsTouched();const e=this.buildObject();e.roles||e.users?this.sub$.sink=this.documentPermissionService.multipleDocumentsToUsersAndRoles(e).subscribe(a=>{this.toastrService.success(this.translationService.getValue("DOCUMENTS_PERMISSION_ASSIGN_TO_USERS_AND_ROLES")),this.dialogRef.close()}):this.toastrService.error(this.translationService.getValue("PLEASE_SELECT_EITHER_ROLES_OR_USERS"))}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>this.users=e)}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(e=>this.roles=e)}closeDialog(){this.dialogRef.close()}checkEmailSMTPSettings(){this.sub$.sink=this.commonService.checkEmailSMTPSetting().subscribe({next:e=>{},error:e=>{this.toastrService.error(this.translationService.getValue("SMTP_SETTINGS_ERROR"))}})}static \u0275fac=function(a){return new(a||i)(t.rXU(Vt._),t.rXU(tt.tw),t.rXU(et.h),t.rXU(F.Vh),t.rXU(F.CP),t.rXU(v.ze),t.rXU(it.L))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-permission-multiple"]],features:[t.Vt3],decls:53,vars:33,consts:[["startDatePicker",""],["endDatePicker",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[1,"row"],[1,"col-sm-12"],["color","primary",4,"ngFor","ngForOf"],[1,"row","mt-2",3,"formGroup"],[1,"col-md-6"],["color","primary","formControlName","users","multiple","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["color","primary","formControlName","roles","multiple","",1,"form-control"],[1,"col-md-12","mt-1"],["color","primary","formControlName","isTimeBound",3,"change"],["class","col-md-12 row",4,"ngIf"],[1,"col-md-12"],["color","primary","formControlName","isAllowDownload"],["color","primary","formControlName","isAllowEmailNotification"],["class","alert alert-warning mt-2",4,"ngIf"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],["color","primary"],[3,"value"],[1,"col-md-12","row"],[1,"form-group","col-md-3"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"min","matDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],[4,"ngIf"],["formControlName","endDate",1,"form-control",3,"min","matDatepicker"],[1,"alert","alert-warning","mt-2"]],template:function(a,n){1&a&&(t.j41(0,"div",2)(1,"h2",3),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",4),t.bIt("click",function(){return n.closeDialog()}),t.j41(5,"mat-icon",5),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"mat-dialog-content")(8,"div",6)(9,"div",7)(10,"h5"),t.EFF(11),t.nI1(12,"translate"),t.k0s()()(),t.j41(13,"div",6)(14,"div",7)(15,"mat-chip-set"),t.DNE(16,$,2,1,"mat-chip",8),t.k0s()()(),t.j41(17,"form",9)(18,"div",10)(19,"mat-label"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"mat-select",11),t.DNE(23,r,2,4,"mat-option",12),t.k0s()(),t.j41(24,"div",10)(25,"mat-label"),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"mat-select",13),t.DNE(29,h,2,2,"mat-option",12),t.k0s()(),t.j41(30,"div",14)(31,"mat-checkbox",15),t.bIt("change",function(T){return n.timeBoundChange(T)}),t.EFF(32),t.nI1(33,"translate"),t.k0s()(),t.DNE(34,R,25,12,"div",16),t.j41(35,"div",17)(36,"mat-checkbox",18),t.EFF(37),t.nI1(38,"translate"),t.k0s()(),t.j41(39,"div",17)(40,"mat-checkbox",19),t.EFF(41),t.nI1(42,"translate"),t.k0s()(),t.DNE(43,ot,3,3,"div",20),t.j41(44,"div",17)(45,"button",21),t.bIt("click",function(){return n.saveDocumentUserPermission()}),t.nrm(46,"i-feather",22),t.EFF(47),t.nI1(48,"translate"),t.k0s(),t.j41(49,"button",23),t.bIt("click",function(){return n.closeDialog()}),t.nrm(50,"i-feather",24),t.EFF(51),t.nI1(52,"translate"),t.k0s()()()()),2&a&&(t.R7$(2),t.JRh(t.bMT(3,15,"SHARE_DOCUMENTS")),t.R7$(9),t.SpI(" ",t.bMT(12,17,"SELECTED_DOCUMENTS"),""),t.R7$(5),t.Y8G("ngForOf",n.documents),t.R7$(),t.Y8G("formGroup",n.permissionForm),t.R7$(3),t.JRh(t.bMT(21,19,"USERS")),t.R7$(3),t.Y8G("ngForOf",n.users),t.R7$(3),t.JRh(t.bMT(27,21,"ROLES")),t.R7$(3),t.Y8G("ngForOf",n.roles),t.R7$(3),t.SpI(" ",t.bMT(33,23,"SPACIFY_THE_PERIOD")," "),t.R7$(2),t.Y8G("ngIf",n.permissionForm.get("isTimeBound").value),t.R7$(3),t.JRh(t.bMT(38,25,"ALLOW_DOWNLOAD")),t.R7$(4),t.JRh(t.bMT(42,27,"IS_ALLOW_NOTIFICATION")),t.R7$(2),t.Y8G("ngIf",n.permissionForm.get("isAllowEmailNotification").value&&!n.smtpConfigured),t.R7$(4),t.SpI(" ",t.bMT(48,29,"SAVE")," "),t.R7$(4),t.SpI(" ",t.bMT(52,31,"CANCEL"),""))},dependencies:[v.qT,v.me,v.BC,v.cb,v.j4,v.JD,k.Sq,k.bT,F.BI,F.Yi,bt.nJ,bt.TL,nt.VO,ht.wT,at.Vh,at.bZ,pt.So,g.Jl,g.Jo,O.iY,U.An,X.X,H.D9]})}return i})();var ct=u(3724),xt=u(1063),Dt=u(7113),Ot=u(5817),Bt=u(6642),Mt=u(5951),It=u(2356);function Ut(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"SUBJECT_IS_REQUIRED")," "))}function Yt(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Ut,3,3,"div",33),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("subject").errors)?null:e.required)}}function Xt(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"MESSAGE_IS_REQUIRED")," "))}function Ht(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Xt,3,3,"div",33),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("message").errors)?null:e.required)}}function Qt(i,s){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Lme(" ",e.selectedUsers[0].firstName," ",e.selectedUsers[0].lastName," ")}}function Wt(i,s){if(1&i&&(t.j41(0,"span",35),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Lme(" (+",e.selectedUsers.length-1," ",2===e.selectedUsers.length?"other":"others",") ")}}function _(i,s){if(1&i&&(t.j41(0,"mat-option",36),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.Lme("",e.firstName," ",e.lastName,"")}}function b(i,s){if(1&i&&(t.j41(0,"option",36),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",null==e?null:e.id),t.R7$(),t.SpI(" ",t.bMT(2,2,null==e?null:e.name.toUpperCase())," ")}}function p(i,s){1&i&&(t.j41(0,"div")(1,"div",34),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"FREQUENCY_IS_REQUIRED")," "))}function d(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",10)(1,"div",37)(2,"label",38),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"select",39),t.bIt("change",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onFrequencyChange())}),t.j41(6,"option",40),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.DNE(9,b,3,4,"option",26),t.k0s(),t.DNE(10,p,4,3,"div",16),t.k0s()()}if(2&i){let e;const a=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,4,"FREQUENCY"),""),t.R7$(4),t.JRh(t.bMT(8,6,"NONE")),t.R7$(2),t.Y8G("ngForOf",a.reminderFrequencies),t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("frequency").errors)?null:e.required)}}function m(i,s){if(1&i&&(t.j41(0,"div",47),t.qex(1,48),t.j41(2,"mat-checkbox",49),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.bVm(),t.k0s()),2&i){const e=s.$implicit,a=s.index;t.R7$(),t.Y8G("formGroupName",a),t.R7$(2),t.SpI(" ",t.bMT(4,2,e.controls.name.value.toUpperCase())," ")}}function f(i,s){if(1&i&&(t.j41(0,"div",43)(1,"label",44),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",45),t.DNE(5,m,5,4,"div",46),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,2,"WEEK_DAYS")),t.R7$(3),t.Y8G("ngForOf",e.dailyRemindersArray.controls)}}function D(i,s){if(1&i&&(t.j41(0,"mat-radio-button",54),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",t.bMT(2,2,e.name)," ")}}function y(i,s){if(1&i&&(t.j41(0,"div",43)(1,"label",50),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",51)(5,"mat-radio-group",52),t.DNE(6,D,3,4,"mat-radio-button",53),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,2,"WEEK_DAYS")),t.R7$(4),t.Y8G("ngForOf",e.dayOfWeek)}}function N(i,s){if(1&i&&(t.j41(0,"option",36),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",t.bMT(2,2,e.name)," ")}}function ut(i,s){if(1&i&&(t.j41(0,"option",36),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function zt(i,s){1&i&&(t.j41(0,"div")(1,"div",34),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function qt(i,s){if(1&i){const e=t.RV6();t.j41(0,"tr"),t.qex(1,48),t.j41(2,"td"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"td")(6,"select",60),t.bIt("change",function(){const n=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.onDateChange(n))}),t.DNE(7,N,3,4,"option",26),t.k0s()(),t.j41(8,"td")(9,"select",61),t.bIt("change",function(){const n=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.onDateChange(n))}),t.DNE(10,ut,2,2,"option",26),t.k0s(),t.DNE(11,zt,4,3,"div",16),t.k0s(),t.bVm(),t.k0s()}if(2&i){const e=s.$implicit,a=s.index,n=t.XpG(3);t.R7$(),t.Y8G("formGroupName",a),t.R7$(2),t.SpI(" ",t.bMT(4,5,e.controls.name.value)," "),t.R7$(4),t.Y8G("ngForOf",e.controls.monthValues.value),t.R7$(3),t.Y8G("ngForOf",n.days),t.R7$(),t.Y8G("ngIf",e.get("day").touched&&e.hasError("invalidDate"))}}function De(i,s){if(1&i&&(t.j41(0,"div",43)(1,"label",55),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",56)(5,"table",57)(6,"thead")(7,"tr"),t.nrm(8,"th"),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody",58),t.DNE(16,qt,12,7,"tr",59),t.k0s()()()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,4,"SELECT_QUARTER_DATE")),t.R7$(8),t.JRh(t.bMT(11,6,"SELECT_REMINDER_MONTH")),t.R7$(3),t.JRh(t.bMT(14,8,"SELECT_REMINDER_DAY")),t.R7$(3),t.Y8G("ngForOf",e.quarterlyRemindersArray.controls)}}function Te(i,s){if(1&i&&(t.j41(0,"option",36),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",t.bMT(2,2,e.name)," ")}}function Re(i,s){if(1&i&&(t.j41(0,"option",36),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function Ce(i,s){1&i&&(t.j41(0,"div")(1,"div",34),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"PLEASE_SELECT_VALID_DAY")," "))}function Ie(i,s){if(1&i){const e=t.RV6();t.j41(0,"tr"),t.qex(1,48),t.j41(2,"td"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"td")(6,"select",60),t.bIt("change",function(){const n=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.onDateChange(n))}),t.DNE(7,Te,3,4,"option",26),t.k0s()(),t.j41(8,"td")(9,"select",61),t.bIt("change",function(){const n=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.onDateChange(n))}),t.DNE(10,Re,2,2,"option",26),t.k0s(),t.DNE(11,Ce,4,3,"div",16),t.k0s(),t.bVm(),t.k0s()}if(2&i){const e=s.$implicit,a=s.index,n=t.XpG(3);t.R7$(),t.Y8G("formGroupName",a),t.R7$(2),t.SpI(" ",t.bMT(4,5,e.controls.name.value)," "),t.R7$(4),t.Y8G("ngForOf",e.controls.monthValues.value),t.R7$(3),t.Y8G("ngForOf",n.days),t.R7$(),t.Y8G("ngIf",e.get("day").touched&&e.hasError("invalidDate"))}}function Ee(i,s){if(1&i&&(t.j41(0,"div",43)(1,"label",62),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",63)(5,"table",57)(6,"thead")(7,"tr"),t.nrm(8,"th"),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody",64),t.DNE(16,Ie,12,7,"tr",59),t.k0s()()()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,4,"SELECT_DATE")),t.R7$(8),t.JRh(t.bMT(11,6,"SELECT_REMINDER_MONTH")),t.R7$(3),t.JRh(t.bMT(14,8,"SELECT_REMINDER_DAY")),t.R7$(3),t.Y8G("ngForOf",e.halfYearlyRemindersArray.controls)}}function ke(i,s){if(1&i&&(t.j41(0,"div",10)(1,"div",41),t.DNE(2,f,6,4,"div",42)(3,y,7,4,"div",42)(4,De,17,10,"div",42)(5,Ee,17,10,"div",42),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngIf","0"==e.reminderForm.get("frequency").value),t.R7$(),t.Y8G("ngIf","1"==e.reminderForm.get("frequency").value),t.R7$(),t.Y8G("ngIf","3"==e.reminderForm.get("frequency").value),t.R7$(),t.Y8G("ngIf","4"==e.reminderForm.get("frequency").value)}}function ye(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DATE_IS_REQUIRED")," "))}function Se(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,ye,3,3,"div",33),t.k0s()),2&i){let e;const a=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("startDate").errors)?null:e.required)}}function Fe(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function xe(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Fe,3,3,"div",33),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",e.reminderForm.get("startDate").errors)}}function Me(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TIME_IS_REQUIRED")," "))}function we(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Me,3,3,"div",33),t.k0s()),2&i){let e;const a=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("startTime"))||null==e.errors?null:e.errors.required)}}function je(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",10)(1,"div",65)(2,"label",38),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",66),t.nrm(6,"input",67,0),t.nI1(8,"translate"),t.j41(9,"div",68)(10,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.sdS(13);return t.Njj(n.open())}),t.nrm(11,"i-feather",70),t.k0s()(),t.nrm(12,"mat-datepicker",null,1),t.k0s(),t.DNE(14,Se,2,1,"div",16)(15,xe,2,1,"div",16),t.k0s(),t.j41(16,"div",65)(17,"label",71),t.EFF(18),t.nI1(19,"translate"),t.k0s(),t.j41(20,"div",66),t.nrm(21,"input",72),t.j41(22,"div",68)(23,"button",73),t.bIt("click",function(){t.eBV(e);const n=t.sdS(26);return t.Njj(n.open())}),t.nrm(24,"i-feather",74),t.k0s()(),t.nrm(25,"ngx-material-timepicker",null,2),t.k0s(),t.DNE(27,we,2,1,"div",16),t.k0s()()}if(2&i){let e,a;const n=t.sdS(13),c=t.sdS(26),T=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,10,"REMINDER_START_DATE"),""),t.R7$(3),t.FS9("placeholder",t.bMT(8,12,"REMINDER_DATE")),t.Y8G("matDatepicker",n),t.R7$(8),t.Y8G("ngIf",T.reminderForm.get("startDate").touched&&T.reminderForm.get("startDate").errors),t.R7$(),t.Y8G("ngIf",T.reminderForm.get("startDate").touched&&(null==(e=T.reminderForm.get("startDate").errors)?null:e.owlDateTimeMin)),t.R7$(3),t.JRh(t.bMT(19,14,"REMINDER_TIME")),t.R7$(3),t.Y8G("format",24)("ngxTimepicker",c)("disableClick",!0),t.R7$(6),t.Y8G("ngIf",(null==(a=T.reminderForm.get("startTime"))?null:a.touched)&&(null==(a=T.reminderForm.get("startTime"))?null:a.errors))}}function Ne(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_IS_REQUIRED")," "))}function Ae(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_SHOULD_BE_GREATER_THEN_CURRENT_DATE_TIME")," "))}function $e(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Ne,3,3,"div",33)(2,Ae,3,3,"div",33),t.k0s()),2&i){let e,a;const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(e=n.reminderForm.get("startDate").errors)?null:e.required),t.R7$(),t.Y8G("ngIf",null==(a=n.reminderForm.get("startDate").errors)?null:a.owlDateTimeMin)}}function Pe(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TIME_IS_REQUIRED")," "))}function Ge(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Pe,3,3,"div",33),t.k0s()),2&i){let e;const a=t.XpG(2);t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("startTime"))||null==e.errors?null:e.errors.required)}}function Le(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",65)(1,"label",78),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",66),t.nrm(5,"input",79,0),t.nI1(7,"translate"),t.j41(8,"div",68)(9,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.sdS(12);return t.Njj(n.open())}),t.nrm(10,"i-feather",70),t.k0s()(),t.nrm(11,"mat-datepicker",null,3),t.k0s()()}if(2&i){const e=t.sdS(12);t.R7$(2),t.JRh(t.bMT(3,3,"REMINDER_END_DATE")),t.R7$(3),t.FS9("placeholder",t.bMT(7,5,"REMINDER_DATE")),t.Y8G("matDatepicker",e)}}function Ve(i,s){1&i&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ENDTIME_IS_REQUIRED")," "))}function Oe(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Ve,3,3,"div",33),t.k0s()),2&i){let e;const a=t.XpG(3);t.R7$(),t.Y8G("ngIf",null==(e=a.reminderForm.get("endTime"))||null==e.errors?null:e.errors.required)}}function Be(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",65)(1,"label",80),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",66),t.nrm(5,"input",81),t.j41(6,"div",68)(7,"button",76),t.bIt("click",function(){t.eBV(e);const n=t.sdS(10);return t.Njj(n.open())}),t.nrm(8,"i-feather",74),t.k0s()()(),t.nrm(9,"ngx-material-timepicker",null,4),t.DNE(11,Oe,2,1,"div",16),t.k0s()}if(2&i){let e;const a=t.sdS(10),n=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,6,"REMINDER_END_TIME")),t.R7$(3),t.Y8G("format",24)("ngxTimepicker",a)("disableClick",!0),t.R7$(2),t.Y8G("for",a),t.R7$(4),t.Y8G("ngIf",(null==(e=n.reminderForm.get("endTime"))?null:e.hasError("required"))&&(null==(e=n.reminderForm.get("endDate"))?null:e.touched))}}function Ue(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",10)(1,"div",65)(2,"label",75),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"div",66),t.nrm(6,"input",67,0),t.nI1(8,"translate"),t.j41(9,"div",68)(10,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.sdS(13);return t.Njj(n.open())}),t.nrm(11,"i-feather",70),t.k0s()(),t.nrm(12,"mat-datepicker",null,1),t.k0s(),t.DNE(14,$e,3,2,"div",16),t.k0s(),t.j41(15,"div",65)(16,"label",71),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"div",66),t.nrm(20,"input",72),t.j41(21,"div",68)(22,"button",76),t.bIt("click",function(){t.eBV(e);const n=t.sdS(25);return t.Njj(n.open())}),t.nrm(23,"i-feather",74),t.k0s()(),t.nrm(24,"ngx-material-timepicker",null,2),t.k0s(),t.DNE(26,Ge,2,1,"div",16),t.k0s(),t.DNE(27,Le,13,7,"div",77)(28,Be,12,8,"div",77),t.k0s()}if(2&i){let e;const a=t.sdS(13),n=t.sdS(25),c=t.XpG();t.R7$(3),t.SpI("",t.bMT(4,12,"REMINDER_START_DATE")," "),t.R7$(3),t.FS9("placeholder",t.bMT(8,14,"REMINDER_DATE")),t.Y8G("matDatepicker",a),t.R7$(8),t.Y8G("ngIf",c.reminderForm.get("startDate").touched&&c.reminderForm.get("startDate").errors),t.R7$(3),t.SpI("",t.bMT(18,16,"REMINDER_TIME")," "),t.R7$(3),t.Y8G("format",24)("ngxTimepicker",n)("disableClick",!0),t.R7$(2),t.Y8G("for",n),t.R7$(4),t.Y8G("ngIf",(null==(e=c.reminderForm.get("startTime"))?null:e.touched)&&(null==(e=c.reminderForm.get("startTime"))?null:e.errors)),t.R7$(),t.Y8G("ngIf",c.reminderForm.get("isRepeated").value),t.R7$(),t.Y8G("ngIf",c.reminderForm.get("isRepeated").value)}}function Ye(i,s){1&i&&(t.j41(0,"div",82)(1,"div",83)(2,"span",84),t.EFF(3,"Loading..."),t.k0s()()())}let oe=(()=>{class i extends V.${fb;reminderService;commonService;toastrService;data;dialogRef;translationService;reminderFrequencies=[];reminderForm;minDate=new Date;users=[];selectedUsers=[];reminder;isLoading=!1;dayOfWeek=Ot.v;months=Ot.$;days=[];get dailyRemindersArray(){return this.reminderForm.get("dailyReminders")}get quarterlyRemindersArray(){return this.reminderForm.get("quarterlyReminders")}get halfYearlyRemindersArray(){return this.reminderForm.get("halfYearlyReminders")}constructor(e,a,n,c,T,I,L){super(),this.fb=e,this.reminderService=a,this.commonService=n,this.toastrService=c,this.data=T,this.dialogRef=I,this.translationService=L}ngOnInit(){for(let e=1;e<=31;e++)this.days.push(e);this.getReminderFrequency(),this.createReminderForm(),this.getUsers()}closeDialog(){this.dialogRef.close()}getReminderFrequency(){this.sub$.sink=this.commonService.getReminderFrequency().subscribe(e=>this.reminderFrequencies=[...e])}createReminderForm(){this.reminderForm=this.fb.group({id:[""],subject:["",[v.k0.required]],message:["",[v.k0.required]],frequency:[""],isRepeated:[!1],isEmailNotification:[!1],startDate:[new Date,[v.k0.required]],startTime:["12:00",[v.k0.required]],endDate:[null],endTime:[null],dayOfWeek:[2],documentId:[this.data.id]},{validators:this.dateAndTimeValidator})}dateAndTimeValidator(e){const a=e.get("endDate")?.value,n=e.get("endTime")?.value;return a&&!n?e.get("endTime")?.setErrors({required:!0}):e.get("endTime")?.setErrors(null),null}checkData(e){e.checked?this.reminderForm.get("frequency").setValidators([v.k0.required]):this.reminderForm.get("frequency").setValidators([]),this.reminderForm.get("frequency").updateValueAndValidity(),this.reminderForm.markAllAsTouched()}createReminder(){if(!this.reminderForm.valid)return void this.reminderForm.markAllAsTouched();let e=new Date(this.reminderForm.get("startDate").value),a=this.reminderForm.get("startTime").value;const[n,c]=a.split(":"),T=new Date(e.getFullYear(),e.getMonth(),e.getDate(),n,c);let L,I=this.reminderForm.get("endDate").value;if(I){I=new Date(I);let P=this.reminderForm.get("endTime").value;if(P&&"string"==typeof P&&P.includes(":")){let[ne,ae]=P.split(":").map(Number);L=new Date(I.getFullYear(),I.getMonth(),I.getDate(),ne,ae)}}let w=this.reminderForm.value;w.startDate=T,w.endDate=L,w.reminderUsers=this.selectedUsers.map(P=>({reminderId:w.id,userId:P.id})),w.isRepeated||(w.dailyReminders=[],w.quarterlyReminders=[],w.halfYearlyReminders=[]),this.reminder?(w.dailyReminders&&(w.dailyReminders=w.dailyReminders.map(P=>(P.reminderId=this.reminder.id,P))),w.quarterlyReminders&&(w.quarterlyReminders=w.quarterlyReminders.map(P=>(P.reminderId=this.reminder.id,P))),w.halfYearlyReminders&&(w.halfYearlyReminders=w.halfYearlyReminders.map(P=>(P.reminderId=this.reminder.id,P))),this.isLoading=!0,this.sub$.sink=this.reminderService.updateReminder(w).subscribe(P=>{this.toastrService.success(this.translationService.getValue("REMINDER_UPDATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},()=>this.isLoading=!1)):(this.isLoading=!0,this.sub$.sink=this.reminderService.addReminder(w).subscribe({next:P=>{this.toastrService.success(this.translationService.getValue("REMINDER_CREATED_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},error:()=>{this.isLoading=!1}}))}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>{if(this.users=e,this.reminder){const a=this.reminder.reminderUsers.map(n=>n.userId);this.selectedUsers=this.users.filter(n=>a.indexOf(n.id)>=0)}})}onFrequencyChange(){let e=this.reminderForm.get("frequency").value;e=0==e?"0":e,e==xt.j.Daily.toString()?(this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.addDailReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==xt.j.Weekly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(2)):e==xt.j.Quarterly.toString()?(this.removeDailReminders(),this.removeHalfYearlyReminders(),this.addQuarterlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):e==xt.j.HalfYearly.toString()?(this.removeDailReminders(),this.removeQuarterlyReminders(),this.addHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue("")):(this.removeDailReminders(),this.removeQuarterlyReminders(),this.removeHalfYearlyReminders(),this.reminderForm.get("dayOfWeek").setValue(""))}addDailReminders(){if(!this.reminderForm.contains("dailyReminders")){var e=this.fb.array([]);e.push(this.createDailyReminderFormGroup(ct.o.Sunday)),e.push(this.createDailyReminderFormGroup(ct.o.Monday)),e.push(this.createDailyReminderFormGroup(ct.o.Tuesday)),e.push(this.createDailyReminderFormGroup(ct.o.Wednesday)),e.push(this.createDailyReminderFormGroup(ct.o.Thursday)),e.push(this.createDailyReminderFormGroup(ct.o.Friday)),e.push(this.createDailyReminderFormGroup(ct.o.Saturday)),this.reminderForm.addControl("dailyReminders",e)}}addQuarterlyReminders(){if(!this.reminderForm.contains("quarterlyReminders")){var e=this.fb.array([]),a=this.months.filter(I=>[1,2,3].indexOf(I.id)>=0),n=this.months.filter(I=>[4,5,6].indexOf(I.id)>=0),c=this.months.filter(I=>[7,8,9].indexOf(I.id)>=0),T=this.months.filter(I=>[10,11,12].indexOf(I.id)>=0);e.push(this.createQuarterlyReminderFormGroup(Dt.r.Quarter1,"JAN_MAR",a)),e.push(this.createQuarterlyReminderFormGroup(Dt.r.Quarter2,"APR_JUN",n)),e.push(this.createQuarterlyReminderFormGroup(Dt.r.Quarter3,"JUL_SEPT",c)),e.push(this.createQuarterlyReminderFormGroup(Dt.r.Quarter4,"OCT_DEC",T)),this.reminderForm.addControl("quarterlyReminders",e)}}addHalfYearlyReminders(){if(!this.reminderForm.contains("halfYearlyReminders")){var e=this.fb.array([]),a=this.months.filter(c=>[1,2,3,4,5,6].indexOf(c.id)>=0),n=this.months.filter(c=>[7,8,9,10,11,12].indexOf(c.id)>=0);e.push(this.createHalfYearlyReminderFormGroup(Dt.r.Quarter1,"JAN_JUN",a)),e.push(this.createHalfYearlyReminderFormGroup(Dt.r.Quarter2,"JUL_DEC",n)),this.reminderForm.addControl("halfYearlyReminders",e)}}removeDailReminders(){this.reminderForm.contains("dailyReminders")&&this.reminderForm.removeControl("dailyReminders")}removeQuarterlyReminders(){this.reminderForm.contains("quarterlyReminders")&&this.reminderForm.removeControl("quarterlyReminders")}removeHalfYearlyReminders(){this.reminderForm.contains("halfYearlyReminders")&&this.reminderForm.removeControl("halfYearlyReminders")}createDailyReminderFormGroup(e){return this.fb.group({id:[""],reminderId:[""],dayOfWeek:[e],isActive:[!0],name:[ct.o[e]]})}createQuarterlyReminderFormGroup(e,a,n){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[n[0].id],name:[a],monthValues:[n]})}createHalfYearlyReminderFormGroup(e,a,n){return this.fb.group({id:[""],reminderId:[""],quarter:[e],day:[this.getCurrentDay()],month:[n[0].id],name:[a],monthValues:[n]})}getCurrentDay(){return(new Date).getDate()}onDateChange(e){const a=e.get("day").value,n=e.get("month").value;a>new Date((new Date).getFullYear(),Number.parseInt(n),0).getDate()&&(e.setErrors({invalidDate:"Invalid Date"}),e.markAllAsTouched())}onCancel(){this.dialogRef.close()}static \u0275fac=function(a){return new(a||i)(t.rXU(v.ze),t.rXU(Bt.s),t.rXU(et.h),t.rXU(tt.tw),t.rXU(F.Vh),t.rXU(F.CP),t.rXU(it.L))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-reminder"]],features:[t.Vt3],decls:57,vars:37,consts:[["ref",""],["startDatePicker",""],["toggleIcon",""],["endDatePicker",""],["endTimeToggleIcon",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],[3,"code"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"form-group","col-md-12"],["for","subject"],["formControlName","subject","type","text","id","subject",1,"form-control"],[4,"ngIf"],["for","message"],["formControlName","message","id","message","cols","30",1,"form-control"],[1,"row","mt-3"],[1,"col-md-2"],["color","primary","formControlName","isRepeated",3,"change"],["color","primary","formControlName","isEmailNotification"],[1,"col-md-4"],["multiple","",1,"form-control",3,"valueChange","placeholder","value"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"mt-2","col-md-12"],["type","submit",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["class","spinner-container",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"example-additional-selection"],[3,"value"],[1,"form-group","col-md-6"],["for","frequency"],["formControlName","frequency","id","frequency",1,"form-control",3,"change"],["value",""],[1,"col-md-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","weekDays"],["id","weekDays",1,"row"],["class","col-sm-auto mr-1","formArrayName","dailyReminders",4,"ngFor","ngForOf"],["formArrayName","dailyReminders",1,"col-sm-auto","mr-1"],[3,"formGroupName"],["color","primary","formControlName","isActive",1,"mr-1"],["for","weekDay"],["id","weekDay"],["formControlName","dayOfWeek"],["class","mr-2","color","primary",3,"value",4,"ngFor","ngForOf"],["color","primary",1,"mr-2",3,"value"],["for","Quarterly"],["id","Quarterly",1,"row"],[1,"table"],["formArrayName","quarterlyReminders"],[4,"ngFor","ngForOf"],["formControlName","month",1,"form-control",3,"change"],["formControlName","day",1,"form-control",3,"change"],["for","HalfYearly"],["id","HalfYearly",1,"row"],["formArrayName","halfYearlyReminders"],[1,"form-group","col-md-3"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"matDatepicker","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],["for","startTime"],["formControlName","startTime","readonly","",1,"form-control","timepicker-input",3,"format","ngxTimepicker","disableClick"],["ngxMaterialTimepickerToggleIcon","","type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","clock",1,"small-icon"],["for","startDate"],["ngxMaterialTimepickerToggleIcon","","type","button",1,"btn","btn-primary","calendar-button",3,"click","for"],["class","form-group col-md-3",4,"ngIf"],["for","endDate"],["formControlName","endDate",1,"form-control",3,"matDatepicker","placeholder"],["for","endTime"],["formControlName","endTime","readonly","",1,"form-control","timepicker-input",3,"format","ngxTimepicker","disableClick"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(a,n){1&a&&(t.j41(0,"div",5)(1,"span",6),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"app-page-help-text",7),t.k0s(),t.j41(5,"button",8),t.bIt("click",function(){return n.closeDialog()}),t.j41(6,"mat-icon",9),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-dialog-content")(9,"div",10)(10,"div",11)(11,"form",12)(12,"div",10)(13,"div",13)(14,"label",14),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.nrm(17,"input",15),t.DNE(18,Yt,2,1,"div",16),t.k0s()(),t.j41(19,"div",10)(20,"div",13)(21,"label",17),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.nrm(24,"textarea",18),t.DNE(25,Ht,2,1,"div",16),t.k0s()(),t.j41(26,"div",19)(27,"div",20)(28,"mat-checkbox",21),t.bIt("change",function(T){return n.checkData(T)}),t.EFF(29),t.nI1(30,"translate"),t.k0s()(),t.j41(31,"div",20)(32,"mat-checkbox",22),t.EFF(33),t.nI1(34,"translate"),t.k0s()(),t.j41(35,"div",23)(36,"mat-select",24),t.nI1(37,"translate"),t.mxI("valueChange",function(T){return t.DH7(n.selectedUsers,T)||(n.selectedUsers=T),T}),t.j41(38,"mat-select-trigger"),t.DNE(39,Qt,2,2,"span",16)(40,Wt,2,2,"span",25),t.k0s(),t.DNE(41,_,2,3,"mat-option",26),t.k0s()()(),t.DNE(42,d,11,8,"div",27)(43,ke,6,4,"div",27),t.j41(44,"div",10),t.DNE(45,je,28,16,"div",27)(46,Ue,29,18,"div",27),t.k0s(),t.j41(47,"div",28)(48,"button",29),t.bIt("click",function(){return n.createReminder()}),t.nrm(49,"i-feather",30),t.EFF(50),t.nI1(51,"translate"),t.k0s(),t.j41(52,"button",31),t.bIt("click",function(){return n.onCancel()}),t.nrm(53,"i-feather",30),t.EFF(54),t.nI1(55,"translate"),t.k0s()()()()(),t.DNE(56,Ye,4,0,"div",32),t.k0s()),2&a&&(t.R7$(2),t.SpI(" ",t.bMT(3,21,"ADD_REMINDER")," "),t.R7$(2),t.Y8G("code","ADD_REMINDER"),t.R7$(7),t.Y8G("formGroup",n.reminderForm),t.R7$(4),t.SpI(" ",t.bMT(16,23,"SUBJECT"),""),t.R7$(3),t.Y8G("ngIf",n.reminderForm.get("subject").touched&&n.reminderForm.get("subject").errors),t.R7$(4),t.SpI(" ",t.bMT(23,25,"MESSAGE"),""),t.R7$(3),t.Y8G("ngIf",n.reminderForm.get("message").touched&&n.reminderForm.get("message").errors),t.R7$(4),t.SpI(" ",t.bMT(30,27,"REPEATE_REMINDER")," "),t.R7$(4),t.SpI("",t.bMT(34,29,"SEND_EMAIL")," "),t.R7$(3),t.FS9("placeholder",t.bMT(37,31,"SELECT_USERS")),t.R50("value",n.selectedUsers),t.R7$(3),t.Y8G("ngIf",n.selectedUsers.length>0),t.R7$(),t.Y8G("ngIf",n.selectedUsers.length>1),t.R7$(),t.Y8G("ngForOf",n.users),t.R7$(),t.Y8G("ngIf",n.reminderForm.get("isRepeated").value),t.R7$(),t.Y8G("ngIf",n.reminderForm.get("isRepeated").value),t.R7$(2),t.Y8G("ngIf",!n.reminderForm.get("isRepeated").value),t.R7$(),t.Y8G("ngIf",n.reminderForm.get("isRepeated").value),t.R7$(4),t.SpI(" ",t.bMT(51,33,"SAVE")," "),t.R7$(4),t.SpI(" ",t.bMT(55,35,"CANCEL")," "),t.R7$(2),t.Y8G("ngIf",n.isLoading))},dependencies:[k.Sq,k.bT,v.qT,v.xH,v.y7,v.me,v.wz,v.BC,v.cb,v.j4,v.JD,v.$R,v.v8,F.BI,F.Yi,nt.VO,nt.$2,ht.wT,at.Vh,at.bZ,U.An,O.iY,Y.J,pt.So,Mt.VT,Mt._g,X.X,It.zk,It.v2,It.m7,H.D9]})}return i})();var re=u(5312);function Xe(i,s){1&i&&(t.j41(0,"div",16),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_IS_REQUIRED")," "))}function He(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Xe,3,3,"div",15),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("url").errors)?null:e.required)}}function Qe(i,s){1&i&&(t.j41(0,"div",16),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOW")," "))}function We(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Qe,3,3,"div",15),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("extension").errors)?null:e.required)}}function ze(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveDocument())}),t.nrm(1,"i-feather",18),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"SAVE"),""))}let se=(()=>{class i extends V.${fb;data;httpClient;cd;dialogRef;documentService;toastrService;translationService;documentForm;fileData;constructor(e,a,n,c,T,I,L,w){super(),this.fb=e,this.data=a,this.httpClient=n,this.cd=c,this.dialogRef=T,this.documentService=I,this.toastrService=L,this.translationService=w}ngOnInit(){this.createDocumentForm()}createDocumentForm(){this.documentForm=this.fb.group({url:["",[v.k0.required]],extension:["",[v.k0.required]]})}upload(e){if(0===e.length)return;const a=e[0].name.split(".").pop();if(!this.fileExtesionValidation(a))return this.fileUploadExtensionValidation(""),void this.cd.markForCheck();this.fileUploadExtensionValidation("valid"),this.fileData=e[0],this.documentForm.get("url").setValue(e[0].name)}fileUploadValidation(e){this.documentForm.patchValue({url:e}),this.documentForm.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(e){this.documentForm.patchValue({extension:e}),this.documentForm.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(e){return!!re.c.allowExtesions.find(c=>c.extentions.find(T=>T.toLowerCase()===e.toLowerCase()))}SaveDocument(){if(this.documentForm.invalid)return void this.documentForm.markAllAsTouched();const e={documentId:this.data.id,url:this.documentForm.get("url").value,files:this.fileData};this.sub$.sink=this.documentService.saveNewVersionDocument(e).subscribe(a=>{this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),this.dialogRef.close(!0)})}closeDialog(){this.dialogRef.close()}static \u0275fac=function(a){return new(a||i)(t.rXU(v.ze),t.rXU(F.Vh),t.rXU(A.Qq),t.rXU(t.gRc),t.rXU(F.CP),t.rXU(dt.D),t.rXU(tt.tw),t.rXU(it.L))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-upload-new-version"]],features:[t.Vt3],decls:25,vars:13,consts:[["file",""],[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["code","UPLOAD_NEW_VERSION"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"formGroup"],[1,"col-md-12"],[1,"form-group"],["type","file",1,"form-control",3,"change"],[4,"ngIf"],[1,"mt-2","col-md-12"],["class","btn btn-success btn-sm me-2","cdkFocusInitial","",3,"click",4,"hasClaim"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"]],template:function(a,n){if(1&a){const c=t.RV6();t.j41(0,"div",1)(1,"span",2),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"app-page-help-text",3),t.k0s(),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(c),t.Njj(n.closeDialog())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-dialog-content")(9,"form",6)(10,"div",7)(11,"div",8)(12,"label"),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.j41(15,"input",9,0),t.bIt("change",function(){t.eBV(c);const I=t.sdS(16);return t.Njj(n.upload(I.files))}),t.k0s(),t.DNE(17,He,2,1,"div",10)(18,We,2,1,"div",10),t.k0s()(),t.j41(19,"div",11),t.DNE(20,ze,4,3,"button",12),t.j41(21,"button",13),t.bIt("click",function(){return t.eBV(c),t.Njj(n.closeDialog())}),t.nrm(22,"i-feather",14),t.EFF(23),t.nI1(24,"translate"),t.k0s()()()()}2&a&&(t.R7$(2),t.SpI("",t.bMT(3,7,"UPLOAD_NEW_VERSION_FILE")," "),t.R7$(7),t.Y8G("formGroup",n.documentForm),t.R7$(4),t.JRh(t.bMT(14,9,"DOCUMENT_UPLOAD")),t.R7$(4),t.Y8G("ngIf",(n.documentForm.get("url").touched||n.documentForm.get("url").dirty)&&n.documentForm.get("url").errors),t.R7$(),t.Y8G("ngIf",(n.documentForm.get("extension").touched||n.documentForm.get("extension").dirty)&&n.documentForm.get("url").errors),t.R7$(2),t.Y8G("hasClaim","all_documents_create_document"),t.R7$(3),t.SpI(" ",t.bMT(24,11,"CANCEL"),""))},dependencies:[k.bT,v.qT,v.cb,v.j4,F.BI,F.Yi,U.An,O.iY,J.i,Y.J,X.X,H.D9]})}return i})();var ce=u(6660),Je=u(3718),Ke=u.n(Je),le=u(9437),qe=u(7598);let Ze=(()=>{class i{httpClient;commonHttpErrorService;constructor(e,a){this.httpClient=e,this.commonHttpErrorService=a}sendEmail(e){return this.httpClient.post("Email",e).pipe((0,le.W)(this.commonHttpErrorService.handleError))}static \u0275fac=function(a){return new(a||i)(t.KVO(A.Qq),t.KVO(qe.T))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var de=u(7852);const ti=()=>["heading","|","bold","italic"],ei=i=>({toolbar:i});function ii(i,s){1&i&&(t.j41(0,"div",28),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PLEASE_CONFIGURE_EMAIL_SMTP_SETTINGS")," "))}function ni(i,s){1&i&&(t.j41(0,"div",30),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"TO_ADDRESS_IS_REQUIRED")," "))}function ai(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,ni,3,3,"div",29),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.emailForm.get("toAddress").errors)?null:e.required)}}function oi(i,s){1&i&&(t.j41(0,"div",30),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"EMAIL_IS_NOT_PROPER_FORMAT")," "))}function ri(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,oi,3,3,"div",29),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.emailForm.get("toAddress").errors)?null:e.email)}}function si(i,s){1&i&&(t.j41(0,"div",30),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"SUBJECT_IS_REQUIRED")," "))}function ci(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,si,3,3,"div",29),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.emailForm.get("subject").errors)?null:e.required)}}function li(i,s){1&i&&(t.j41(0,"div",30),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"BODY_IS_REQUIRED")," "))}function di(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,li,3,3,"div",29),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.emailForm.get("body").errors)?null:e.required)}}function mi(i,s){1&i&&(t.j41(0,"div",31)(1,"div",32)(2,"span",33),t.EFF(3,"Loading..."),t.k0s()()())}let me=(()=>{class i extends V.${fb;toastrService;emailSendService;data;dialogRef;commonService;translationService;emailForm;editor=Ke();subscriptions=new Ft.yU;isLoading=!1;smtpConfigured;constructor(e,a,n,c,T,I,L){super(),this.fb=e,this.toastrService=a,this.emailSendService=n,this.data=c,this.dialogRef=T,this.commonService=I,this.translationService=L}ngOnInit(){this.createEmailForm(),this.subscriptions.add(this.commonService.IsSmtpConfigured.subscribe(e=>{null!=e?this.smtpConfigured=e:this.checkEmailSMTPSettings()}))}checkEmailSMTPSettings(){this.sub$.sink=this.commonService.checkEmailSMTPSetting().subscribe({next:e=>{},error:e=>{this.toastrService.error(this.translationService.getValue("SMTP_SETTINGS_ERROR"))}})}closeDialog(){this.dialogRef.close()}createEmailForm(){this.emailForm=this.fb.group({id:[""],toAddress:["",[v.k0.required,v.k0.email]],subject:["",[v.k0.required]],body:["",[v.k0.required]],documentId:[this.data.id,[v.k0.required]]})}sendEmail(){this.emailForm.valid?(this.isLoading=!0,this.sub$.sink=this.emailSendService.sendEmail(this.buildObject()).subscribe({next:()=>{this.addDocumentTrail(),this.toastrService.success(this.translationService.getValue("EMAIL_SENT_SUCCESSFULLY")),this.dialogRef.close(),this.isLoading=!1},error:()=>{this.isLoading=!1}})):this.emailForm.markAllAsTouched()}buildObject(){return{documentId:this.emailForm.get("documentId").value,email:this.emailForm.get("toAddress").value,subject:this.emailForm.get("subject").value,message:this.emailForm.get("body").value}}addDocumentTrail(){const e={documentId:this.data.id,operationName:x.X.Send_Email.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(e).subscribe(a=>{})}static \u0275fac=function(a){return new(a||i)(t.rXU(v.ze),t.rXU(tt.tw),t.rXU(Ze),t.rXU(F.Vh),t.rXU(F.CP),t.rXU(et.h),t.rXU(it.L))};static \u0275cmp=t.VBU({type:i,selectors:[["app-send-email"]],features:[t.Vt3],decls:49,vars:38,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["code","SEND_EMAIL"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"formGroup"],["class","alert alert-warning mt-2",4,"ngIf"],[1,"row"],[1,"col-md-6","pb-1"],[1,"input-group"],["id","toAddress",1,"input-group-text"],["formControlName","toAddress","type","text","aria-label","To","aria-describedby","toAddress",1,"form-control",3,"placeholder"],[4,"ngIf"],["id","subject",1,"input-group-text"],["formControlName","subject","type","text","aria-label","To","aria-describedby","subject",1,"form-control",3,"placeholder"],[1,"col-md-12"],[1,"form-group"],[1,"font-weight-bold"],[1,"NgxEditor__Wrapper"],["formControlName","body",3,"editor","config"],[1,"col-md-12","pb-1"],[1,"input-group","mt-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"col-md-12","mt-1"],["type","submit",1,"btn","btn-success",3,"click","disabled"],["name","play",1,"small-icon"],["class","spinner-container",4,"ngIf"],[1,"alert","alert-warning","mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"span",1),t.EFF(2),t.nI1(3,"translate"),t.nrm(4,"app-page-help-text",2),t.k0s(),t.j41(5,"button",3),t.bIt("click",function(){return n.closeDialog()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-dialog-content")(9,"form",5),t.DNE(10,ii,3,3,"div",6),t.j41(11,"div",7)(12,"div",8)(13,"div",9)(14,"span",10),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.nrm(17,"input",11),t.nI1(18,"translate"),t.k0s(),t.DNE(19,ai,2,1,"div",12)(20,ri,2,1,"div",12),t.k0s(),t.j41(21,"div",8)(22,"div",9)(23,"span",13),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.nrm(26,"input",14),t.nI1(27,"translate"),t.k0s(),t.DNE(28,ci,2,1,"div",12),t.k0s(),t.j41(29,"div",15)(30,"div",16)(31,"label",17),t.EFF(32),t.nI1(33,"translate"),t.k0s(),t.j41(34,"div",18),t.nrm(35,"ckeditor",19),t.k0s(),t.DNE(36,di,2,1,"div",12),t.k0s()(),t.j41(37,"div",20)(38,"div",21)(39,"div",22)(40,"span",23),t.EFF(41),t.nI1(42,"translate"),t.k0s()()()(),t.j41(43,"div",24)(44,"button",25),t.bIt("click",function(){return n.sendEmail()}),t.nrm(45,"i-feather",26),t.EFF(46),t.nI1(47,"translate"),t.k0s()()()(),t.DNE(48,mi,4,0,"div",27),t.k0s()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,19,"SEND_EMAIL")," "),t.R7$(7),t.Y8G("formGroup",n.emailForm),t.R7$(),t.Y8G("ngIf",!n.smtpConfigured),t.R7$(5),t.SpI(" ",t.bMT(16,21,"TO")," "),t.R7$(2),t.FS9("placeholder",t.bMT(18,23,"EMAIL")),t.R7$(2),t.Y8G("ngIf",n.emailForm.get("toAddress").touched&&n.emailForm.get("toAddress").errors),t.R7$(),t.Y8G("ngIf",n.emailForm.get("toAddress").touched&&n.emailForm.get("toAddress").errors),t.R7$(4),t.SpI(" ",t.bMT(25,25,"SUBJECT")," "),t.R7$(2),t.FS9("placeholder",t.bMT(27,27,"SUBJECT")),t.R7$(2),t.Y8G("ngIf",n.emailForm.get("subject").touched&&n.emailForm.get("subject").errors),t.R7$(4),t.SpI(" ",t.bMT(33,29,"BODY")," "),t.R7$(3),t.Y8G("editor",n.editor)("config",t.eq3(36,ei,t.lJ4(35,ti))),t.R7$(),t.Y8G("ngIf",n.emailForm.get("body").touched&&n.emailForm.get("body").errors),t.R7$(5),t.Lme(" ",t.bMT(42,31,"ATTACHMENT_DOCUMENT")," :: ",null==n.data?null:n.data.name," "),t.R7$(3),t.Y8G("disabled",!n.smtpConfigured),t.R7$(2),t.SpI(" ",t.bMT(47,33,"SEND")," "),t.R7$(2),t.Y8G("ngIf",n.isLoading))},dependencies:[k.bT,v.qT,v.me,v.BC,v.cb,v.j4,v.JD,F.BI,F.Yi,U.An,O.iY,Y.J,de.h,X.X,H.D9],styles:[".ck-editor__editable_inline{min-height:150px}"]})}return i})();var Zt=u(4412),te=u(7673),pi=u(980);class ui{documentService;documentsSubject=new Zt.t([]);responseHeaderSubject=new Zt.t(null);loadingSubject=new Zt.t(!1);loading$=this.loadingSubject.asObservable();responseHeaderSubject$=this.responseHeaderSubject.asObservable();_data;get data(){return this._data}set data(s){this._data=s}constructor(s){this.documentService=s}connect(s){return this.documentsSubject.asObservable()}disconnect(s){this.documentsSubject.complete(),this.loadingSubject.complete()}checkFileExtension(s){switch(s.split(".").pop()?.toLowerCase()){case"pdf":case"doc":case"docx":case"xls":case"xlsx":case"txt":case"ppt":case"pptx":case"tif":case"tiff":case"jpg":case"jpeg":case"bmp":case"pbm":case"pgm":case"ppm":case"png":return!0;default:return!1}}isMoreThan15MinutesFromLocal(s){return((new Date).getTime()-s.getTime())/6e4>15}loadDocuments(s){this.loadingSubject.next(!0),this.documentService.getDocuments(s).pipe((0,le.W)(()=>(0,te.of)([])),(0,pi.j)(()=>this.loadingSubject.next(!1))).subscribe(e=>{const a=JSON.parse(e.headers.get("X-Pagination"));this.responseHeaderSubject.next(a),e.body.length>0&&e.body.forEach(n=>{n.isIndexable=this.checkFileExtension(n.name),n.isMoreThan15MinutesFromLocal=this.isMoreThan15MinutesFromLocal(new Date(n.createdDate))}),this._data=[...e.body],this.documentsSubject.next(this._data)})}}var pe=u(6971),ue=u(4481),he=u(7542),_e=u(4761),be=u(4432),hi=u(6292),M=u(9159),wt=u(9115),ee=u(4823),Jt=u(9454),ie=u(115),ge=u(9519);const _i=["input"],bi=["metatag"],gi=()=>["/documents/add"],fi=i=>({"margin-left.px":i}),fe=i=>({color:i}),vi=()=>[10,20,30];function Di(i,s){1&i&&(t.j41(0,"button",51),t.nrm(1,"i-feather",52),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&i&&(t.Y8G("routerLink",t.lJ4(4,gi)),t.R7$(2),t.SpI(" ",t.bMT(3,2,"ADD_DOCUMENT")," "))}function Ti(i,s){if(1&i&&(t.j41(0,"div")(1,"b"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.name,"")}}function Ri(i,s){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function Ci(i,s){if(1&i&&(t.j41(0,"mat-option",21)(1,"div",53),t.DNE(2,Ti,3,1,"div",54)(3,Ri,2,1,"div",54),t.k0s()()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.Y8G("ngStyle",t.eq3(4,fi,20*e.deafLevel)),t.R7$(),t.Y8G("ngIf",!e.parentId),t.R7$(),t.Y8G("ngIf",e.parentId)}}function Ii(i,s){if(1&i&&(t.j41(0,"mat-option",21)(1,"span",55),t.EFF(2),t.k0s()()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.Y8G("ngStyle",t.eq3(3,fe,null==e?null:e.colorCode)),t.R7$(),t.JRh(e.name)}}function Ei(i,s){if(1&i&&(t.j41(0,"mat-option",21),t.EFF(1),t.nI1(2,"storageType"),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",t.i5U(2,2,e.storageType,e.name)," ")}}function ki(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"mat-checkbox",57),t.bIt("change",function(n){t.eBV(e);const c=t.XpG(2);return t.Njj(n?c.masterToggle():null)}),t.k0s(),t.bVm()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function yi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",59),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.onSharedSelectDocument())}),t.j41(3,"mat-icon"),t.EFF(4,"share"),t.k0s()()}2&i&&(t.FS9("matTooltip",t.bMT(1,2,"CLICK_HERE_TO_SHARED_SELECT_DOCUMENTS")),t.FS9("aria-label",t.bMT(2,4,"SHARE")))}function Si(i,s){1&i&&(t.qex(0),t.DNE(1,yi,5,6,"button",58),t.bVm()),2&i&&(t.R7$(),t.Y8G("hasClaim","all_documents_share_document"))}function Fi(i,s){if(1&i&&(t.j41(0,"th",56),t.DNE(1,ki,2,2,"ng-container",54)(2,Si,2,1,"ng-container",54),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.selection.isEmpty()),t.R7$(),t.Y8G("ngIf",!e.selection.isEmpty())}}function xi(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",60)(1,"mat-checkbox",61),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())})("change",function(n){const c=t.eBV(e).$implicit,T=t.XpG();return t.Njj(n?T.selection.toggle(c):null)}),t.k0s()()}if(2&i){const e=s.$implicit,a=t.XpG();t.R7$(),t.Y8G("checked",a.selection.isSelected(e))}}function Mi(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION")," "))}function wi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.editDocument(n))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"EDIT")," "))}function ji(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.manageDocumentPermission(n))}),t.j41(1,"mat-icon"),t.EFF(2,"share"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"SHARE")," "))}function Ni(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.onCreateShareableLink(n))}),t.j41(1,"mat-icon"),t.EFF(2,"link"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"GET_SHAREABLE_LINK")," "))}function Ai(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.downloadDocument(n))}),t.j41(1,"mat-icon"),t.EFF(2,"download"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"DOWNLOAD")," "))}function $i(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.uploadNewVersion(n))}),t.j41(1,"mat-icon"),t.EFF(2,"upload"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"UPLOAD_NEW_VERSION_FILE")," "))}function Pi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.onVersionHistoryClick(n))}),t.j41(1,"mat-icon"),t.EFF(2," history"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"VERSION_HISOTRY")," "))}function Gi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.addComment(n))}),t.j41(1,"mat-icon"),t.EFF(2," chat"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"COMMENT")," "))}function Li(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.addReminder(n))}),t.j41(1,"mat-icon"),t.EFF(2,"notifications"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"ADD_REMINDER")," "))}function Vi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.sendEmail(n))}),t.j41(1,"mat-icon"),t.EFF(2,"forward_to_inbox"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"SEND_EMAIL")," "))}function Oi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",70),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.deleteDocument(n))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"DELETE")," "))}function Bi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2).$implicit,c=t.XpG();return t.Njj(c.addDocumentPageIndexing(n))}),t.j41(1,"mat-icon"),t.EFF(2,"save"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"ADDED_PAGE_INDEXING")," "))}function Ui(i,s){1&i&&(t.qex(0),t.DNE(1,Bi,5,3,"button",63),t.bVm()),2&i&&(t.R7$(),t.Y8G("hasClaim","deep_search_add_document_index"))}function Yi(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2).$implicit,c=t.XpG();return t.Njj(c.removeDocumentPageIndexing(n))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"REMOVE_PAGE_INDEXING")," "))}function Xi(i,s){1&i&&(t.qex(0),t.DNE(1,Yi,5,3,"button",63),t.bVm()),2&i&&(t.R7$(),t.Y8G("hasClaim","deep_search_remove_document_index"))}function Hi(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",60)(1,"button",62)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,4),t.DNE(6,wi,5,3,"button",63)(7,ji,5,3,"button",64)(8,Ni,5,3,"button",64),t.j41(9,"button",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onDocumentView(n))}),t.j41(10,"mat-icon"),t.EFF(11,"visibility"),t.k0s(),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.DNE(14,Ai,5,3,"button",66)(15,$i,5,3,"button",64)(16,Pi,5,3,"button",67)(17,Gi,5,3,"button",66)(18,Li,5,3,"button",66)(19,Vi,5,3,"button",66)(20,Oi,5,3,"button",68)(21,Ui,2,1,"ng-container",54)(22,Xi,2,1,"ng-container",54),t.k0s()()}if(2&i){const e=s.$implicit,a=t.sdS(5);t.R7$(),t.Y8G("matMenuTriggerFor",a),t.R7$(5),t.Y8G("hasClaim","all_documents_edit_document"),t.R7$(),t.Y8G("hasClaim","all_documents_share_document"),t.R7$(),t.Y8G("hasClaim","all_documents_create_shareable_link"),t.R7$(4),t.SpI(" ",t.bMT(13,14,"VIEW")," "),t.R7$(2),t.Y8G("hasClaim","all_documents_download_document"),t.R7$(),t.Y8G("hasClaim","all_documents_upload_new_version"),t.R7$(),t.Y8G("hasClaim","all_documents_view_version_history"),t.R7$(),t.Y8G("hasClaim","all_documents_add_comment"),t.R7$(),t.Y8G("hasClaim","all_documents_add_reminder"),t.R7$(),t.Y8G("hasClaim","all_documents_send_email"),t.R7$(),t.Y8G("hasClaim","all_documents_delete_document"),t.R7$(),t.Y8G("ngIf",e.isIndexable&&e.isMoreThan15MinutesFromLocal&&!e.isAddedPageIndxing),t.R7$(),t.Y8G("ngIf",e.isIndexable&&e.isMoreThan15MinutesFromLocal&&e.isAddedPageIndxing)}}function Qi(i,s){1&i&&(t.j41(0,"th",71),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"NAME")," "))}function Wi(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",60)(1,"a",72),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onDocumentView(n))}),t.EFF(2),t.k0s()()}if(2&i){const e=s.$implicit;t.R7$(2),t.JRh(e.name)}}function zi(i,s){1&i&&(t.j41(0,"th",71),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_CATEGORY")," "))}function Ji(i,s){if(1&i&&(t.j41(0,"td",60),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",e.categoryName," ")}}function Ki(i,s){1&i&&(t.j41(0,"th",71),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_STATUS")," "))}function qi(i,s){if(1&i&&(t.j41(0,"td",73),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("ngStyle",t.eq3(2,fe,null==e.documentStatus?null:e.documentStatus.colorCode)),t.R7$(),t.SpI(" ",null==e.documentStatus?null:e.documentStatus.name," ")}}function Zi(i,s){1&i&&(t.j41(0,"th",71),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"STORAGE")," "))}function tn(i,s){if(1&i&&(t.j41(0,"td",60),t.EFF(1),t.nI1(2,"storageType"),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.storageType,e.storageSettingName)," ")}}function en(i,s){1&i&&(t.j41(0,"th",71),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CREATED_DATE")," "))}function nn(i,s){if(1&i&&(t.j41(0,"td",60),t.EFF(1),t.nI1(2,"utcToLocalTime"),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,null==e?null:e.createdDate,"shortDate")," ")}}function an(i,s){1&i&&(t.j41(0,"th",71),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CREATED_BY")," "))}function on(i,s){if(1&i&&(t.j41(0,"td",60),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",null==e?null:e.createdBy," ")}}function rn(i,s){if(1&i&&(t.j41(0,"td",74),t.nrm(1,"mat-paginator",75),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("length",e.documentResource.totalCount)("pageSize",e.documentResource.pageSize)("pageSizeOptions",t.lJ4(3,vi))}}function sn(i,s){1&i&&(t.j41(0,"tr")(1,"td",76)(2,"div",77)(3,"b"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()()),2&i&&(t.R7$(4),t.SpI(" ",t.bMT(5,1,"NO_DATA_FOUND"),""))}function cn(i,s){1&i&&t.nrm(0,"tr",78)}function ln(i,s){1&i&&t.nrm(0,"tr",79)}function dn(i,s){1&i&&t.nrm(0,"tr",80)}function mn(i,s){1&i&&(t.j41(0,"div",81)(1,"div",82)(2,"span",83),t.EFF(3,"Loading..."),t.k0s()()())}let pn=(()=>{class i extends V.${documentService;commonDialogService;categoryService;dialog;overlay;clonerService;translationService;commonService;toastrService;documentStatusService;StorageSettingService;breakpointsService;step=(0,t.vPA)(0);dataSource;displayedColumns=["select","action","name","categoryName","documentStatus","storageType","createdDate","createdBy"];footerToDisplayed=["footer"];isLoadingResults=!0;documentResource;categories=[];hierarchicalCategories=[];storageSetting=[];documentStatuses=[];loading$;paginator;sort;input;metatag;selection=new o.CB(!0,[]);constructor(e,a,n,c,T,I,L,w,P,ne,ae,Xa){super(),this.documentService=e,this.commonDialogService=a,this.categoryService=n,this.dialog=c,this.overlay=T,this.clonerService=I,this.translationService=L,this.commonService=w,this.toastrService=P,this.documentStatusService=ne,this.StorageSettingService=ae,this.breakpointsService=Xa,this.documentResource=new G.U,this.documentResource.pageSize=10,this.documentResource.orderBy="CreatedDate desc"}ngOnInit(){this.ismobileCheck(),this.dataSource=new ui(this.documentService),this.dataSource.loadDocuments(this.documentResource),this.getCategories(),this.getDocumentStatus(),this.getStorageSetting(),this.getResourceParameter()}ismobileCheck(){this.breakpointsService.isMobile$.subscribe(e=>{this.step.set(e?1:0)})}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,W.h)(this.sort.sortChange,this.paginator.page).pipe((0,z.M)(e=>{this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.documentResource.pageSize=this.paginator.pageSize,this.documentResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadDocuments(this.documentResource)})).subscribe(),this.sub$.sink=(0,rt.R)(this.input.nativeElement,"keyup").pipe((0,Z.B)(1e3),(0,_t.F)(),(0,z.M)(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.name=this.input.nativeElement.value,this.dataSource.loadDocuments(this.documentResource)})).subscribe(),this.sub$.sink=(0,rt.R)(this.metatag.nativeElement,"keyup").pipe((0,Z.B)(1e3),(0,_t.F)(),(0,z.M)(()=>{this.paginator.pageIndex=0,this.documentResource.skip=0,this.documentResource.metaTags=this.metatag.nativeElement.value,this.dataSource.loadDocuments(this.documentResource)})).subscribe()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}onCategoryChange(e){this.documentResource.categoryId=e.value?e.value:"",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}onCreatedDateChange(e){this.documentResource.createDate=e||null,this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(e=>{e&&e.length>0&&(this.categories=[...e],this.setDeafLevel())})}getDocumentStatus(){this.documentStatusService.getDocumentStatuss().subscribe(e=>{e&&e.length>0&&(this.documentStatuses=[...e])})}getStorageSetting(){this.StorageSettingService.getStorageSettings().subscribe(e=>{e&&e.length>0&&(this.storageSetting=[...e])})}setDeafLevel(e,a){const n=this.categories.filter(c=>c.parentId==a);return n.length>0&&n.map((c,T)=>{c.deafLevel=e?e.deafLevel+1:0,c.index=(e?e.index:0)+T*Math.pow(.1,c.deafLevel),this.hierarchicalCategories.push(c),this.setDeafLevel(c,c.id)}),e}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.documentResource.pageSize=e.pageSize,this.documentResource.skip=e.skip,this.documentResource.totalCount=e.totalCount)})}deleteDocument(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${e.name}`).subscribe(a=>{a&&(this.sub$.sink=this.documentService.deleteDocument(e.id).subscribe(()=>{this.addDocumentTrail(e.id,x.X.Deleted.toString()),this.toastrService.success(this.translationService.getValue("DOCUMENT_DELETED_SUCCESSFULLY")),this.dataSource.loadDocuments(this.documentResource)}))})}removeDocumentPageIndexing(e){this.isLoadingResults=!0,this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_WANT_TO_REMOVE_DOCUMENT_PAGE_INDEXING")} ${e.name}`,this.translationService.getValue("DEEP_SEARCH_REMOVE_NOTE")).subscribe(a=>{a&&(this.sub$.sink=this.documentService.removePageIndexing(e.id).subscribe({next:n=>{this.isLoadingResults=!1,n&&(this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_DELETED")),this.dataSource.loadDocuments(this.documentResource))},error:()=>{this.isLoadingResults=!1}}))})}addDocumentPageIndexing(e){this.sub$.sink=this.documentService.addPageIndexing(e.id).subscribe({next:a=>{a&&(this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_ADDED")),this.dataSource.loadDocuments(this.documentResource))},error:()=>{this.isLoadingResults=!1}})}getDocuments(){this.isLoadingResults=!0,this.sub$.sink=this.documentService.getDocuments(this.documentResource).subscribe({next:e=>{const a=JSON.parse(e.headers.get("X-Pagination"));this.documentResource.pageSize=a.pageSize,this.documentResource.skip=a.skip,this.isLoadingResults=!1},error:e=>{this.isLoadingResults=!1}})}onStatusChange(e){const a=e.value;this.documentResource.documentStatusId=a?a.id:"",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}onStorageChange(e){const a=e.value;this.documentResource.storageSettingId=a?a.id:"",this.documentResource.skip=0,this.paginator.pageIndex=0,this.dataSource.loadDocuments(this.documentResource)}editDocument(e){const n=this.dialog.open(yt,{width:"60vw",data:Object.assign({},{document:e,categories:this.categories,documentStatuses:this.documentStatuses})});this.sub$.sink=n.afterClosed().subscribe(c=>{"loaded"===c&&this.dataSource.loadDocuments(this.documentResource)})}addComment(e){const a=this.dialog.open(j.g,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{"loaded"===n&&this.dataSource.loadDocuments(this.documentResource)})}manageDocumentPermission(e){this.dialog.open(St.C,{data:e,width:"80vw",maxHeight:"80vh"})}onSharedSelectDocument(){this.dialog.open(Q,{data:this.selection.selected,width:"60vw",maxHeight:"80vh"}).afterClosed().subscribe(()=>{this.selection.clear()})}uploadNewVersion(e){const a=this.dialog.open(se,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{n&&this.dataSource.loadDocuments(this.documentResource)})}downloadDocument(e){const a={documentId:e.id,name:"",extension:e.url.split(".")[1],isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1};this.sub$.sink=this.commonService.downloadDocument(a).subscribe({next:n=>{n.type===A.hv.Response&&(this.addDocumentTrail(e.id,x.X.Download.toString()),this.downloadFile(n,e))},error:n=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))}})}addDocumentTrail(e,a){this.sub$.sink=this.commonService.addDocumentAuditTrail({documentId:e,operationName:a}).subscribe(c=>{})}sendEmail(e){this.dialog.open(me,{data:e,width:"80vw",maxHeight:"80vh"})}addReminder(e){this.dialog.open(oe,{data:e,width:"80vw",maxHeight:"80vh"})}onDocumentView(e){const n=e.url.split(".")[1];this.overlay.open(q.X,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:e.id,name:e.name,extension:n,isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1}})}downloadFile(e,a){const n=new Blob([e.body],{type:e.body.type}),c=document.createElement("a");c.setAttribute("style","display:none;"),document.body.appendChild(c),c.download=a.name,c.href=URL.createObjectURL(n),c.target="_blank",c.click(),document.body.removeChild(c)}onVersionHistoryClick(e){let a=this.clonerService.deepClone(e);this.sub$.sink=this.documentService.getDocumentVersion(e.id).subscribe(n=>{a.documentVersions=n,this.dialog.open(ce.V,{maxWidth:"80vw",panelClass:"full-width-dialog",data:Object.assign({},a)}).afterClosed().subscribe(T=>{T&&this.dataSource.loadDocuments(this.documentResource)})})}onCreateShareableLink(e){this.sub$.sink=this.documentService.getDocumentShareableLink(e.id).subscribe(a=>{this.dialog.open(pe.o,{width:"500px",data:{document:e,link:a}})})}static \u0275fac=function(a){return new(a||i)(t.rXU(dt.D),t.rXU(ue.Z),t.rXU(Tt.M),t.rXU(F.bZ),t.rXU(he.j),t.rXU(_e.h),t.rXU(it.L),t.rXU(et.h),t.rXU(tt.tw),t.rXU(Rt.Z),t.rXU(be.V),t.rXU(hi.s))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-list"]],viewQuery:function(a,n){if(1&a&&(t.GBs(K.iy,5),t.GBs(S.B4,5),t.GBs(_i,5),t.GBs(bi,5)),2&a){let c;t.mGM(c=t.lsd())&&(n.paginator=c.first),t.mGM(c=t.lsd())&&(n.sort=c.first),t.mGM(c=t.lsd())&&(n.input=c.first),t.mGM(c=t.lsd())&&(n.metatag=c.first)}},features:[t.Vt3],decls:94,vars:49,consts:[["input",""],["metatag",""],["ref",""],["picker",""],["menu","matMenu"],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"col-md-6","d-flex","justify-content-end","mb-2"],["class","btn btn-success btn-sm me-2",3,"routerLink",4,"hasClaim"],[1,"card"],[1,"header"],[3,"expanded"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row"],[1,"p-1","flex-item","flex-fill"],["type","text",1,"form-control",3,"placeholder"],[1,"form-control",3,"placeholder"],[1,"form-control",3,"selectionChange","placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],[1,"form-control",3,"dateInput","matDatepicker","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],[1,"body"],[1,"table-responsive"],[1,"grid-height-small"],["mat-table","","matSortDisableClear","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","table-column-fix-30","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","categoryName"],["matColumnDef","documentStatus"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","storageType"],["matColumnDef","createdDate"],["matColumnDef","createdBy"],["matColumnDef","footer"],["mat-footer-cell","","colspan","8",4,"matFooterCellDef"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["class","spinner-container",4,"ngIf"],[1,"btn","btn-success","btn-sm","me-2",3,"routerLink"],["name","plus"],[1,"country-item",3,"ngStyle"],[4,"ngIf"],[3,"ngStyle"],["mat-header-cell","",1,"table-column-fix-30"],["color","primary",3,"change","checked","indeterminate"],["mat-mini-fab","","class","btn btn-primary btn-sm","matTooltipPosition","above",3,"matTooltip","aria-label","click",4,"hasClaim"],["mat-mini-fab","","matTooltipPosition","above",1,"btn","btn-primary","btn-sm",3,"click","matTooltip","aria-label"],["mat-cell",""],["color","primary",3,"click","change","checked"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm","type","button",3,"click",4,"hasClaim"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","","type","button",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-menu-item","","type","button",3,"click"],["mat-header-cell","","mat-sort-header",""],[1,"doc-link",3,"click"],["mat-cell","",3,"ngStyle"],["mat-footer-cell","","colspan","8"],[3,"length","pageSize","pageSizeOptions"],["colspan","8"],[1,"m-2"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(a,n){if(1&a){const c=t.RV6();t.j41(0,"section",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"span",9),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.nrm(7,"app-page-help-text",10),t.k0s(),t.j41(8,"div",11),t.DNE(9,Di,4,5,"button",12),t.k0s()(),t.j41(10,"div",13)(11,"div",14)(12,"mat-accordion")(13,"mat-expansion-panel",15)(14,"mat-expansion-panel-header")(15,"mat-panel-title"),t.EFF(16),t.nI1(17,"translate"),t.k0s()(),t.j41(18,"div",16)(19,"div",17),t.nrm(20,"input",18,0),t.nI1(22,"translate"),t.k0s(),t.j41(23,"div",17),t.nrm(24,"input",19,1),t.nI1(26,"translate"),t.k0s(),t.j41(27,"div",17)(28,"mat-select",20),t.nI1(29,"translate"),t.bIt("selectionChange",function(I){return t.eBV(c),t.Njj(n.onCategoryChange(I))}),t.j41(30,"mat-option",21),t.EFF(31),t.nI1(32,"translate"),t.k0s(),t.DNE(33,Ci,4,6,"mat-option",22),t.k0s()(),t.j41(34,"div",17)(35,"mat-select",20),t.nI1(36,"translate"),t.bIt("selectionChange",function(I){return t.eBV(c),t.Njj(n.onStatusChange(I))}),t.j41(37,"mat-option",21),t.EFF(38),t.nI1(39,"translate"),t.k0s(),t.DNE(40,Ii,3,5,"mat-option",22),t.k0s()(),t.j41(41,"div",17)(42,"mat-select",20),t.nI1(43,"translate"),t.bIt("selectionChange",function(I){return t.eBV(c),t.Njj(n.onStorageChange(I))}),t.j41(44,"mat-option",21),t.EFF(45),t.nI1(46,"translate"),t.k0s(),t.DNE(47,Ei,3,5,"mat-option",22),t.k0s()(),t.j41(48,"div",17)(49,"div",23)(50,"input",24,2),t.nI1(52,"translate"),t.bIt("dateInput",function(){t.eBV(c);const I=t.sdS(51);return t.Njj(n.onCreatedDateChange(I.value))}),t.k0s(),t.j41(53,"div",25)(54,"button",26),t.bIt("click",function(){t.eBV(c);const I=t.sdS(57);return t.Njj(I.open())}),t.nrm(55,"i-feather",27),t.k0s()(),t.nrm(56,"mat-datepicker",null,3),t.k0s()()()()()(),t.j41(58,"div",28)(59,"div",29)(60,"div",30)(61,"table",31),t.qex(62,32),t.DNE(63,Fi,3,2,"th",33)(64,xi,2,1,"td",34),t.bVm(),t.qex(65,35),t.DNE(66,Mi,3,3,"th",33)(67,Hi,23,16,"td",34),t.bVm(),t.qex(68,36),t.DNE(69,Qi,3,3,"th",37)(70,Wi,3,1,"td",34),t.bVm(),t.qex(71,38),t.DNE(72,zi,3,3,"th",37)(73,Ji,2,1,"td",34),t.bVm(),t.qex(74,39),t.DNE(75,Ki,3,3,"th",37)(76,qi,2,4,"td",40),t.bVm(),t.qex(77,41),t.DNE(78,Zi,3,3,"th",37)(79,tn,3,4,"td",34),t.bVm(),t.qex(80,42),t.DNE(81,en,3,3,"th",37)(82,nn,3,4,"td",34),t.bVm(),t.qex(83,43),t.DNE(84,an,3,3,"th",37)(85,on,2,1,"td",34),t.bVm(),t.qex(86,44),t.DNE(87,rn,2,4,"td",45),t.bVm(),t.DNE(88,sn,6,3,"tr",46)(89,cn,1,0,"tr",47)(90,ln,1,0,"tr",48)(91,dn,1,0,"tr",49),t.k0s()()()()()()(),t.DNE(92,mn,4,0,"div",50),t.nI1(93,"async")}if(2&a){const c=t.sdS(57);t.R7$(5),t.JRh(t.bMT(6,25,"ALL_DOCUMENTS")),t.R7$(2),t.Y8G("code","ALL_DOCUMENTS"),t.R7$(2),t.Y8G("hasClaim","all_documents_create_document"),t.R7$(4),t.Y8G("expanded",0===n.step()),t.R7$(3),t.SpI(" ",t.bMT(17,27,"FILTER")," "),t.R7$(4),t.FS9("placeholder",t.bMT(22,29,"SEARCH_DOCUMENT_BY_NAME_OR_DESCRIPTION")),t.R7$(4),t.FS9("placeholder",t.bMT(26,31,"SEARCH_DOCUMENT_BY_META_TAGS")),t.R7$(4),t.FS9("placeholder",t.bMT(29,33,"SELECT_CATEGORY")),t.R7$(3),t.SpI("-- ",t.bMT(32,35,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.hierarchicalCategories),t.R7$(2),t.FS9("placeholder",t.bMT(36,37,"SELECT_DOCUMENT_STATUS")),t.R7$(3),t.SpI("-- ",t.bMT(39,39,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.documentStatuses),t.R7$(2),t.FS9("placeholder",t.bMT(43,41,"SELECT_STORAGE")),t.R7$(3),t.SpI("-- ",t.bMT(46,43,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.storageSetting),t.R7$(3),t.FS9("placeholder",t.bMT(52,45,"CREATED_DATE")),t.Y8G("matDatepicker",c),t.R7$(11),t.Y8G("dataSource",n.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("matFooterRowDef",n.footerToDisplayed)("matFooterRowDefSticky",!0),t.R7$(),t.Y8G("ngIf",t.bMT(93,47,n.dataSource.loading$))}},dependencies:[k.Sq,k.bT,k.B3,E.Wk,M.Zl,M.tL,M.ji,M.cC,M.YV,M.iL,M.Zq,M.xW,M.KS,M.$R,M.Qo,M.YZ,M.NB,M.iF,M.ky,nt.VO,ht.wT,S.B4,S.aE,K.iy,at.Vh,at.bZ,U.An,O.iY,O.$0,J.i,Y.J,pt.So,wt.kk,wt.fb,wt.Cp,X.X,ee.oV,Jt.BS,Jt.GK,Jt.Z2,Jt.WN,k.Jj,H.D9,ie.K,ge.o]})}return i})();var un=u(6697),hn=u(1397);let _n=(()=>{class i{documentService;router;constructor(e,a){this.documentService=e,this.router=a}resolve(e,a){const n=e.paramMap.get("id");return"add"===n?null:this.documentService.getDocument(n).pipe((0,un.s)(1),(0,hn.Z)(c=>c?(0,te.of)(c):(this.router.navigate(["/document"]),(0,te.of)(null))))}static \u0275fac=function(a){return new(a||i)(t.KVO(dt.D),t.KVO(E.Ix))};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const bn=()=>["/documents"],gn=i=>({"margin-left.px":i}),fn=i=>({color:i});function vn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_IS_REQUIRED")," "))}function Dn(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,vn,3,3,"div",31),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("url").errors)?null:e.required)}}function Tn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_TYPE_IS_NOT_ALLOW")," "))}function Rn(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Tn,3,3,"div",31),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("extension").errors)?null:e.required)}}function Cn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"NAME_IS_REQUIRED")," "))}function In(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Cn,3,3,"div",31),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("name").errors)?null:e.required)}}function En(i,s){if(1&i&&(t.j41(0,"div")(1,"b"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.name,"")}}function kn(i,s){if(1&i&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function yn(i,s){if(1&i&&(t.j41(0,"mat-option",33)(1,"div",34),t.DNE(2,En,3,1,"div",17)(3,kn,2,1,"div",17),t.k0s()()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.Y8G("ngStyle",t.eq3(4,gn,20*e.deafLevel)),t.R7$(),t.Y8G("ngIf",!e.parentId),t.R7$(),t.Y8G("ngIf",e.parentId)}}function Sn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CATEGORY_IS_REQUIRED")," "))}function Fn(i,s){if(1&i&&(t.j41(0,"div"),t.DNE(1,Sn,3,3,"div",31),t.k0s()),2&i){let e;const a=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=a.documentForm.get("categoryId").errors)?null:e.required)}}function xn(i,s){if(1&i&&(t.j41(0,"mat-option",33),t.EFF(1),t.nI1(2,"storageType"),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",t.i5U(2,2,e.storageType,e.name)," ")}}function Mn(i,s){if(1&i&&(t.j41(0,"mat-option",33)(1,"span",35),t.EFF(2),t.k0s()()),2&i){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(),t.Y8G("ngStyle",t.eq3(3,fn,null==e?null:e.colorCode)),t.R7$(),t.SpI(" ",e.name," ")}}function wn(i,s){1&i&&(t.j41(0,"label"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"META_TAGS")," "))}function jn(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onAddAnotherMetaTag())}),t.nrm(1,"i-feather",44),t.k0s()}}function Nn(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(e);const n=t.XpG().index,c=t.XpG();return t.Njj(c.onDeleteMetaTag(n))}),t.nrm(1,"i-feather",46),t.k0s()}}function An(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",36),t.qex(1,37),t.DNE(2,wn,3,3,"label",17),t.j41(3,"div",13)(4,"div",38)(5,"input",39),t.bIt("change",function(n){const c=t.eBV(e).index,T=t.XpG();return t.Njj(T.onMetatagChange(n,c))}),t.k0s()(),t.j41(6,"div",40),t.DNE(7,jn,2,0,"button",41)(8,Nn,2,0,"button",42),t.k0s()(),t.bVm(),t.k0s()}if(2&i){const e=s.index;t.R7$(),t.Y8G("formGroupName",e),t.R7$(),t.Y8G("ngIf",0==e),t.R7$(5),t.Y8G("ngIf",0==e),t.R7$(),t.Y8G("ngIf",0!=e)}}function $n(i,s){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.selectedRoles[0].name," ")}}function Pn(i,s){if(1&i&&(t.j41(0,"span",50),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Lme(" (+",e.selectedRoles.length-1," ",2===e.selectedRoles.length?"other":"others",") ")}}function Gn(i,s){if(1&i&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e.name," ")}}function Ln(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_IS_REQURED")," "))}function Vn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"END_DATE_IS_REQURED")," "))}function On(i,s){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",13)(2,"div",22)(3,"div",54),t.nrm(4,"input",55,1),t.nI1(6,"translate"),t.j41(7,"div",56)(8,"button",57),t.bIt("click",function(){t.eBV(e);const n=t.sdS(11);return t.Njj(n.open())}),t.nrm(9,"i-feather",58),t.k0s()()(),t.nrm(10,"mat-datepicker",null,2),t.DNE(12,Ln,3,3,"div",31),t.k0s(),t.j41(13,"div",22)(14,"div",54),t.nrm(15,"input",59),t.nI1(16,"translate"),t.j41(17,"div",56)(18,"button",57),t.bIt("click",function(){t.eBV(e);const n=t.sdS(21);return t.Njj(n.open())}),t.nrm(19,"i-feather",58),t.k0s()()(),t.nrm(20,"mat-datepicker",null,3),t.DNE(22,Vn,3,3,"div",31),t.k0s()()()}if(2&i){const e=t.sdS(11),a=t.sdS(21),n=t.XpG(3);t.R7$(4),t.FS9("placeholder",t.bMT(6,8,"CHOOSE_A_START_DATE")),t.Y8G("min",n.minDate)("matDatepicker",e),t.R7$(8),t.Y8G("ngIf",n.rolePermissionFormGroup.get("startDate").touched&&n.rolePermissionFormGroup.get("startDate").hasError("required")),t.R7$(3),t.FS9("placeholder",t.bMT(16,10,"CHOOSE_A_END_DATE")),t.Y8G("min",n.rolePermissionFormGroup.get("startDate").value)("matDatepicker",a),t.R7$(7),t.Y8G("ngIf",n.rolePermissionFormGroup.get("startDate").touched&&n.rolePermissionFormGroup.get("endDate").hasError("required"))}}function Bn(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",51)(1,"mat-checkbox",52),t.bIt("change",function(n){t.eBV(e);const c=t.XpG(2);return t.Njj(c.roleTimeBoundChange(n))}),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.DNE(4,On,23,12,"div",17),t.j41(5,"div")(6,"mat-checkbox",53),t.EFF(7),t.nI1(8,"translate"),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,3,"SPACIFY_THE_PERIOD")," "),t.R7$(2),t.Y8G("ngIf",e.rolePermissionFormGroup.get("isTimeBound").value),t.R7$(3),t.JRh(t.bMT(8,5,"ALLOW_DOWNLOAD"))}}function Un(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",22)(1,"label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"mat-select",47),t.nI1(5,"translate"),t.mxI("valueChange",function(n){t.eBV(e);const c=t.XpG();return t.DH7(c.selectedRoles,n)||(c.selectedRoles=n),t.Njj(n)}),t.j41(6,"mat-select-trigger"),t.DNE(7,$n,2,1,"span",17)(8,Pn,2,2,"span",48),t.k0s(),t.DNE(9,Gn,2,2,"mat-option",20),t.k0s(),t.DNE(10,Bn,9,7,"div",49),t.k0s()}if(2&i){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,7,"ASSIGN_ROLES")),t.R7$(2),t.FS9("placeholder",t.bMT(5,9,"ROLES")),t.R50("value",e.selectedRoles),t.R7$(3),t.Y8G("ngIf",e.selectedRoles.length>0),t.R7$(),t.Y8G("ngIf",e.selectedRoles.length>1),t.R7$(),t.Y8G("ngForOf",e.roles),t.R7$(),t.Y8G("ngIf",e.selectedRoles.length>0)}}function Yn(i,s){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Lme(" ",e.selectedUsers[0].firstName," ",e.selectedUsers[0].lastName," ")}}function Xn(i,s){if(1&i&&(t.j41(0,"span",50),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Lme(" (+",e.selectedUsers.length-1," ",2===e.selectedRoles.length?"other":"others",") ")}}function Hn(i,s){if(1&i&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.Lme(" ",e.firstName," ",e.lastName," ")}}function Qn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"START_DATE_IS_REQURED")," "))}function Wn(i,s){1&i&&(t.j41(0,"div",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"END_DATE_IS_REQURED")," "))}function zn(i,s){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",13)(2,"div",22)(3,"div",54),t.nrm(4,"input",55,1),t.nI1(6,"translate"),t.j41(7,"div",56)(8,"button",57),t.bIt("click",function(){t.eBV(e);const n=t.sdS(11);return t.Njj(n.open())}),t.nrm(9,"i-feather",58),t.k0s()()(),t.nrm(10,"mat-datepicker",null,2),t.DNE(12,Qn,3,3,"div",31),t.k0s(),t.j41(13,"div",22)(14,"div",54),t.nrm(15,"input",59),t.nI1(16,"translate"),t.j41(17,"div",56)(18,"button",57),t.bIt("click",function(){t.eBV(e);const n=t.sdS(21);return t.Njj(n.open())}),t.nrm(19,"i-feather",58),t.k0s()()(),t.nrm(20,"mat-datepicker",null,3),t.DNE(22,Wn,3,3,"div",31),t.k0s()()()}if(2&i){const e=t.sdS(11),a=t.sdS(21),n=t.XpG(3);t.R7$(4),t.FS9("placeholder",t.bMT(6,8,"CHOOSE_A_START_DATE")),t.Y8G("min",n.minDate)("matDatepicker",e),t.R7$(8),t.Y8G("ngIf",n.userPermissionFormGroup.get("startDate").touched&&n.userPermissionFormGroup.get("startDate").hasError("required")),t.R7$(3),t.FS9("placeholder",t.bMT(16,10,"CHOOSE_A_END_DATE")),t.Y8G("min",n.userPermissionFormGroup.get("startDate").value)("matDatepicker",a),t.R7$(7),t.Y8G("ngIf",n.userPermissionFormGroup.get("startDate").touched&&n.userPermissionFormGroup.get("endDate").hasError("required"))}}function Jn(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",61)(1,"mat-checkbox",52),t.bIt("change",function(n){t.eBV(e);const c=t.XpG(2);return t.Njj(c.userTimeBoundChange(n))}),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.DNE(4,zn,23,12,"div",17),t.j41(5,"div")(6,"mat-checkbox",53),t.EFF(7),t.nI1(8,"translate"),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,3,"SPACIFY_THE_PERIOD"),""),t.R7$(2),t.Y8G("ngIf",e.userPermissionFormGroup.get("isTimeBound").value),t.R7$(3),t.JRh(t.bMT(8,5,"ALLOW_DOWNLOAD"))}}function Kn(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",22)(1,"label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"mat-select",47),t.nI1(5,"translate"),t.mxI("valueChange",function(n){t.eBV(e);const c=t.XpG();return t.DH7(c.selectedUsers,n)||(c.selectedUsers=n),t.Njj(n)}),t.j41(6,"mat-select-trigger"),t.DNE(7,Yn,2,2,"span",17)(8,Xn,2,2,"span",48),t.k0s(),t.DNE(9,Hn,2,3,"mat-option",20),t.k0s(),t.DNE(10,Jn,9,7,"div",60),t.k0s()}if(2&i){const e=t.XpG();t.R7$(2),t.JRh(t.bMT(3,7,"ASSIGN_USERS")),t.R7$(2),t.FS9("placeholder",t.bMT(5,9,"USERS")),t.R50("value",e.selectedUsers),t.R7$(3),t.Y8G("ngIf",e.selectedUsers.length>0),t.R7$(),t.Y8G("ngIf",e.selectedUsers.length>1),t.R7$(),t.Y8G("ngForOf",e.users),t.R7$(),t.Y8G("ngIf",e.selectedUsers.length>0)}}function qn(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",62),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveDocument())}),t.nrm(1,"i-feather",63),t.EFF(2),t.nI1(3,"translate"),t.k0s()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"SAVE"),""))}let Zn=(()=>{class i extends V.${fb;httpClient;cd;categoryService;commonService;documentStatusService;StorageSettingService;document;documentForm;extension="";categories=[];hierarchicalCategories=[];storageSettings=[];documentStatues=[];documentSource;onSaveDocument=new t.bkB;progress=0;message="";fileInfo;isFileUpload=!1;fileData;users;roles;selectedRoles=[];selectedUsers=[];minDate;get documentMetaTagsArray(){return this.documentForm.get("documentMetaTags")}constructor(e,a,n,c,T,I,L){super(),this.fb=e,this.httpClient=a,this.cd=n,this.categoryService=c,this.commonService=T,this.documentStatusService=I,this.StorageSettingService=L,this.minDate=new Date}ngOnInit(){this.createDocumentForm(),this.getCategories(),this.getDocumentStatus(),this.getStorageSetting(),this.documentMetaTagsArray.push(this.buildDocumentMetaTag()),this.getUsers(),this.getRoles()}getUsers(){this.sub$.sink=this.commonService.getUsersForDropdown().subscribe(e=>this.users=e)}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(e=>this.roles=e)}getCategories(){this.categoryService.getAllCategoriesForDropDown().subscribe(e=>{this.categories=e,this.setDeafLevel()})}getDocumentStatus(){this.documentStatusService.getDocumentStatuss().subscribe(e=>{this.documentStatues=e&&e.length>0?e:[]})}getStorageSetting(){this.StorageSettingService.getStorageSettings().subscribe(e=>{if(e&&e.length>0){this.storageSettings=e;const a=this.storageSettings.find(n=>n.isDefault);a&&this.documentForm.patchValue({storageSettingId:a.id})}})}setDeafLevel(e,a){const n=this.categories.filter(c=>c.parentId==a);return n.length>0&&n.map((c,T)=>{c.deafLevel=e?e.deafLevel+1:0,c.index=(e?e.index:0)+T*Math.pow(.1,c.deafLevel),this.hierarchicalCategories.push(c),this.setDeafLevel(c,c.id)}),e}onDocumentChange(e){const n=(e.target.files||e.srcElement.files)[0];if(this.extension=n.name.split(".").pop(),this.fileExtesionValidation(this.extension)){const c=new FileReader;c.onload=T=>{this.documentSource=T.target.result,this.fileUploadValidation("upload")},c.readAsDataURL(n)}else this.documentSource=null,this.fileUploadValidation("")}fileUploadValidation(e){this.documentForm.patchValue({url:e}),this.documentForm.get("url").markAsTouched(),this.documentForm.updateValueAndValidity()}fileUploadExtensionValidation(e){this.documentForm.patchValue({extension:e}),this.documentForm.get("extension").markAsTouched(),this.documentForm.updateValueAndValidity()}fileExtesionValidation(e){return!!re.c.allowExtesions.find(c=>c.extentions.find(T=>T.toLowerCase()===e.toLowerCase()))}createDocumentForm(){this.documentForm=this.fb.group({name:["",[v.k0.required]],description:[""],categoryId:["",[v.k0.required]],url:["",[v.k0.required]],extension:["",[v.k0.required]],documentMetaTags:this.fb.array([]),documentStatusId:[""],storageSettingId:[""],selectedRoles:[],selectedUsers:[],rolePermissionForm:this.fb.group({isTimeBound:[!1],startDate:[""],endDate:[""],isAllowDownload:[!1]}),userPermissionForm:this.fb.group({isTimeBound:[!1],startDate:[""],endDate:[""],isAllowDownload:[!1]})})}buildDocumentMetaTag(){return this.fb.group({id:[""],documentId:[""],metatag:[""]})}get rolePermissionFormGroup(){return this.documentForm.get("rolePermissionForm")}get userPermissionFormGroup(){return this.documentForm.get("userPermissionForm")}onMetatagChange(e,a){if(!this.documentMetaTagsArray.at(a).get("metatag").value)return;const c=this.documentMetaTagsArray.at(a).get("metatag");c.setValidators([v.k0.required]),c.updateValueAndValidity()}editDocmentMetaData(e){return this.fb.group({id:[e.id],documentId:[e.documentId],metatag:[e.metatag]})}SaveDocument(){this.documentForm.valid?this.onSaveDocument.emit(this.buildDocumentObject()):this.markFormGroupTouched(this.documentForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(a=>{a.markAsTouched(),a.controls&&this.markFormGroupTouched(a)})}buildDocumentObject(){const e=this.documentMetaTagsArray.getRawValue(),a={categoryId:this.documentForm.get("categoryId").value??"",documentStatusId:this.documentForm.get("documentStatusId").value??"",storageSettingId:this.documentForm.get("storageSettingId").value??"",description:this.documentForm.get("description").value??"",name:this.documentForm.get("name").value,url:this.fileData.fileName,documentMetaDatas:[...e],files:this.fileData,extension:this.extension};return this.selectedRoles.length>0&&(a.documentRolePermissions=this.selectedRoles.map(n=>Object.assign({},{id:"",documentId:"",roleId:n.id},this.rolePermissionFormGroup.value))),this.selectedUsers.length>0&&(a.documentUserPermissions=this.selectedUsers.map(n=>Object.assign({},{id:"",documentId:"",userId:n.id},this.userPermissionFormGroup.value))),a}onAddAnotherMetaTag(){this.documentMetaTagsArray.insert(0,this.editDocmentMetaData({id:"",documentId:this.document&&this.document.id?this.document.id:"",metatag:""}))}onDeleteMetaTag(e){this.documentMetaTagsArray.removeAt(e)}upload(e){if(0!==e.length){if(this.extension=e[0].name.split(".").pop(),!this.fileExtesionValidation(this.extension))return this.fileUploadExtensionValidation(""),void this.cd.markForCheck();this.fileUploadExtensionValidation("valid"),this.fileData=e[0],this.documentForm.get("url").setValue(e[0].name),this.documentForm.get("name").setValue(e[0].name)}}roleTimeBoundChange(e){e.checked?(this.rolePermissionFormGroup.get("startDate").setValidators([v.k0.required]),this.rolePermissionFormGroup.get("endDate").setValidators([v.k0.required])):(this.rolePermissionFormGroup.get("startDate").clearValidators(),this.rolePermissionFormGroup.get("startDate").updateValueAndValidity(),this.rolePermissionFormGroup.get("endDate").clearValidators(),this.rolePermissionFormGroup.get("endDate").updateValueAndValidity())}userTimeBoundChange(e){e.checked?(this.userPermissionFormGroup.get("startDate").setValidators([v.k0.required]),this.userPermissionFormGroup.get("endDate").setValidators([v.k0.required])):(this.userPermissionFormGroup.get("startDate").clearValidators(),this.userPermissionFormGroup.get("startDate").updateValueAndValidity(),this.userPermissionFormGroup.get("endDate").clearValidators(),this.userPermissionFormGroup.get("endDate").updateValueAndValidity())}static \u0275fac=function(a){return new(a||i)(t.rXU(v.ze),t.rXU(A.Qq),t.rXU(t.gRc),t.rXU(Tt.M),t.rXU(et.h),t.rXU(Rt.Z),t.rXU(be.V))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-manage-presentation"]],outputs:{onSaveDocument:"onSaveDocument"},features:[t.Vt3],decls:74,vars:44,consts:[["file",""],["ref",""],["startDatePicker",""],["endDatePicker",""],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","ADD_DOCUMENT"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-md-3"],[1,"form-group"],["type","file",1,"form-control",3,"change"],[4,"ngIf"],["formControlName","name","type","text",1,"form-control"],["formControlName","categoryId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["formControlName","storageSettingId",1,"form-control"],[1,"col-md-6"],["formControlName","description",1,"form-control"],["formControlName","documentStatusId",1,"form-control"],["class","","formArrayName","documentMetaTags",4,"ngFor","ngForOf"],["class","col-md-6",4,"hasClaim"],[1,"m-top-10","col-md-12"],["class","btn btn-success btn-sm me-2","cdkFocusInitial","",3,"click",4,"hasClaim"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[3,"value"],[1,"country-item",3,"ngStyle"],[3,"ngStyle"],["formArrayName","documentMetaTags",1,""],[3,"formGroupName"],[1,"form-group","col-md","mb-1","col"],["formControlName","metatag","type","text",1,"form-control",3,"change"],[1,"form-group","col-md-auto","col-auto","ps-0"],["class","btn btn-outline-success","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],["name","plus",1,"small-icon"],["type","button",1,"btn","btn-outline-danger",3,"click"],["name","trash",1,"small-icon"],["multiple","",1,"form-control",3,"valueChange","placeholder","value"],["class","example-additional-selection",4,"ngIf"],["class","mt-3","formGroupName","rolePermissionForm",4,"ngIf"],[1,"example-additional-selection"],["formGroupName","rolePermissionForm",1,"mt-3"],["color","primary","formControlName","isTimeBound",3,"change"],["color","primary","formControlName","isAllowDownload"],[1,"input-group"],["formControlName","startDate",1,"form-control",3,"min","placeholder","matDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","calendar-button",3,"click"],["name","calendar",1,"small-icon"],["formControlName","endDate",1,"form-control",3,"min","placeholder","matDatepicker"],["class","mt-3","formGroupName","userPermissionForm",4,"ngIf"],["formGroupName","userPermissionForm",1,"mt-3"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"]],template:function(a,n){if(1&a){const c=t.RV6();t.j41(0,"section",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"span",8),t.EFF(5),t.nI1(6,"translate"),t.nrm(7,"app-page-help-text",9),t.k0s()()(),t.j41(8,"div",10)(9,"div",11)(10,"form",12)(11,"div",13)(12,"div",14)(13,"div",15)(14,"label"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"input",16,0),t.bIt("change",function(){t.eBV(c);const I=t.sdS(18);return t.Njj(n.upload(I.files))}),t.k0s(),t.DNE(19,Dn,2,1,"div",17)(20,Rn,2,1,"div",17),t.k0s()(),t.j41(21,"div",14)(22,"div",15)(23,"label"),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.nrm(26,"input",18),t.DNE(27,In,2,1,"div",17),t.k0s()(),t.j41(28,"div",14)(29,"div",15)(30,"label"),t.EFF(31),t.nI1(32,"translate"),t.k0s(),t.j41(33,"mat-select",19)(34,"mat-option"),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.DNE(37,yn,4,6,"mat-option",20),t.k0s(),t.DNE(38,Fn,2,1,"div",17),t.k0s()(),t.j41(39,"div",14)(40,"div",15)(41,"label"),t.EFF(42),t.nI1(43,"translate"),t.k0s(),t.j41(44,"mat-select",21),t.DNE(45,xn,3,5,"mat-option",20),t.k0s()()(),t.j41(46,"div",22)(47,"div",15)(48,"label"),t.EFF(49),t.nI1(50,"translate"),t.k0s(),t.j41(51,"textarea",23),t.EFF(52,"        "),t.k0s()()(),t.j41(53,"div",14)(54,"div",15)(55,"label"),t.EFF(56),t.nI1(57,"translate"),t.k0s(),t.j41(58,"mat-select",24)(59,"mat-option"),t.EFF(60),t.nI1(61,"translate"),t.k0s(),t.DNE(62,Mn,3,5,"mat-option",20),t.k0s()()(),t.j41(63,"div",14),t.DNE(64,An,9,4,"div",25),t.k0s(),t.DNE(65,Un,11,11,"div",26)(66,Kn,11,11,"div",26),t.k0s(),t.j41(67,"div",13)(68,"div",27),t.DNE(69,qn,4,3,"button",28),t.j41(70,"button",29),t.nrm(71,"i-feather",30),t.EFF(72),t.nI1(73,"translate"),t.k0s()()()()()()()()}2&a&&(t.R7$(5),t.SpI("",t.bMT(6,23,"ADD_DOCUMENT")," "),t.R7$(5),t.Y8G("formGroup",n.documentForm),t.R7$(5),t.JRh(t.bMT(16,25,"DOCUMENT_UPLOAD")),t.R7$(4),t.Y8G("ngIf",(n.documentForm.get("url").touched||n.documentForm.get("url").dirty)&&n.documentForm.get("url").errors),t.R7$(),t.Y8G("ngIf",(n.documentForm.get("extension").touched||n.documentForm.get("extension").dirty)&&n.documentForm.get("extension").errors),t.R7$(4),t.JRh(t.bMT(25,27,"NAME")),t.R7$(3),t.Y8G("ngIf",n.documentForm.get("name").touched&&n.documentForm.get("name").errors),t.R7$(4),t.JRh(t.bMT(32,29,"CATEGORY")),t.R7$(4),t.SpI("-- ",t.bMT(36,31,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.hierarchicalCategories),t.R7$(),t.Y8G("ngIf",n.documentForm.get("categoryId").touched&&n.documentForm.get("categoryId").errors),t.R7$(4),t.JRh(t.bMT(43,33,"STORAGE")),t.R7$(3),t.Y8G("ngForOf",n.storageSettings),t.R7$(4),t.JRh(t.bMT(50,35,"DESCRIPTION")),t.R7$(7),t.JRh(t.bMT(57,37,"DOCUMENT_STATUS")),t.R7$(4),t.SpI("-- ",t.bMT(61,39,"NONE")," --"),t.R7$(2),t.Y8G("ngForOf",n.documentStatues),t.R7$(2),t.Y8G("ngForOf",n.documentMetaTagsArray.controls),t.R7$(),t.Y8G("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"),t.R7$(),t.Y8G("hasClaim","ALL_DOCUMENTS_SHARE_DOCUMENT"),t.R7$(3),t.Y8G("hasClaim","all_documents_create_document"),t.R7$(),t.Y8G("routerLink",t.lJ4(43,bn)),t.R7$(2),t.SpI(" ",t.bMT(73,41,"CANCEL")," "))},dependencies:[k.Sq,k.bT,k.B3,E.Wk,v.qT,v.me,v.BC,v.cb,v.j4,v.JD,v.$R,v.v8,nt.VO,nt.$2,ht.wT,at.Vh,at.bZ,J.i,Y.J,pt.So,X.X,H.D9,ie.K],changeDetection:0})}return i})();function ta(i,s){1&i&&(t.j41(0,"div",2)(1,"div",3)(2,"span",4),t.EFF(3,"Loading..."),t.k0s()()())}let ve=(()=>{class i extends V.${toastrService;documentService;router;commonService;translationService;documentForm;loading=!1;documentSource;constructor(e,a,n,c,T){super(),this.toastrService=e,this.documentService=a,this.router=n,this.commonService=c,this.translationService=T}ngOnInit(){}saveDocument(e){this.loading=!0,this.sub$.sink=this.documentService.addDocument(e).subscribe({next:a=>{this.addDocumentTrail(a.id)},error:a=>{this.loading=!1}})}addDocumentTrail(e){const a={documentId:e,operationName:x.X.Created.toString()};this.sub$.sink=this.commonService.addDocumentAuditTrail(a).subscribe(n=>{this.loading=!1,this.toastrService.success(this.translationService.getValue("DOCUMENT_SAVE_SUCCESSFULLY")),this.router.navigate(["/documents"])})}static \u0275fac=function(a){return new(a||i)(t.rXU(tt.tw),t.rXU(dt.D),t.rXU(E.Ix),t.rXU(et.h),t.rXU(it.L))};static \u0275cmp=t.VBU({type:i,selectors:[["app-document-manage"]],features:[t.Vt3],decls:2,vars:1,consts:[[3,"onSaveDocument"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(a,n){1&a&&(t.j41(0,"app-document-manage-presentation",0),t.bIt("onSaveDocument",function(T){return n.saveDocument(T)}),t.k0s(),t.DNE(1,ta,4,0,"div",1)),2&a&&(t.R7$(),t.Y8G("ngIf",n.loading))},dependencies:[k.bT,Zn]})}return i})();const ea=i=>({color:i});function ia(i,s){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"mat-checkbox",44),t.bIt("change",function(n){t.eBV(e);const c=t.XpG(2);return t.Njj(n?c.masterToggle():null)}),t.k0s(),t.bVm()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())}}function na(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",46),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.onSharedSelectDocument())}),t.j41(3,"mat-icon"),t.EFF(4,"share"),t.k0s()()}2&i&&(t.FS9("matTooltip",t.bMT(1,2,"CLICK_HERE_TO_SHARED_SELECT_DOCUMENTS")),t.FS9("aria-label",t.bMT(2,4,"SHARE")))}function aa(i,s){1&i&&(t.qex(0),t.DNE(1,na,5,6,"button",45),t.bVm()),2&i&&(t.R7$(),t.Y8G("hasClaim","all_documents_share_document"))}function oa(i,s){if(1&i&&(t.j41(0,"th",42),t.DNE(1,ia,2,2,"ng-container",43)(2,aa,2,1,"ng-container",43),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.selection.isEmpty()),t.R7$(),t.Y8G("ngIf",!e.selection.isEmpty())}}function ra(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",47)(1,"mat-checkbox",48),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())})("change",function(n){const c=t.eBV(e).$implicit,T=t.XpG();return t.Njj(n?T.selection.toggle(c):null)}),t.k0s()()}if(2&i){const e=s.$implicit,a=t.XpG();t.R7$(),t.Y8G("checked",a.selection.isSelected(e))}}function sa(i,s){1&i&&(t.j41(0,"th",42),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION")," "))}function ca(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",55),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.removeDocumentPageIndexing(n))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"REMOVE_PAGE_INDEXING")," "))}function la(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",55),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.editDocument(n))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"EDIT")," "))}function da(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.manageDocumentPermission(n))}),t.j41(1,"mat-icon"),t.EFF(2,"share"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"SHARE")," "))}function ma(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.onCreateShareableLink(n))}),t.j41(1,"mat-icon"),t.EFF(2,"link"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"GET_SHAREABLE_LINK")," "))}function pa(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.downloadDocument(n))}),t.j41(1,"mat-icon"),t.EFF(2,"download"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"DOWNLOAD")," "))}function ua(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.uploadNewVersion(n))}),t.j41(1,"mat-icon"),t.EFF(2,"upload"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"UPLOAD_NEW_VERSION_FILE")," "))}function ha(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",55),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.onVersionHistoryClick(n))}),t.j41(1,"mat-icon"),t.EFF(2," history"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"VERSION_HISOTRY")," "))}function _a(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.addComment(n))}),t.j41(1,"mat-icon"),t.EFF(2," chat"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"COMMENT")," "))}function ba(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.addReminder(n))}),t.j41(1,"mat-icon"),t.EFF(2,"notifications"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"ADD_REMINDER")," "))}function ga(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,c=t.XpG();return t.Njj(c.sendEmail(n))}),t.j41(1,"mat-icon"),t.EFF(2,"forward_to_inbox"),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.k0s()}2&i&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"SEND_EMAIL")," "))}function fa(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",47)(1,"button",49)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,1),t.DNE(6,ca,5,3,"button",50)(7,la,5,3,"button",50)(8,da,5,3,"button",51)(9,ma,5,3,"button",51),t.j41(10,"button",52),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onDocumentView(n))}),t.j41(11,"mat-icon"),t.EFF(12,"visibility"),t.k0s(),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.DNE(15,pa,5,3,"button",53)(16,ua,5,3,"button",51)(17,ha,5,3,"button",54)(18,_a,5,3,"button",53)(19,ba,5,3,"button",53)(20,ga,5,3,"button",53),t.k0s()()}if(2&i){const e=t.sdS(5);t.R7$(),t.Y8G("matMenuTriggerFor",e),t.R7$(5),t.Y8G("hasClaim","all_documents_edit_document"),t.R7$(),t.Y8G("hasClaim","all_documents_edit_document"),t.R7$(),t.Y8G("hasClaim","all_documents_share_document"),t.R7$(),t.Y8G("hasClaim","all_documents_create_shareable_link"),t.R7$(4),t.SpI(" ",t.bMT(14,12,"VIEW")," "),t.R7$(2),t.Y8G("hasClaim","all_documents_download_document"),t.R7$(),t.Y8G("hasClaim","all_documents_upload_new_version"),t.R7$(),t.Y8G("hasClaim","all_documents_view_version_history"),t.R7$(),t.Y8G("hasClaim","all_documents_add_comment"),t.R7$(),t.Y8G("hasClaim","all_documents_add_reminder"),t.R7$(),t.Y8G("hasClaim","all_documents_send_email")}}function va(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"NAME")," "))}function Da(i,s){if(1&i){const e=t.RV6();t.j41(0,"td",47)(1,"a",57),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.onDocumentView(n))}),t.EFF(2),t.k0s()()}if(2&i){const e=s.$implicit;t.R7$(2),t.JRh(e.name)}}function Ta(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_CATEGORY")," "))}function Ra(i,s){if(1&i&&(t.j41(0,"td",47),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",e.categoryName," ")}}function Ca(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DOCUMENT_STATUS")," "))}function Ia(i,s){if(1&i&&(t.j41(0,"td",58),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("ngStyle",t.eq3(2,ea,null==e.documentStatus?null:e.documentStatus.colorCode)),t.R7$(),t.SpI(" ",null==e.documentStatus?null:e.documentStatus.name," ")}}function Ea(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"STORAGE")," "))}function ka(i,s){if(1&i&&(t.j41(0,"td",47),t.EFF(1),t.nI1(2,"storageType"),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.storageType,e.storageSettingName)," ")}}function ya(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CREATED_DATE")," "))}function Sa(i,s){if(1&i&&(t.j41(0,"td",47),t.EFF(1),t.nI1(2,"utcToLocalTime"),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,null==e?null:e.createdDate,"shortDate")," ")}}function Fa(i,s){1&i&&(t.j41(0,"th",56),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"CREATED_BY")," "))}function xa(i,s){if(1&i&&(t.j41(0,"td",47),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.R7$(),t.SpI(" ",null==e?null:e.createdBy," ")}}function Ma(i,s){1&i&&(t.j41(0,"tr")(1,"td",59)(2,"div",60)(3,"b"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()()),2&i&&(t.R7$(4),t.SpI(" ",t.bMT(5,1,"NO_DATA_FOUND"),""))}function wa(i,s){1&i&&t.nrm(0,"tr",61)}function ja(i,s){1&i&&t.nrm(0,"tr",62)}function Na(i,s){1&i&&(t.j41(0,"div",63)(1,"div",64)(2,"span",65),t.EFF(3,"Loading..."),t.k0s()()())}const $a=[{path:"",component:pn,data:{claimType:"all_documents_view_documents"},canActivate:[B.q]},{path:"deep-search",component:(()=>{class i extends V.${documentService;commonDialogService;dialog;overlay;clonerService;translationService;commonService;toastrService;displayedColumns=["select","action","name","categoryName","documentStatus","storageType","createdDate","createdBy"];footerToDisplayed=["footer"];isLoadingResults=!1;dataSource=[];searchQuery="";isExactMatch=!1;selection=new o.CB(!0,[]);constructor(e,a,n,c,T,I,L,w){super(),this.documentService=e,this.commonDialogService=a,this.dialog=n,this.overlay=c,this.clonerService=T,this.translationService=I,this.commonService=L,this.toastrService=w}ngOnInit(){}ngAfterViewInit(){}isAllSelected(){return this.selection.selected.length===this.dataSource.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.forEach(e=>this.selection.select(e))}searchDocuments(){if(this.searchQuery){this.isLoadingResults=!0;let e=this.searchQuery.trim();this.isExactMatch&&(e=`"${e}"`),this.sub$.sink=this.documentService.getDocumentsByDeepSearch(e).subscribe({next:a=>{this.isLoadingResults=!1,a.length>0?this.dataSource=[...a]:(this.dataSource=[],this.toastrService.info(`${this.translationService.getValue("NO_DATA_FOUND")}`))},error:a=>{this.dataSource=[],this.isLoadingResults=!1}})}}removeDocumentPageIndexing(e){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_WANT_TO_REMOVE_DOCUMENT_PAGE_INDEXING")} :: ${e.name}`,this.translationService.getValue("DEEP_SEARCH_REMOVE_NOTE")).subscribe(a=>{a&&(this.sub$.sink=this.documentService.removePageIndexing(e.id).subscribe(n=>{n&&(this.searchDocuments(),this.toastrService.success(this.translationService.getValue("DOCUMENT_PAGE_INDEXING_IS_DELETED")))}))})}editDocument(e){const n=this.dialog.open(yt,{width:"60vw",data:Object.assign({},{document:e,categories:[],documentStatuses:[]})});this.sub$.sink=n.afterClosed().subscribe(c=>{})}addComment(e){const a=this.dialog.open(j.g,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{})}manageDocumentPermission(e){this.dialog.open(St.C,{data:e,width:"80vw",maxHeight:"80vh"})}onSharedSelectDocument(){this.dialog.open(Q,{data:this.selection.selected,width:"60vw",maxHeight:"80vh"}).afterClosed().subscribe(()=>{this.selection.clear()})}uploadNewVersion(e){const a=this.dialog.open(se,{width:"800px",maxHeight:"70vh",data:Object.assign({},e)});this.sub$.sink=a.afterClosed().subscribe(n=>{})}downloadDocument(e){const a={documentId:e.id,name:"",extension:e.url.split(".")[1],isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1};this.sub$.sink=this.commonService.downloadDocument(a).subscribe({next:n=>{n.type===A.hv.Response&&(this.addDocumentTrail(e.id,x.X.Download.toString()),this.downloadFile(n,e))},error:n=>{this.toastrService.error(this.translationService.getValue("ERROR_WHILE_DOWNLOADING_DOCUMENT"))}})}addDocumentTrail(e,a){this.sub$.sink=this.commonService.addDocumentAuditTrail({documentId:e,operationName:a}).subscribe(c=>{})}sendEmail(e){this.dialog.open(me,{data:e,width:"80vw",maxHeight:"80vh"})}addReminder(e){this.dialog.open(oe,{data:e,width:"80vw",maxHeight:"80vh"})}onDocumentView(e){const n=e.url.split(".")[1];this.overlay.open(q.X,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:e.id,name:e.name,extension:n,isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1}})}downloadFile(e,a){const n=new Blob([e.body],{type:e.body.type}),c=document.createElement("a");c.setAttribute("style","display:none;"),document.body.appendChild(c),c.download=a.name,c.href=URL.createObjectURL(n),c.target="_blank",c.click(),document.body.removeChild(c)}onVersionHistoryClick(e){let a=this.clonerService.deepClone(e);this.sub$.sink=this.documentService.getDocumentVersion(e.id).subscribe(n=>{a.documentVersions=n,this.dialog.open(ce.V,{maxWidth:"80vw",panelClass:"full-width-dialog",data:Object.assign({},a)}).afterClosed().subscribe(T=>{})})}onCreateShareableLink(e){this.sub$.sink=this.documentService.getDocumentShareableLink(e.id).subscribe(a=>{this.dialog.open(pe.o,{width:"500px",data:{document:e,link:a}})})}static \u0275fac=function(a){return new(a||i)(t.rXU(dt.D),t.rXU(ue.Z),t.rXU(F.bZ),t.rXU(he.j),t.rXU(_e.h),t.rXU(it.L),t.rXU(et.h),t.rXU(tt.tw))};static \u0275cmp=t.VBU({type:i,selectors:[["app-deep-document-search"]],features:[t.Vt3],decls:69,vars:26,consts:[["input",""],["menu","matMenu"],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"col-md-6","d-flex","justify-content-end","mb-2"],[1,"card"],[1,"header"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row"],[1,"flex-fill"],["name","form","novalidate",""],[1,"input-group"],["name","searchText","id","txtSearch","type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["type","submit","id","txtSearch",1,"btn","btn-primary",3,"click"],[1,"pt-2"],[1,"p-1"],["color","primary",3,"ngModelChange","ngModel"],[1,"d-flex","flex-wrap","flex-column","flex-sm-row","d-none","d-sm-block"],[1,"text-danger"],[1,"body"],[1,"table-responsive"],[1,"grid-height-small"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","select"],["class","table-column-fix-30","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","categoryName"],["matColumnDef","documentStatus"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","storageType"],["matColumnDef","createdDate"],["matColumnDef","createdBy"],[4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["mat-header-cell","",1,"table-column-fix-30"],[4,"ngIf"],["color","primary",3,"change","checked","indeterminate"],["mat-mini-fab","","class","btn btn-primary btn-sm","matTooltipPosition","above",3,"matTooltip","aria-label","click",4,"hasClaim"],["mat-mini-fab","","matTooltipPosition","above",1,"btn","btn-primary","btn-sm",3,"click","matTooltip","aria-label"],["mat-cell",""],["color","primary",3,"click","change","checked"],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm","type","button",3,"click",4,"hasClaim"],["mat-menu-item","","type","button",1,"btn","btn-light","btn-sm",3,"click"],["class","btn btn-light btn-sm","mat-menu-item","","type","button",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-cell",""],[1,"doc-link",3,"click"],["mat-cell","",3,"ngStyle"],["colspan","8"],[1,"m-2"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(a,n){if(1&a){const c=t.RV6();t.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.nrm(7,"app-page-help-text",7),t.k0s(),t.nrm(8,"div",8),t.k0s(),t.j41(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"form",13)(14,"div",14)(15,"input",15,0),t.nI1(17,"translate"),t.mxI("ngModelChange",function(I){return t.eBV(c),t.DH7(n.searchQuery,I)||(n.searchQuery=I),t.Njj(I)}),t.k0s(),t.j41(18,"button",16),t.bIt("click",function(){return t.eBV(c),t.Njj(n.searchDocuments())}),t.j41(19,"mat-icon",17),t.EFF(20,"search"),t.k0s(),t.EFF(21),t.nI1(22,"translate"),t.k0s()()()()(),t.j41(23,"div",11)(24,"div",18)(25,"mat-checkbox",19),t.mxI("ngModelChange",function(I){return t.eBV(c),t.DH7(n.isExactMatch,I)||(n.isExactMatch=I),t.Njj(I)}),t.j41(26,"b"),t.EFF(27),t.nI1(28,"translate"),t.k0s()()()(),t.j41(29,"div",20)(30,"div",12)(31,"span",21)(32,"b"),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.EFF(35),t.nI1(36,"translate"),t.k0s()()()(),t.j41(37,"div",22)(38,"div",23)(39,"div",24)(40,"table",25),t.qex(41,26),t.DNE(42,oa,3,2,"th",27)(43,ra,2,1,"td",28),t.bVm(),t.qex(44,29),t.DNE(45,sa,3,3,"th",27)(46,fa,21,14,"td",28),t.bVm(),t.qex(47,30),t.DNE(48,va,3,3,"th",31)(49,Da,3,1,"td",28),t.bVm(),t.qex(50,32),t.DNE(51,Ta,3,3,"th",31)(52,Ra,2,1,"td",28),t.bVm(),t.qex(53,33),t.DNE(54,Ca,3,3,"th",31)(55,Ia,2,4,"td",34),t.bVm(),t.qex(56,35),t.DNE(57,Ea,3,3,"th",31)(58,ka,3,4,"td",28),t.bVm(),t.qex(59,36),t.DNE(60,ya,3,3,"th",31)(61,Sa,3,4,"td",28),t.bVm(),t.qex(62,37),t.DNE(63,Fa,3,3,"th",31)(64,xa,2,1,"td",28),t.bVm(),t.DNE(65,Ma,6,3,"tr",38)(66,wa,1,0,"tr",39)(67,ja,1,0,"tr",40),t.k0s()()()()()()(),t.DNE(68,Na,4,0,"div",41)}2&a&&(t.R7$(5),t.JRh(t.bMT(6,14,"DEEP_SEARCH")),t.R7$(2),t.Y8G("code","DEEP_SEARCH"),t.R7$(8),t.FS9("placeholder",t.bMT(17,16,"DEEP_SEARCH_TEXTBOX_PLACEHOLDER")),t.R50("ngModel",n.searchQuery),t.R7$(6),t.SpI(" ",t.bMT(22,18,"SEARCH")," "),t.R7$(4),t.R50("ngModel",n.isExactMatch),t.R7$(2),t.SpI(" ",t.bMT(28,20,"ISEXACTMATCH"),""),t.R7$(6),t.SpI("",t.bMT(34,22,"NOTE"),":"),t.R7$(2),t.SpI(" ",t.bMT(36,24,"DEEP_SEARCH_NOTE")," "),t.R7$(5),t.Y8G("dataSource",n.dataSource),t.R7$(26),t.Y8G("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("ngIf",n.isLoadingResults))},dependencies:[k.bT,k.B3,v.qT,v.me,v.BC,v.cb,M.Zl,M.tL,M.ji,M.cC,M.YV,M.iL,M.KS,M.$R,M.YZ,M.NB,M.ky,U.An,O.iY,O.$0,J.i,Y.J,pt.So,wt.kk,wt.fb,wt.Cp,ee.oV,v.vS,v.cV,H.D9,ie.K,ge.o]})}return i})(),data:{claimType:"deep_search_deep_search"},canActivate:[B.q]},{path:"add",component:ve,data:{claimType:"all_documents_create_document"},canActivate:[B.q]},{path:":id",component:ve,resolve:{document:_n},data:{claimType:"all_documents_edit_document"},canActivate:[B.q]},{path:"permission",data:{claimType:"all_documents_share_document"},loadChildren:()=>Promise.resolve().then(u.bind(u,4155)).then(i=>i.DocumentPermissionModule)}];let Pa=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[E.iI.forChild($a),E.iI]})}return i})();var Ga=u(450),La=u(9631),Va=u(3887),Oa=u(7575),Ba=u(4155),Ua=u(3679);let Ya=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[k.MD,Pa,v.X1,M.tP,F.hM,nt.Ve,Ga.mV,S.NQ,K.Ou,La.fS,at.X6,U.m_,O.Hl,Va.G,Oa.PO,Ba.DocumentPermissionModule,pt.g7,wt.Cn,de.w,Mt.Wk,bt.RG,X.M,It.c9,ee.uc,Ua.Y,v.YN,Jt.MY]})}return i})()},6471:(Kt,lt,u)=>{u.d(lt,{Jl:()=>st,Jo:()=>vt,YN:()=>pt});var k=u(9888),E=u(7336),B=u(177),o=u(4438),A=u(6600),t=u(1413),K=u(7786),S=u(6977),x=u(9172),G=u(5558),q=u(8203);u(9417),u(3719);const z=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],Z=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function _t(g,$){1&g&&(o.j41(0,"span",3),o.SdG(1,1),o.k0s())}function V(g,$){1&g&&(o.j41(0,"span",6),o.SdG(1,2),o.k0s())}const U=["*"],J=new o.nKC("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[E.Fm]})}),Y=new o.nKC("MatChipAvatar"),X=new o.nKC("MatChipTrailingIcon"),H=new o.nKC("MatChipRemove"),gt=new o.nKC("MatChip");let mt=(()=>{class g{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(r){this._disabled=r}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(r,h){this._elementRef=r,this._parentChip=h,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,"BUTTON"===r.nativeElement.nodeName&&r.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(r){!this.disabled&&this.isInteractive&&this._isPrimary&&(r.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(r){(r.keyCode===E.Fm||r.keyCode===E.t6)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(r.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static{this.\u0275fac=function(h){return new(h||g)(o.rXU(o.aKT),o.rXU(gt))}}static{this.\u0275dir=o.FsC({type:g,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(h,l){1&h&&o.bIt("click",function(R){return l._handleClick(R)})("keydown",function(R){return l._handleKeydown(R)}),2&h&&(o.BMQ("tabindex",l._getTabindex())("disabled",l._getDisabledAttribute())("aria-disabled",l.disabled),o.AVh("mdc-evolution-chip__action--primary",l._isPrimary)("mdc-evolution-chip__action--presentational",!l.isInteractive)("mdc-evolution-chip__action--trailing",!l._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",o.L39],tabIndex:[2,"tabIndex","tabIndex",r=>null==r?-1:(0,o.Udg)(r)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[o.GFd]})}}return g})(),$t=0,st=(()=>{class g{_hasFocus(){return this._hasFocusInternal}get value(){return void 0!==this._value?this._value:this._textElement.textContent.trim()}set value(r){this._value=r}get disabled(){return this._disabled||this._chipListDisabled}set disabled(r){this._disabled=r}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(r){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,r)}constructor(r,h,l,C,R,ot,Q){this._changeDetectorRef=r,this._elementRef=h,this._ngZone=l,this._focusMonitor=C,this._globalRippleOptions=Q,this._onFocus=new t.B,this._onBlur=new t.B,this.role=null,this._hasFocusInternal=!1,this.id="mat-mdc-chip-"+$t++,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this._chipListDisabled=!1,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this._disabled=!1,this.removed=new o.bkB,this.destroyed=new o.bkB,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=(0,o.WQX)(A.Ej),this._injector=(0,o.WQX)(o.zZn),this._document=R,this._animationsDisabled="NoopAnimations"===ot,this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){const r=this._elementRef.nativeElement;this._isBasicChip=r.hasAttribute(this.basicChipAttrName)||r.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=(0,K.h)(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!(!this.trailingIcon&&!this.removeIcon)}_handleKeydown(r){(r.keyCode===E.G_&&!r.repeat||r.keyCode===E.SJ)&&(r.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(r){return this._getActions().find(h=>{const l=h._elementRef.nativeElement;return l===r||l.contains(r)})}_getActions(){const r=[];return this.primaryAction&&r.push(this.primaryAction),this.removeIcon&&r.push(this.removeIcon),this.trailingIcon&&r.push(this.trailingIcon),r}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{const h=null!==r;h!==this._hasFocusInternal&&(this._hasFocusInternal=h,h?this._onFocus.next({chip:this}):(0,o.mal)(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}static{this.\u0275fac=function(h){return new(h||g)(o.rXU(o.gRc),o.rXU(o.aKT),o.rXU(o.SKi),o.rXU(k.FN),o.rXU(B.qQ),o.rXU(o.bc$,8),o.rXU(A.$E,8))}}static{this.\u0275cmp=o.VBU({type:g,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(h,l,C){if(1&h&&(o.wni(C,Y,5),o.wni(C,X,5),o.wni(C,H,5),o.wni(C,Y,5),o.wni(C,X,5),o.wni(C,H,5)),2&h){let R;o.mGM(R=o.lsd())&&(l.leadingIcon=R.first),o.mGM(R=o.lsd())&&(l.trailingIcon=R.first),o.mGM(R=o.lsd())&&(l.removeIcon=R.first),o.mGM(R=o.lsd())&&(l._allLeadingIcons=R),o.mGM(R=o.lsd())&&(l._allTrailingIcons=R),o.mGM(R=o.lsd())&&(l._allRemoveIcons=R)}},viewQuery:function(h,l){if(1&h&&o.GBs(mt,5),2&h){let C;o.mGM(C=o.lsd())&&(l.primaryAction=C.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(h,l){1&h&&o.bIt("keydown",function(R){return l._handleKeydown(R)}),2&h&&(o.Mr5("id",l.id),o.BMQ("role",l.role)("aria-label",l.ariaLabel),o.HbH("mat-"+(l.color||"primary")),o.AVh("mdc-evolution-chip",!l._isBasicChip)("mdc-evolution-chip--disabled",l.disabled)("mdc-evolution-chip--with-trailing-action",l._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",l.leadingIcon)("mdc-evolution-chip--with-primary-icon",l.leadingIcon)("mdc-evolution-chip--with-avatar",l.leadingIcon)("mat-mdc-chip-with-avatar",l.leadingIcon)("mat-mdc-chip-highlighted",l.highlighted)("mat-mdc-chip-disabled",l.disabled)("mat-mdc-basic-chip",l._isBasicChip)("mat-mdc-standard-chip",!l._isBasicChip)("mat-mdc-chip-with-trailing-icon",l._hasTrailingIcon())("_mat-animation-noopable",l._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",o.L39],highlighted:[2,"highlighted","highlighted",o.L39],disableRipple:[2,"disableRipple","disableRipple",o.L39],disabled:[2,"disabled","disabled",o.L39]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[o.Jv_([{provide:gt,useExisting:g}]),o.GFd,o.aNF],ngContentSelectors:Z,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(h,l){1&h&&(o.NAR(z),o.nrm(0,"span",0),o.j41(1,"span",1)(2,"span",2),o.DNE(3,_t,2,0,"span",3),o.j41(4,"span",4),o.SdG(5),o.nrm(6,"span",5),o.k0s()()(),o.DNE(7,V,2,0,"span",6)),2&h&&(o.R7$(2),o.Y8G("isInteractive",!1),o.R7$(),o.vxM(l.leadingIcon?3:-1),o.R7$(4),o.vxM(l._hasTrailingIcon()?7:-1))},dependencies:[mt],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return g})(),vt=(()=>{class g{get chipFocusChanges(){return this._getChipStream(r=>r._onFocus)}get chipDestroyedChanges(){return this._getChipStream(r=>r.destroyed)}get chipRemovedChanges(){return this._getChipStream(r=>r.removed)}get disabled(){return this._disabled}set disabled(r){this._disabled=r,this._syncChipsState()}get empty(){return!this._chips||0===this._chips.length}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(r){this._explicitRole=r}get focused(){return this._hasFocusedChip()}constructor(r,h,l){this._elementRef=r,this._changeDetectorRef=h,this._dir=l,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new t.B,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new o.rOR}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(r=>r._hasFocus())}_syncChipsState(){this._chips?.forEach(r=>{r._chipListDisabled=this._disabled,r._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(r){this._originatesFromChip(r)&&this._keyManager.onKeydown(r)}_isValidIndex(r){return r>=0&&r<this._chips.length}_allowFocusEscape(){const r=this._elementRef.nativeElement.tabIndex;-1!==r&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=r))}_getChipStream(r){return this._chips.changes.pipe((0,x.Z)(null),(0,G.n)(()=>(0,K.h)(...this._chips.map(r))))}_originatesFromChip(r){let h=r.target;for(;h&&h!==this._elementRef.nativeElement;){if(h.classList.contains("mat-mdc-chip"))return!0;h=h.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe((0,x.Z)(this._chips)).subscribe(r=>{const h=[];r.forEach(l=>l._getActions().forEach(C=>h.push(C))),this._chipActions.reset(h),this._chipActions.notifyOnChanges()}),this._keyManager=new k.Bu(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(r=>this._skipPredicate(r)),this.chipFocusChanges.pipe((0,S.Q)(this._destroyed)).subscribe(({chip:r})=>{const h=r._getSourceAction(document.activeElement);h&&this._keyManager.updateActiveItem(h)}),this._dir?.change.pipe((0,S.Q)(this._destroyed)).subscribe(r=>this._keyManager.withHorizontalOrientation(r))}_skipPredicate(r){return!r.isInteractive||r.disabled}_trackChipSetChanges(){this._chips.changes.pipe((0,x.Z)(null),(0,S.Q)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe((0,S.Q)(this._destroyed)).subscribe(r=>{const l=this._chips.toArray().indexOf(r.chip);this._isValidIndex(l)&&r.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=l)})}_redirectDestroyedChipFocus(){if(null!=this._lastDestroyedFocusedChipIndex){if(this._chips.length){const r=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),h=this._chips.toArray()[r];h.disabled?1===this._chips.length?this.focus():this._keyManager.setPreviousItemActive():h.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static{this.\u0275fac=function(h){return new(h||g)(o.rXU(o.aKT),o.rXU(o.gRc),o.rXU(q.dS,8))}}static{this.\u0275cmp=o.VBU({type:g,selectors:[["mat-chip-set"]],contentQueries:function(h,l,C){if(1&h&&o.wni(C,st,5),2&h){let R;o.mGM(R=o.lsd())&&(l._chips=R)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(h,l){1&h&&o.bIt("keydown",function(R){return l._handleKeydown(R)}),2&h&&o.BMQ("role",l.role)},inputs:{disabled:[2,"disabled","disabled",o.L39],role:"role",tabIndex:[2,"tabIndex","tabIndex",r=>null==r?0:(0,o.Udg)(r)]},standalone:!0,features:[o.GFd,o.aNF],ngContentSelectors:U,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(h,l){1&h&&(o.NAR(),o.j41(0,"div",0),o.SdG(1),o.k0s())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}}return g})(),pt=(()=>{class g{static{this.\u0275fac=function(h){return new(h||g)}}static{this.\u0275mod=o.$C({type:g})}static{this.\u0275inj=o.G2t({providers:[A.es,{provide:J,useValue:{separatorKeyCodes:[E.Fm]}}],imports:[A.yE,A.pZ,A.yE]})}}return g})()}}]);