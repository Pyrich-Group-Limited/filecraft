"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[351],{1152:(g,m,n)=>{n.d(m,{U:()=>d});var l=n(3824);class d extends l.u{id="";createdBy="";categoryId="";documentStatusId="";storageSettingId="";createDate}},3824:(g,m,n)=>{n.d(m,{u:()=>l});class l{fields="";orderBy="";searchQuery="";pageSize=30;skip=0;name="";totalCount=0;metaTags=""}},8351:(g,m,n)=>{n.r(m),n.d(m,{NotificationModule:()=>dt});var l=n(177),d=n(1188),v=n(3870),f=n(6695),u=n(2042),I=n(1152),p=function(e){return e[e.REMINDER=0]="REMINDER",e[e.SHARE_USER=1]="SHARE_USER",e}(p||{}),b=n(7786),E=n(3726),S=n(8141),D=n(152),N=n(3294),C=n(8),h=n(4412),T=n(7673),F=n(9437),$=n(980);class j{notificationService;notificationsSubject=new h.t([]);responseHeaderSubject=new h.t(null);loadingSubject=new h.t(!1);loading$=this.loadingSubject.asObservable();_count=0;get count(){return this._count}responseHeaderSubject$=this.responseHeaderSubject.asObservable();constructor(o){this.notificationService=o}connect(o){return this.notificationsSubject.asObservable()}disconnect(o){this.notificationsSubject.complete(),this.loadingSubject.complete()}loadNotifications(o){this.loadingSubject.next(!0),this.notificationService.getNotifications(o).pipe((0,F.W)(()=>(0,T.of)([])),(0,$.j)(()=>this.loadingSubject.next(!1))).subscribe(i=>{const a=JSON.parse(i.headers.get("X-Pagination"));this.responseHeaderSubject.next(a);const s=[...i.body];this._count=s.length,this.notificationsSubject.next(s)})}}var y=n(2899),t=n(4438),M=n(3324),O=n(2243),x=n(5794),G=n(7542),L=n(9036),c=n(9159),R=n(5464),U=n(3955),A=n(9519);const V=["input"],H=()=>["footer"],Y=()=>[10,20,30];function B(e,o){1&e&&(t.j41(0,"th",32),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"ACTION")," "))}function w(e,o){if(1&e){const i=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){t.eBV(i);const s=t.XpG().$implicit,r=t.XpG();return t.Njj(r.viewDocument(s))}),t.nrm(1,"i-feather",36),t.j41(2,"span",37),t.EFF(3),t.nI1(4,"translate"),t.k0s()()}2&e&&(t.R7$(3),t.SpI(" ",t.bMT(4,1,"VIEW_DOCUMENT"),""))}function k(e,o){if(1&e&&(t.j41(0,"td",33),t.DNE(1,w,5,3,"button",34),t.k0s()),2&e){const i=o.$implicit;t.R7$(),t.Y8G("ngIf",i.documentId)}}function z(e,o){1&e&&(t.j41(0,"th",38),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"DATE")," "))}function X(e,o){if(1&e&&(t.j41(0,"td",39),t.EFF(1),t.nI1(2,"utcToLocalTime"),t.k0s()),2&e){const i=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,i.createdDate,"full")," ")}}function P(e,o){1&e&&(t.j41(0,"th",40),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"MESSAGE")," "))}function J(e,o){1&e&&(t.j41(0,"span",44),t.EFF(1,"new"),t.k0s())}function W(e,o){if(1&e&&(t.qex(0),t.j41(1,"b"),t.EFF(2),t.k0s(),t.EFF(3),t.nI1(4,"translate"),t.bVm()),2&e){const i=t.XpG().$implicit;t.R7$(2),t.SpI(" ",i.documentName,""),t.R7$(),t.SpI(" ",t.bMT(4,2,"DOCUMENT_PERMISSION_GRANTED_TO_YOU")," ")}}function Q(e,o){if(1&e&&(t.j41(0,"ng-conatainer")(1,"b"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4),t.k0s()),2&e){const i=t.XpG(2).$implicit;t.R7$(2),t.SpI(" ",t.bMT(3,2,"DOCUMENT_NAME"),""),t.R7$(2),t.SpI(" : ",i.documentName," :: ")}}function Z(e,o){if(1&e&&(t.qex(0),t.j41(1,"b"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4," :: "),t.DNE(5,Q,5,4,"ng-conatainer",43),t.EFF(6),t.bVm()),2&e){const i=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,3,"REMINDER")),t.R7$(3),t.Y8G("ngIf",i.documentId),t.R7$(),t.SpI(" ",i.message," ")}}function K(e,o){if(1&e&&(t.j41(0,"td",41),t.DNE(1,J,2,0,"span",42)(2,W,5,4,"ng-container",43)(3,Z,7,5,"ng-container",43),t.k0s()),2&e){const i=o.$implicit;t.R7$(),t.Y8G("ngIf",!i.isRead),t.R7$(),t.Y8G("ngIf",!i.message),t.R7$(),t.Y8G("ngIf",i.message)}}function _(e,o){if(1&e&&(t.j41(0,"td",45),t.nrm(1,"mat-paginator",46),t.k0s()),2&e){const i=t.XpG();t.R7$(),t.Y8G("length",i.notificationResource.totalCount)("pageSize",i.notificationResource.pageSize)("pageSizeOptions",t.lJ4(3,Y))}}function q(e,o){1&e&&t.nrm(0,"tr",47)}function tt(e,o){1&e&&t.nrm(0,"tr",48)}function et(e,o){1&e&&t.nrm(0,"tr",49)}function it(e,o){1&e&&(t.j41(0,"tr")(1,"td",50)(2,"div",51)(3,"b"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()()()),2&e&&(t.R7$(4),t.SpI(" ",t.bMT(5,1,"NO_DATA_FOUND"),""))}function nt(e,o){1&e&&(t.j41(0,"div",52)(1,"div",53)(2,"span",54),t.EFF(3,"Loading..."),t.k0s()()())}const ot=[{path:"",component:(()=>{class e extends C.${notificationService;translationService;toastrService;overlay;dataSource;notifications=[];displayedColumns=["action","createdDate","message"];isLoadingResults=!0;notificationResource;loading$;paginator;sort;input;footerToDisplayed=["footer"];constructor(i,a,s,r){super(),this.notificationService=i,this.translationService=a,this.toastrService=s,this.overlay=r,this.notificationResource=new I.U,this.notificationResource.pageSize=10,this.notificationResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new j(this.notificationService),this.dataSource.loadNotifications(this.notificationResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,b.h)(this.sort.sortChange,this.paginator.page).pipe((0,S.M)(()=>{this.notificationResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.notificationResource.pageSize=this.paginator.pageSize,this.notificationResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadNotifications(this.notificationResource)})).subscribe(),this.sub$.sink=(0,E.R)(this.input.nativeElement,"keyup").pipe((0,D.B)(1e3),(0,N.F)(),(0,S.M)(()=>{this.paginator.pageIndex=0,this.notificationResource.skip=0,this.notificationResource.name=this.input.nativeElement.value,this.dataSource.loadNotifications(this.notificationResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(i=>{i&&(this.notificationResource.pageSize=i.pageSize,this.notificationResource.skip=i.skip,this.notificationResource.totalCount=i.totalCount)})}viewDocument(i){i.notificationsType===p.REMINDER?this.notificationService.checkReminderByDocumentId(i.documentId).subscribe(a=>{a.data?this.previewDocument(i):this.toastrService.error(this.translationService.getValue("YOU_ARE_NOT_AUTHORIZED_TO_VIEW_THIS_REMINDER"))}):i.notificationsType===p.SHARE_USER&&this.notificationService.checkShareUserByDocumentId(i.documentId).subscribe(a=>{a.data?this.previewDocument(i):this.toastrService.error(this.translationService.getValue("YOU_ARE_NOT_AUTHORIZED_TO_VIEW_THIS_DOCUMENT"))})}previewDocument(i){this.sub$.sink=this.notificationService.markAsRead(i.id).subscribe(()=>{});const s=i.url.split(".")[1];this.overlay.open(y.X,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:i.documentId,name:i.documentName,extension:s,isVersion:!1,isFromPublicPreview:!1,isPreviewDownloadEnabled:!1}})}static \u0275fac=function(a){return new(a||e)(t.rXU(M.J),t.rXU(O.L),t.rXU(x.tw),t.rXU(G.j))};static \u0275cmp=t.VBU({type:e,selectors:[["app-notification-list"]],viewQuery:function(a,s){if(1&a&&(t.GBs(f.iy,5),t.GBs(u.B4,5),t.GBs(V,5)),2&a){let r;t.mGM(r=t.lsd())&&(s.paginator=r.first),t.mGM(r=t.lsd())&&(s.sort=r.first),t.mGM(r=t.lsd())&&(s.input=r.first)}},features:[t.Vt3],decls:36,vars:17,consts:[["input",""],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"card"],[1,"header"],[1,"row","m-2"],[1,"col-md-4"],[1,"form-control",3,"placeholder"],[1,"body"],[1,"table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["class","table-column-200","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-200","mat-cell","",4,"matCellDef"],["matColumnDef","message"],["class","table-column-500","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","table-column-500","mat-cell","",4,"matCellDef"],["matColumnDef","footer"],["mat-footer-cell","","colspan","4",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"matNoDataRow"],["class","spinner-container",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","button","class","btn btn-sm btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],["name","eye",1,"small-icon"],[1,"d-none","d-sm-inline"],["mat-header-cell","","mat-sort-header","",1,"table-column-200"],["mat-cell","",1,"table-column-200"],["mat-header-cell","","mat-sort-header","",1,"table-column-500"],["mat-cell","",1,"table-column-500"],["class","badge bg-success",4,"ngIf"],[4,"ngIf"],[1,"badge","bg-success"],["mat-footer-cell","","colspan","4"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],["colspan","4"],[1,"m-2"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(a,s){1&a&&(t.j41(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),t.EFF(5),t.nI1(6,"translate"),t.nrm(7,"app-page-help-text",6),t.k0s()()(),t.j41(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),t.nrm(12,"input",11,0),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"div",12)(16,"div",13)(17,"div",14)(18,"table",15),t.qex(19,16),t.DNE(20,B,3,3,"th",17)(21,k,2,1,"td",18),t.bVm(),t.qex(22,19),t.DNE(23,z,3,3,"th",20)(24,X,3,4,"td",21),t.bVm(),t.qex(25,22),t.DNE(26,P,3,3,"th",23)(27,K,4,3,"td",24),t.bVm(),t.qex(28,25),t.DNE(29,_,2,4,"td",26),t.bVm(),t.DNE(30,q,1,0,"tr",27)(31,tt,1,0,"tr",28)(32,et,1,0,"tr",29)(33,it,6,3,"tr",30),t.k0s()()()()()()(),t.DNE(34,nt,4,0,"div",31),t.nI1(35,"async")),2&a&&(t.R7$(5),t.SpI("",t.bMT(6,10,"NOTIFICATIONS")," "),t.R7$(2),t.Y8G("code","NOTIFICATIONS"),t.R7$(5),t.FS9("placeholder",t.bMT(14,12,"SEARCH_BY_DOCUMENT_NAME_OR_MESSAGE")),t.R7$(6),t.Y8G("dataSource",s.dataSource),t.R7$(12),t.Y8G("matHeaderRowDef",s.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",s.displayedColumns),t.R7$(),t.Y8G("matFooterRowDef",t.lJ4(16,H))("matFooterRowDefSticky",!0),t.R7$(2),t.Y8G("ngIf",t.bMT(35,14,s.dataSource.loading$)))},dependencies:[l.bT,L.J,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.Zq,c.xW,c.KS,c.$R,c.Qo,c.YZ,c.NB,c.iF,c.ky,u.B4,u.aE,f.iy,R.X,l.Jj,U.D9,A.o]})}return e})(),canActivate:[v.q]}];let at=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[d.iI.forChild(ot),d.iI]})}return e})();var st=n(2798),ct=n(450),rt=n(9631),lt=n(3887),mt=n(3679);let dt=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[l.MD,lt.G,at,c.tP,st.Ve,ct.mV,u.NQ,f.Ou,rt.fS,R.M,mt.Y]})}return e})()}}]);