"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[769],{1769:(b,d,a)=>{a.r(d),a.d(d,{ScreenOperationModule:()=>T});var p=a(177),l=a(1188),S=a(3870),O=a(8141),e=a(4438),h=a(2588),f=a(3621),u=a(1776),$=a(8),g=a(9417),m=a(450);function v(r,c){if(1&r&&(e.j41(0,"th",6),e.EFF(1),e.k0s()),2&r){const n=c.$implicit;e.R7$(),e.SpI(" ",n.name," ")}}function F(r,c){if(1&r){const n=e.RV6();e.j41(0,"td")(1,"mat-slide-toggle",7),e.bIt("change",function(o){const i=e.eBV(n).$implicit,s=e.XpG().$implicit,j=e.XpG();return e.Njj(j.onScreenOperationChange(o,s.id,i.id))}),e.k0s()()}if(2&r){const n=c.$implicit,t=e.XpG().$implicit,o=e.XpG();e.R7$(),e.Y8G("checked",o.onCheck(t.id,n.id))}}function M(r,c){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.DNE(3,F,2,1,"td",5),e.k0s()),2&r){const n=c.$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",n.name," "),e.R7$(),e.Y8G("ngForOf",t.operations)}}let I=(()=>{class r extends $.${fb;screens;operations;screenOperations;loading;loadingScreen;loadingOperation;screenOperationForm;addScreenOperation=new e.bkB;deleteScreenOperation=new e.bkB;get screenOperationArray(){return this.screenOperationForm.get("screenOperationArray")}constructor(n){super(),this.fb=n}ngOnInit(){this.createScreenOperationForm()}ngOnChanges(n){}createScreenOperationForm(){this.screenOperationForm=this.fb.group({screenOperationArray:this.fb.array([])})}onCheck(n,t){return!!this.screenOperations.find(i=>i.screenId===n&&i.operationId===t)}patchScreenOperationForm(){this.screens.forEach(n=>{this.operations.forEach(t=>{const o=this.screenOperations.find(s=>s.screenId===n.id&&s.operationId===t.id);let i=null;o&&(i=o.id),this.screenOperationArray.push(this.fb.group({id:[i],screenId:[n.id],screenName:[n.name],operationId:[t.id],operationName:[t.name],flag:!!i}))})})}onScreenOperationChange(n,t,o){if(n.checked)this.addScreenOperation.emit({screenId:t,operationId:o});else{const i=this.screenOperations.find(s=>s.operationId===o&&s.screenId===t);i&&this.deleteScreenOperation.emit(i)}}static \u0275fac=function(t){return new(t||r)(e.rXU(g.ze))};static \u0275cmp=e.VBU({type:r,selectors:[["app-manage-screen-operation-presentation"]],inputs:{screens:"screens",operations:"operations",screenOperations:"screenOperations",loading:"loading",loadingScreen:"loadingScreen",loadingOperation:"loadingOperation"},outputs:{addScreenOperation:"addScreenOperation",deleteScreenOperation:"deleteScreenOperation"},features:[e.Vt3,e.OA$],decls:13,vars:2,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"table","table-bordered"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],[3,"change","checked"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e.EFF(4,"Page Actions"),e.k0s()()()(),e.j41(5,"table",3)(6,"thead")(7,"tr")(8,"th"),e.EFF(9,"#"),e.k0s(),e.DNE(10,v,2,1,"th",4),e.k0s()(),e.j41(11,"tbody"),e.DNE(12,M,4,2,"tr",5),e.k0s()()),2&t&&(e.R7$(10),e.Y8G("ngForOf",o.operations),e.R7$(2),e.Y8G("ngForOf",o.screens))},dependencies:[p.Sq,m.sG],changeDetection:0})}return r})();const y=[{path:"",component:(()=>{class r{screenService;operationService;screenOperationService;screenOperations$;screens$;operations$;loading$;loadingScreen$;loadingOperation$;constructor(n,t,o){this.screenService=n,this.operationService=t,this.screenOperationService=o}ngOnInit(){this.loadingOperation$=this.operationService.loaded$.pipe((0,O.M)(n=>{n||this.getOperations()})),this.operations$=this.operationService.entities$,this.loadingScreen$=this.screenService.loaded$.pipe((0,O.M)(n=>{n||this.getScreens()})),this.screens$=this.screenService.entities$,this.loading$=this.screenOperationService.loaded$,this.screenOperations$=this.screenOperationService.entities$,this.getScreenOperations()}getOperations(){this.operationService.getAll()}getScreens(){this.screenService.getAll()}getScreenOperations(){this.screenOperationService.getAll()}onAddScreenOperation(n){this.screenOperationService.add(n)}onDeleteScreenOperation(n){this.screenOperationService.delete(n.id)}static \u0275fac=function(t){return new(t||r)(e.rXU(h.i),e.rXU(f.n),e.rXU(u.B))};static \u0275cmp=e.VBU({type:r,selectors:[["app-manage-screen-operation"]],decls:7,vars:18,consts:[[3,"addScreenOperation","deleteScreenOperation","screens","operations","screenOperations","loading","loadingScreen","loadingOperation"]],template:function(t,o){1&t&&(e.j41(0,"app-manage-screen-operation-presentation",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.bIt("addScreenOperation",function(s){return o.onAddScreenOperation(s)})("deleteScreenOperation",function(s){return o.onDeleteScreenOperation(s)}),e.k0s()),2&t&&e.Y8G("screens",e.bMT(1,6,o.screens$))("operations",e.bMT(2,8,o.operations$))("screenOperations",e.bMT(3,10,o.screenOperations$))("loading",e.bMT(4,12,o.loading$))("loadingScreen",e.bMT(5,14,o.loadingScreen$))("loadingOperation",e.bMT(6,16,o.loadingOperation$))},dependencies:[I,p.Jj]})}return r})(),canActivate:[S.q]}];let C=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({imports:[l.iI.forChild(y),l.iI]})}return r})();var G=a(3887);let T=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=e.$C({type:r});static \u0275inj=e.G2t({imports:[p.MD,C,m.mV,g.X1,G.G]})}return r})()}}]);