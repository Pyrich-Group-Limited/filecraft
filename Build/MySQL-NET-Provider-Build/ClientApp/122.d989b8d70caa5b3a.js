"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[122],{3824:(w,v,a)=>{a.d(v,{u:()=>d});class d{fields="";orderBy="";searchQuery="";pageSize=30;skip=0;name="";totalCount=0;metaTags=""}},8693:(w,v,a)=>{a.r(v),a.d(v,{UserModule:()=>Tt});var d=a(177),p=a(1188),R=a(3870),c=a(9417),S=a(8),e=a(4438),f=a(9932),b=a(5794),G=a(9301),I=a(2243),A=a(3719),$=a(2798),L=a(6600),U=a(2728),k=a(9036),g=a(5464),F=a(3955);const Y=()=>["/users"];function y(t,r){1&t&&(e.j41(0,"span",25),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"ADD_USER")))}function V(t,r){1&t&&(e.j41(0,"span",25),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"EDIT_USER")))}function X(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function B(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,X,3,3,"div",26),e.k0s()),2&t){let s;const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==(s=i.userForm.get("firstName").errors)?null:s.required)}}function J(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"LAST_NAME_IS_REQUIRED")," "))}function H(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,J,3,3,"div",26),e.k0s()),2&t){let s;const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==(s=i.userForm.get("lastName").errors)?null:s.required)}}function W(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"MOBILE_IS_REQUIRED")," "))}function z(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,W,3,3,"div",26),e.k0s()),2&t){let s;const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==(s=i.userForm.get("phoneNumber").errors)?null:s.required)}}function Q(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"EMAIL_IS_REQUIRED")," "))}function Z(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function K(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,Q,3,3,"div",26)(2,Z,3,3,"div",26),e.k0s()),2&t){let s,i;const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(s=n.userForm.get("email").errors)?null:s.required),e.R7$(),e.Y8G("ngIf",null==(i=n.userForm.get("email").errors)?null:i.email)}}function q(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"PASSWORD_IS_REQUIRED")," "))}function ee(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function te(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,q,3,3,"div",26)(2,ee,3,3,"div",26),e.k0s()),2&t){let s,i;const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(s=n.userForm.get("password").errors)?null:s.required),e.R7$(),e.Y8G("ngIf",null==(i=n.userForm.get("password").errors)?null:i.minlength)}}function se(t,r){if(1&t&&(e.j41(0,"div",10)(1,"div",11)(2,"label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"input",28),e.DNE(6,te,3,2,"div",13),e.k0s()()),2&t){const s=e.XpG();e.R7$(3),e.JRh(e.bMT(4,2,"PASSWORD")),e.R7$(3),e.Y8G("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").errors)}}function ne(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function ie(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,ne,3,3,"div",26),e.k0s()),2&t){let s;const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(s=i.userForm.get("confirmPassword").errors)?null:s.required)}}function re(t,r){1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function oe(t,r){if(1&t&&(e.j41(0,"div",10)(1,"div",11)(2,"label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"input",29),e.DNE(6,ie,2,1,"div",13)(7,re,3,3,"div",26),e.k0s()()),2&t){const s=e.XpG();e.R7$(3),e.JRh(e.bMT(4,3,"CONFIRM_PASSWORD")),e.R7$(3),e.Y8G("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").errors),e.R7$(),e.Y8G("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function ae(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const s=e.XpG();e.R7$(),e.SpI(" ",s.selectedRoles[0].name," ")}}function ce(t,r){if(1&t&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&t){const s=e.XpG();e.R7$(),e.Lme(" (+",s.selectedRoles.length-1," ",2===s.selectedRoles.length?"other":"others",") ")}}function le(t,r){if(1&t&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&t){const s=r.$implicit;e.Y8G("value",s),e.R7$(),e.JRh(s.name)}}function me(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(s);const n=e.XpG(2);return e.Njj(n.saveUser())}),e.nrm(1,"i-feather",34),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"SAVE"),""))}function ue(t,r){1&t&&(e.qex(0),e.DNE(1,me,4,3,"button",32),e.bVm()),2&t&&(e.R7$(),e.Y8G("hasClaim","user_edit_user"))}function de(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(s);const n=e.XpG(2);return e.Njj(n.saveUser())}),e.nrm(1,"i-feather",34),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"SAVE"),""))}function pe(t,r){1&t&&(e.qex(0),e.DNE(1,de,4,3,"button",32),e.bVm()),2&t&&(e.R7$(),e.Y8G("hasClaim","user_create_user"))}let O=(()=>{class t extends S.${fb;router;activeRoute;userService;toastrService;commonService;translationService;user;userForm;roleList;isEditMode=!1;selectedRoles=[];constructor(s,i,n,o,l,u,h){super(),this.fb=s,this.router=i,this.activeRoute=n,this.userService=o,this.toastrService=l,this.commonService=u,this.translationService=h}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user,this.userForm.get("email").disable()):(this.userForm.get("password").setValidators([c.k0.required,c.k0.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.k0.required]),this.userForm.get("email").enable())}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.k0.required]],lastName:["",[c.k0.required]],email:["",[c.k0.required,c.k0.email]],phoneNumber:["",[c.k0.required]],password:[""],confirmPassword:[""]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.toastrService.error(this.translationService.getValue("PLEASE_ENTER_PROPER_DATA"))}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,userRoles:this.getSelectedRoles()}}getSelectedRoles(){return this.selectedRoles.map(s=>({userId:this.userForm.get("id").value,roleId:s.id}))}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(s=>{if(this.roleList=s,this.isEditMode){const i=this.user.userRoles.map(n=>n.roleId);this.selectedRoles=this.roleList.filter(n=>i.indexOf(n.id)>-1)}})}static \u0275fac=function(i){return new(i||t)(e.rXU(c.ze),e.rXU(p.Ix),e.rXU(p.nX),e.rXU(f.D),e.rXU(b.tw),e.rXU(G.h),e.rXU(I.L))};static \u0275cmp=e.VBU({type:t,selectors:[["app-manage-user"]],features:[e.Vt3],decls:57,vars:36,consts:[[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],["class","mb-0 page-title",4,"ngIf"],[3,"code"],[1,"card"],[1,"body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["formControlName","firstName","type","text",1,"form-control"],[4,"ngIf"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["multiple","",1,"form-control",3,"valueChange","value"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"m-top-10","col-md-12"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],[1,"mb-0","page-title"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[1,"example-additional-selection"],[3,"value"],["class","btn btn-success btn-sm me-2","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"]],template:function(i,n){1&i&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),e.DNE(4,y,3,3,"span",4)(5,V,3,3,"span",4),e.nrm(6,"app-page-help-text",5),e.k0s()(),e.j41(7,"div",6)(8,"div",7)(9,"form",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"label"),e.EFF(14),e.nI1(15,"translate"),e.k0s(),e.nrm(16,"input",12),e.DNE(17,B,2,1,"div",13),e.k0s()(),e.j41(18,"div",10)(19,"div",11)(20,"label"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.nrm(23,"input",14),e.DNE(24,H,2,1,"div",13),e.k0s()(),e.j41(25,"div",10)(26,"div",11)(27,"label"),e.EFF(28),e.nI1(29,"translate"),e.k0s(),e.nrm(30,"input",15),e.DNE(31,z,2,1,"div",13),e.k0s()(),e.j41(32,"div",10)(33,"div",11)(34,"label"),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.nrm(37,"input",16),e.DNE(38,K,3,2,"div",13),e.k0s()(),e.DNE(39,se,7,4,"div",17)(40,oe,8,5,"div",17),e.j41(41,"div",18)(42,"mat-label"),e.EFF(43),e.nI1(44,"translate"),e.k0s(),e.j41(45,"mat-select",19),e.mxI("valueChange",function(l){return e.DH7(n.selectedRoles,l)||(n.selectedRoles=l),l}),e.j41(46,"mat-select-trigger"),e.DNE(47,ae,2,1,"span",13)(48,ce,2,2,"span",20),e.k0s(),e.DNE(49,le,2,2,"mat-option",21),e.k0s()(),e.j41(50,"div",22),e.DNE(51,ue,2,1,"ng-container",13)(52,pe,2,1,"ng-container",13),e.j41(53,"button",23),e.nrm(54,"i-feather",24),e.EFF(55),e.nI1(56,"translate"),e.k0s()()()()()()()()),2&i&&(e.R7$(4),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",n.isEditMode),e.R7$(),e.Y8G("code","MANAGE_USER"),e.R7$(3),e.Y8G("formGroup",n.userForm),e.R7$(5),e.JRh(e.bMT(15,23,"FIRST_NAME")),e.R7$(3),e.Y8G("ngIf",n.userForm.get("firstName").touched&&n.userForm.get("firstName").errors),e.R7$(4),e.JRh(e.bMT(22,25,"LAST_NAME")),e.R7$(3),e.Y8G("ngIf",n.userForm.get("lastName").touched&&n.userForm.get("lastName").errors),e.R7$(4),e.JRh(e.bMT(29,27,"MOBILE_NUMBER")),e.R7$(3),e.Y8G("ngIf",n.userForm.get("phoneNumber").touched&&n.userForm.get("phoneNumber").errors),e.R7$(4),e.JRh(e.bMT(36,29,"EMAIL")),e.R7$(3),e.Y8G("ngIf",n.userForm.get("email").touched&&n.userForm.get("email").errors),e.R7$(),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("ngIf",!n.isEditMode),e.R7$(3),e.JRh(e.bMT(44,31,"ROLES")),e.R7$(2),e.R50("value",n.selectedRoles),e.R7$(2),e.Y8G("ngIf",n.selectedRoles.length>0),e.R7$(),e.Y8G("ngIf",n.selectedRoles.length>1),e.R7$(),e.Y8G("ngForOf",n.roleList),e.R7$(2),e.Y8G("ngIf",n.isEditMode),e.R7$(),e.Y8G("ngIf",!n.isEditMode),e.R7$(),e.Y8G("routerLink",e.lJ4(35,Y)),e.R7$(2),e.SpI(" ",e.bMT(56,33,"CANCEL"),""))},dependencies:[d.Sq,d.bT,p.Wk,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,A.nJ,$.VO,$.$2,L.wT,U.i,k.J,g.X,F.D9],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]})}return t})(),M=(()=>{class t{userService;constructor(s){this.userService=s}resolve(s,i){const n=s.paramMap.get("id");return this.userService.getUser(n)}static \u0275fac=function(i){return new(i||t)(e.KVO(f.D))};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac})}return t})();var _=a(5351),j=a(8834),D=a(9213);function _e(t,r){1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"PASSWORD_IS_REQUIRED")," "))}function fe(t,r){1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function ge(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,_e,3,3,"div",11)(2,fe,3,3,"div",11),e.k0s()),2&t){let s,i;const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(s=n.resetPasswordForm.get("password").errors)?null:s.required),e.R7$(),e.Y8G("ngIf",null==(i=n.resetPasswordForm.get("password").errors)?null:i.minlength)}}function he(t,r){1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function ve(t,r){if(1&t&&(e.j41(0,"div"),e.DNE(1,he,3,3,"div",11),e.k0s()),2&t){let s;const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==(s=i.resetPasswordForm.get("confirmPassword").errors)?null:s.required)}}function Re(t,r){1&t&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}let Se=(()=>{class t extends S.${userService;fb;dialogRef;data;toastrService;translationService;resetPasswordForm;constructor(s,i,n,o,l,u){super(),this.userService=s,this.fb=i,this.dialogRef=n,this.data=o,this.toastrService=l,this.translationService=u}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.userName)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[{value:"",disabled:!0}],password:["",[c.k0.required,c.k0.minLength(6)]],confirmPassword:["",[c.k0.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid&&(this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}))}createBuildObject(){return{email:"",password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)(e.rXU(f.D),e.rXU(c.ze),e.rXU(_.CP),e.rXU(_.Vh),e.rXU(b.tw),e.rXU(I.L))};static \u0275cmp=e.VBU({type:t,selectors:[["app-reset-password"]],features:[e.Vt3],decls:39,vars:22,consts:[[1,"d-flex"],["mat-dialog-title","",1,"dialog-title"],["mat-icon-button","",1,"ms-auto",3,"click"],["color","warn",1,"close-icon"],[3,"formGroup"],[1,"col-md-12"],[1,"form-group"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"col-md-12","my-2"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"],[1,"btn","btn-danger","btn-sm",3,"click"],["name","x-circle",1,"small-icon"],[1,"text-danger"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return n.onNoClick()}),e.j41(5,"mat-icon",3),e.EFF(6,"close"),e.k0s()()(),e.j41(7,"mat-dialog-content")(8,"form",4)(9,"div",5)(10,"div",6)(11,"label"),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.nrm(14,"input",7),e.k0s()(),e.j41(15,"div",5)(16,"div",6)(17,"label"),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.nrm(20,"input",8),e.DNE(21,ge,3,2,"div",9),e.k0s()(),e.j41(22,"div",5)(23,"div",6)(24,"label"),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.nrm(27,"input",10),e.DNE(28,ve,2,1,"div",9)(29,Re,3,3,"div",11),e.k0s()(),e.j41(30,"div",12)(31,"button",13),e.bIt("click",function(){return n.resetPassword()}),e.nrm(32,"i-feather",14),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.j41(35,"button",15),e.bIt("click",function(){return n.onNoClick()}),e.nrm(36,"i-feather",16),e.EFF(37),e.nI1(38,"translate"),e.k0s()()()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,10,"RESET_PASSWORD")),e.R7$(6),e.Y8G("formGroup",n.resetPasswordForm),e.R7$(4),e.JRh(e.bMT(13,12,"EMAIL")),e.R7$(6),e.JRh(e.bMT(19,14,"PASSWORD")),e.R7$(3),e.Y8G("ngIf",n.resetPasswordForm.get("password").touched&&n.resetPasswordForm.get("password").errors),e.R7$(4),e.JRh(e.bMT(26,16,"CONFIRM_PASSWORD")),e.R7$(3),e.Y8G("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.get("confirmPassword").errors),e.R7$(),e.Y8G("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.hasError("notSame")),e.R7$(4),e.SpI(" ",e.bMT(34,18,"SAVE"),""),e.R7$(4),e.SpI(" ",e.bMT(38,20,"CANCEL"),""))},dependencies:[d.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,_.BI,_.Yi,j.iY,D.An,g.X,F.D9]})}return t})();var N=a(6695),E=a(2042),be=a(4904),Ie=a(7786),T=a(8141),Fe=a(3726),Ee=a(152),Te=a(3294),P=a(4412),Ce=a(7673),$e=a(9437),Ue=a(980);class ke{userService;userSubject=new P.t([]);responseHeaderSubject=new P.t(null);loadingSubject=new P.t(!1);loading$=this.loadingSubject.asObservable();_count=0;get count(){return this._count}responseHeaderSubject$=this.responseHeaderSubject.asObservable();constructor(r){this.userService=r}connect(){return this.userSubject.asObservable()}disconnect(){this.userSubject.complete(),this.loadingSubject.complete()}loadUsers(r){this.loadingSubject.next(!0),this.userService.getUsers(r).pipe((0,$e.W)(()=>(0,Ce.of)([])),(0,Ue.j)(()=>this.loadingSubject.next(!1))).subscribe(s=>{const i=JSON.parse(s.headers.get("X-Pagination"));this.responseHeaderSubject.next(i);const n=[...s.body];this._count=n.length,this.userSubject.next(n)})}}var Me=a(4481),m=a(9159),C=a(9115);const je=["input"],De=()=>["/users/manage"],Ne=()=>["user_delete_user","user_edit_user"],Pe=()=>[10,20,30];function Ge(t,r){1&t&&(e.j41(0,"button",34),e.nrm(1,"i-feather",35),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&t&&(e.Y8G("routerLink",e.lJ4(4,De)),e.R7$(2),e.SpI(" ",e.bMT(3,2,"ADD_USER")," "))}function Oe(t,r){1&t&&(e.j41(0,"th",36)(1,"span"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"ACTION")," "))}function xe(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(s);const n=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.editUser(n.id))}),e.j41(1,"mat-icon"),e.EFF(2,"edit"),e.k0s(),e.EFF(3),e.nI1(4,"translate"),e.k0s()}2&t&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"EDIT")," "))}function we(t,r){1&t&&(e.qex(0),e.DNE(1,xe,5,3,"button",41),e.bVm()),2&t&&(e.R7$(),e.Y8G("hasClaim","user_edit_user"))}function Ae(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(s);const n=e.XpG().$implicit,o=e.XpG();return e.Njj(o.deleteUser(n))}),e.j41(1,"mat-icon"),e.EFF(2,"power_settings_new"),e.k0s(),e.EFF(3),e.nI1(4,"translate"),e.k0s()}if(2&t){const s=e.XpG().$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,1,s.isDeleted?"ACTIVATE":"IN_ACTIVE")," ")}}function Le(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(s);const n=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.userPermission(n.id))}),e.j41(1,"mat-icon"),e.EFF(2,"people"),e.k0s(),e.EFF(3),e.nI1(4,"translate"),e.k0s()}2&t&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"PERMISSION")," "))}function Ye(t,r){1&t&&(e.qex(0),e.DNE(1,Le,5,3,"button",40),e.bVm()),2&t&&(e.R7$(),e.Y8G("hasClaim","user_assign_permission"))}function ye(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(s);const n=e.XpG(2).$implicit,o=e.XpG();return e.Njj(o.resetPassword(n))}),e.j41(1,"mat-icon"),e.EFF(2,"key"),e.k0s(),e.EFF(3),e.nI1(4,"translate"),e.k0s()}2&t&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"RESET_PASSWORD")," "))}function Ve(t,r){1&t&&(e.qex(0),e.DNE(1,ye,5,3,"button",40),e.bVm()),2&t&&(e.R7$(),e.Y8G("hasClaim","user_reset_password"))}function Xe(t,r){if(1&t&&(e.j41(0,"td",37)(1,"button",38)(2,"mat-icon"),e.EFF(3,"more_vert"),e.k0s()(),e.j41(4,"mat-menu",null,1),e.DNE(6,we,2,1,"ng-container",39)(7,Ae,5,3,"button",40)(8,Ye,2,1,"ng-container",39)(9,Ve,2,1,"ng-container",39),e.k0s()()),2&t){const s=r.$implicit,i=e.sdS(5);e.R7$(),e.Y8G("matMenuTriggerFor",i),e.R7$(5),e.Y8G("ngIf",!s.isDeleted),e.R7$(),e.Y8G("hasClaim",e.lJ4(5,Ne)),e.R7$(),e.Y8G("ngIf",!s.isDeleted),e.R7$(),e.Y8G("ngIf",!s.isDeleted)}}function Be(t,r){1&t&&(e.j41(0,"th",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"EMAIL")," "))}function Je(t,r){if(1&t&&(e.j41(0,"td",37),e.EFF(1),e.k0s()),2&t){const s=r.$implicit;e.R7$(),e.SpI(" ",s.email," ")}}function He(t,r){1&t&&(e.j41(0,"th",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"FIRST_NAME")," "))}function We(t,r){if(1&t&&(e.j41(0,"td",37),e.EFF(1),e.k0s()),2&t){const s=r.$implicit;e.R7$(),e.SpI(" ",s.firstName," ")}}function ze(t,r){1&t&&(e.j41(0,"th",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"LAST_NAME")," "))}function Qe(t,r){if(1&t&&(e.j41(0,"td",37),e.EFF(1),e.k0s()),2&t){const s=r.$implicit;e.R7$(),e.SpI(" ",s.lastName," ")}}function Ze(t,r){1&t&&(e.j41(0,"th",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"MOBILE_NUMBER")," "))}function Ke(t,r){if(1&t&&(e.j41(0,"td",37),e.EFF(1),e.k0s()),2&t){const s=r.$implicit;e.R7$(),e.SpI(" ",s.phoneNumber," ")}}function qe(t,r){1&t&&(e.j41(0,"th",43),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"STATUS")," "))}function et(t,r){1&t&&(e.qex(0),e.j41(1,"span",44),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"ACTIVE")))}function tt(t,r){1&t&&(e.qex(0),e.j41(1,"span",45),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"IN_ACTIVE")))}function st(t,r){if(1&t&&(e.j41(0,"td",37),e.DNE(1,et,4,3,"ng-container",39)(2,tt,4,3,"ng-container",39),e.k0s()),2&t){const s=r.$implicit;e.R7$(),e.Y8G("ngIf",!s.isDeleted),e.R7$(),e.Y8G("ngIf",s.isDeleted)}}function nt(t,r){if(1&t&&(e.j41(0,"td",46),e.nrm(1,"mat-paginator",47),e.k0s()),2&t){const s=e.XpG();e.R7$(),e.Y8G("length",s.userResource.totalCount)("pageSize",s.userResource.pageSize)("pageSizeOptions",e.lJ4(3,Pe))}}function it(t,r){1&t&&e.nrm(0,"tr",48)}function rt(t,r){1&t&&e.nrm(0,"tr",49)}function ot(t,r){1&t&&e.nrm(0,"tr",50)}function at(t,r){1&t&&(e.j41(0,"tr")(1,"td")(2,"div",51)(3,"b"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()()),2&t&&(e.R7$(4),e.SpI(" ",e.bMT(5,1,"NO_DATA_FOUND"),""))}function ct(t,r){1&t&&(e.j41(0,"div",52)(1,"div",53)(2,"span",54),e.EFF(3,"Loading..."),e.k0s()()())}let lt=(()=>{class t extends S.${userService;toastrService;commonService;commonDialogService;dialog;router;translationService;dataSource;displayedColumns=["action","email","firstName","lastName","phoneNumber","isDeleted"];isLoadingResults=!0;userResource;loading$;paginator;sort;input;footerToDisplayed=["footer"];constructor(s,i,n,o,l,u,h){super(),this.userService=s,this.toastrService=i,this.commonService=n,this.commonDialogService=o,this.dialog=l,this.router=u,this.translationService=h,this.userResource=new be.l,this.userResource.pageSize=10,this.userResource.orderBy="email asc"}ngOnInit(){this.dataSource=new ke(this.userService),this.dataSource.loadUsers(this.userResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,Ie.h)(this.sort.sortChange,this.paginator.page).pipe((0,T.M)(s=>{this.userResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.userResource.pageSize=this.paginator.pageSize,this.userResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadUsers(this.userResource)})).subscribe(),this.sub$.sink=(0,Fe.R)(this.input.nativeElement,"keyup").pipe((0,Ee.B)(1e3),(0,Te.F)(),(0,T.M)(()=>{this.paginator.pageIndex=0,this.userResource.skip=0,this.userResource.searchQuery=this.input.nativeElement.value,this.dataSource.loadUsers(this.userResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(s=>{s&&(this.userResource.pageSize=s.pageSize,this.userResource.skip=s.skip,this.userResource.totalCount=s.totalCount)})}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_UPDATE")} ${s.userName}`).subscribe(i=>{i&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.dataSource.loadUsers(this.userResource)}))})}resetPassword(s){this.dialog.open(Se,{width:"350px",data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}static \u0275fac=function(i){return new(i||t)(e.rXU(f.D),e.rXU(b.tw),e.rXU(G.h),e.rXU(Me.Z),e.rXU(_.bZ),e.rXU(p.Ix),e.rXU(I.L))};static \u0275cmp=e.VBU({type:t,selectors:[["app-user-list"]],viewQuery:function(i,n){if(1&i&&(e.GBs(N.iy,5),e.GBs(E.B4,5),e.GBs(je,5)),2&i){let o;e.mGM(o=e.lsd())&&(n.paginator=o.first),e.mGM(o=e.lsd())&&(n.sort=o.first),e.mGM(o=e.lsd())&&(n.input=o.first)}},features:[e.Vt3],decls:46,vars:17,consts:[["input",""],["menu","matMenu"],[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],[3,"code"],[1,"col-md-6","d-flex","justify-content-end","mb-2"],["class","btn btn-success btn-sm",3,"routerLink",4,"hasClaim"],[1,"card"],[1,"header"],[1,"col-sm-5"],[1,"form-control",3,"placeholder"],[1,"body"],[1,"table-responsive"],[1,"grid-height-medium"],["mat-table","","matSort","","matSortActive","email","matSortDirection","asc",3,"dataSource"],["matColumnDef","action"],["class","table-column-fix-30","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["matColumnDef","isDeleted"],["matColumnDef","footer"],["mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[4,"matNoDataRow"],["class","spinner-container",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"routerLink"],["name","plus"],["mat-header-cell","",1,"table-column-fix-30"],["mat-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],[4,"ngIf"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-cell","","mat-sort-header",""],[1,"badge","bg-success"],[1,"badge","bg-danger"],["mat-footer-cell","","colspan","6"],[3,"length","pageSize","pageSizeOptions"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""],[1,"m-2"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(i,n){1&i&&(e.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.nrm(7,"app-page-help-text",7),e.k0s(),e.j41(8,"div",8),e.DNE(9,Ge,4,5,"button",9),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"div",12),e.nrm(13,"input",13,0),e.nI1(15,"translate"),e.k0s()(),e.j41(16,"div",14)(17,"div",15)(18,"div",16)(19,"table",17),e.qex(20,18),e.DNE(21,Oe,4,3,"th",19)(22,Xe,10,6,"td",20),e.bVm(),e.qex(23,21),e.DNE(24,Be,3,3,"th",22)(25,Je,2,1,"td",20),e.bVm(),e.qex(26,23),e.DNE(27,He,3,3,"th",22)(28,We,2,1,"td",20),e.bVm(),e.qex(29,24),e.DNE(30,ze,3,3,"th",22)(31,Qe,2,1,"td",20),e.bVm(),e.qex(32,25),e.DNE(33,Ze,3,3,"th",22)(34,Ke,2,1,"td",20),e.bVm(),e.qex(35,26),e.DNE(36,qe,3,3,"th",22)(37,st,3,2,"td",20),e.bVm(),e.qex(38,27),e.DNE(39,nt,2,4,"td",28),e.bVm(),e.DNE(40,it,1,0,"tr",29)(41,rt,1,0,"tr",30)(42,ot,1,0,"tr",31)(43,at,6,3,"tr",32),e.k0s()()()()()()(),e.DNE(44,ct,4,0,"div",33),e.nI1(45,"async")),2&i&&(e.R7$(5),e.JRh(e.bMT(6,11,"USERS")),e.R7$(2),e.Y8G("code","USERS"),e.R7$(2),e.Y8G("hasClaim","user_create_user"),e.R7$(4),e.FS9("placeholder",e.bMT(15,13,"SEARCH_BY_USERNAME")),e.R7$(6),e.Y8G("dataSource",n.dataSource),e.R7$(21),e.Y8G("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.R7$(),e.Y8G("matRowDefColumns",n.displayedColumns),e.R7$(),e.Y8G("matFooterRowDef",n.footerToDisplayed)("matFooterRowDefSticky",!0),e.R7$(2),e.Y8G("ngIf",e.bMT(45,15,n.dataSource.loading$)))},dependencies:[d.bT,p.Wk,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.Zq,m.xW,m.KS,m.$R,m.Qo,m.YZ,m.NB,m.iF,m.ky,U.i,k.J,C.kk,C.fb,C.Cp,j.iY,D.An,g.X,N.iy,E.B4,E.aE,d.Jj,F.D9]})}return t})();var mt=a(2588),ut=a(3621),dt=a(1776),x=a(2765);const pt=()=>["/users"];function _t(t,r){if(1&t){const s=e.RV6();e.j41(0,"div",23)(1,"mat-checkbox",24),e.bIt("change",function(n){e.eBV(s);const o=e.XpG().$implicit,l=e.XpG().$implicit,u=e.XpG();return e.Njj(u.onPermissionChange(n,l,o))}),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}if(2&t){const s=e.XpG().$implicit,i=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("checked",n.checkPermission(i.id,s.id)),e.R7$(),e.SpI(" ",e.bMT(3,2,s.name.replaceAll(" ","_").toUpperCase())," ")}}function ft(t,r){if(1&t&&(e.qex(0),e.DNE(1,_t,4,4,"div",22),e.bVm()),2&t){const s=r.$implicit,i=e.XpG().$implicit,n=e.XpG();e.R7$(),e.Y8G("ngIf",n.checkPageAction(i.id,s.id))}}function gt(t,r){if(1&t){const s=e.RV6();e.j41(0,"div",17)(1,"div",18)(2,"mat-checkbox",19),e.bIt("change",function(n){const o=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.onPageSelect(n,o.name))}),e.j41(3,"b"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.j41(6,"div",20),e.DNE(7,ft,2,1,"ng-container",21),e.k0s()()}if(2&t){const s=r.$implicit,i=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,2,s.name.replaceAll(" ","_").toUpperCase()),""),e.R7$(3),e.Y8G("ngForOf",i.operations)}}function ht(t,r){if(1&t){const s=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(s);const n=e.XpG();return e.Njj(n.saveUserClaim())}),e.nrm(1,"i-feather",26),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&t&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"SAVE"),""))}let vt=(()=>{class t{screens;operations;screenOperations;loading;loadingScreen;loadingOperation;user;manageUserClaimOperation=new e.bkB;step=0;constructor(){}ngOnInit(){}checkPageAction(s,i){return!!this.screenOperations.find(o=>o.screenId===s&&o.operationId===i)}onPageSelect(s,i){if(s.checked)this.screens.filter(o=>o.name==i).forEach(o=>{this.operations.forEach(l=>{this.checkPageAction(o.id,l.id)&&this.user.userClaims.push({userId:this.user.id,claimType:`${o.name}_${l.name}`,claimValue:"",screenId:o.id,operationId:l.id})})});else{var n=this.screens.find(o=>o.name==i);this.user.userClaims=this.user.userClaims.filter(o=>o.screenId!=n.id)}}checkPermission(s,i){return!!this.user.userClaims.find(o=>o.screenId===s&&o.operationId===i)}onPermissionChange(s,i,n){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:`${i.name}_${n.name}`,claimValue:"",screenId:i.id,operationId:n.id});else{const o=this.user.userClaims.find(u=>u.operationId===n.id&&u.screenId===i.id),l=this.user.userClaims.indexOf(o,0);l>-1&&this.user.userClaims.splice(l,1)}}saveUserClaim(){this.manageUserClaimOperation.emit(this.user)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=e.VBU({type:t,selectors:[["app-user-permission-presentation"]],inputs:{screens:"screens",operations:"operations",screenOperations:"screenOperations",loading:"loading",loadingScreen:"loadingScreen",loadingOperation:"loadingOperation",user:"user"},outputs:{manageUserClaimOperation:"manageUserClaimOperation"},decls:26,vars:15,consts:[[1,"content"],[1,"container-fluid"],[1,"row","align-items-center"],[1,"col-md-6","mb-2"],[1,"mb-0","page-title"],["code","USER_PAGE_PERMISSION_TO"],[1,"card"],[1,"body"],[1,"col-md-4","col-sm-12"],[1,"page-title"],[1,"row"],[1,"col-sm-12"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"m-top-10"],["class","btn btn-success btn-sm me-2","cdkFocusInitial","",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],["name","x-circle",1,"small-icon"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],["color","primary",3,"change"],[1,"row","ms-2"],[4,"ngFor","ngForOf"],["class","col-sm-3  mb-0",4,"ngIf"],[1,"col-sm-3","mb-0"],["color","primary",3,"change","checked"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","me-2",3,"click"],["name","save",1,"small-icon"]],template:function(i,n){1&i&&(e.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.EFF(5),e.nI1(6,"translate"),e.j41(7,"span"),e.EFF(8),e.nrm(9,"app-page-help-text",5),e.k0s()()()(),e.j41(10,"div",6)(11,"div",7)(12,"div",2)(13,"div",8)(14,"h2",9),e.EFF(15),e.nI1(16,"translate"),e.k0s()()(),e.j41(17,"div",10)(18,"div",11),e.DNE(19,gt,8,4,"div",12),e.k0s()(),e.j41(20,"div",13),e.DNE(21,ht,4,3,"button",14),e.j41(22,"a",15),e.nrm(23,"i-feather",16),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()()()),2&i&&(e.R7$(5),e.SpI("",e.bMT(6,8,"USER_PAGE_PERMISSION_TO")," "),e.R7$(3),e.Lme("",null==n.user?null:n.user.firstName," ",null==n.user?null:n.user.lastName," "),e.R7$(7),e.JRh(e.bMT(16,10,"PERMISSION")),e.R7$(4),e.Y8G("ngForOf",n.screens),e.R7$(2),e.Y8G("hasClaim","user_assign_permission"),e.R7$(),e.Y8G("routerLink",e.lJ4(14,pt)),e.R7$(2),e.SpI(" ",e.bMT(25,12,"CANCEL"),""))},dependencies:[d.Sq,d.bT,p.Wk,U.i,k.J,x.So,g.X,F.D9]})}return t})();const St=[{path:"",component:lt,data:{claimType:"user_view_users"},canActivate:[R.q]},{path:"manage/:id",component:O,resolve:{user:M},data:{claimType:"user_edit_user"},canActivate:[R.q]},{path:"manage",component:O,data:{claimType:"user_create_user"},canActivate:[R.q]},{path:"permission/:id",component:(()=>{class t extends S.${activeRoute;router;toastrService;screenService;operationService;screenOperationService;userService;translationService;screenOperations$;screens$;operations$;loading$;loadingScreen$;loadingOperation$;user;constructor(s,i,n,o,l,u,h,Ct){super(),this.activeRoute=s,this.router=i,this.toastrService=n,this.screenService=o,this.operationService=l,this.screenOperationService=u,this.userService=h,this.translationService=Ct}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(s=>{this.user=s.user}),this.loadingOperation$=this.operationService.loaded$.pipe((0,T.M)(s=>{s||this.getOperations()})),this.operations$=this.operationService.entities$,this.loadingScreen$=this.screenService.loaded$.pipe((0,T.M)(s=>{s||this.getScreens()})),this.screens$=this.screenService.entities$,this.loading$=this.screenOperationService.loaded$,this.screenOperations$=this.screenOperationService.entities$,this.getScreenOperations()}getOperations(){this.operationService.getAll()}getScreens(){this.screenService.getAll()}getScreenOperations(){this.screenOperationService.getAll()}manageUserClaimOperation(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}static \u0275fac=function(i){return new(i||t)(e.rXU(p.nX),e.rXU(p.Ix),e.rXU(b.tw),e.rXU(mt.i),e.rXU(ut.n),e.rXU(dt.B),e.rXU(f.D),e.rXU(I.L))};static \u0275cmp=e.VBU({type:t,selectors:[["app-user-permission"]],features:[e.Vt3],decls:7,vars:19,consts:[[3,"manageUserClaimOperation","screens","operations","screenOperations","loading","loadingScreen","loadingOperation","user"]],template:function(i,n){1&i&&(e.j41(0,"app-user-permission-presentation",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.bIt("manageUserClaimOperation",function(l){return n.manageUserClaimOperation(l)}),e.k0s()),2&i&&e.Y8G("screens",e.bMT(1,7,n.screens$))("operations",e.bMT(2,9,n.operations$))("screenOperations",e.bMT(3,11,n.screenOperations$))("loading",e.bMT(4,13,n.loading$))("loadingScreen",e.bMT(5,15,n.loadingScreen$))("loadingOperation",e.bMT(6,17,n.loadingOperation$))("user",n.user)},dependencies:[vt,d.Jj]})}return t})(),resolve:{user:M},data:{claimType:"user_assign_permission"},canActivate:[R.q]}];let bt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({imports:[p.iI.forChild(St),p.iI]})}return t})();var It=a(450),Ft=a(9454),Et=a(3887);let Tt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=e.$C({type:t});static \u0275inj=e.G2t({providers:[M],imports:[d.MD,bt,c.YN,c.X1,m.tP,_.hM,$.Ve,It.mV,Et.G,C.Cn,j.Hl,Ft.MY,x.g7,D.m_,g.M,N.Ou,E.NQ]})}return t})()}}]);