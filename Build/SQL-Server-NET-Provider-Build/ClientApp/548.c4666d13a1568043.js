"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[548],{1548:(E,g,r)=>{r.r(g),r.d(g,{LoginModule:()=>y});var d=r(177),u=r(1188),s=r(9417),m=r(8),t=r(4438),p=r(7945),v=r(5794),h=r(2243),c=r(3955);function f(o,l){1&o&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"EMAIL_IS_REQUIRED")," "))}function b(o,l){1&o&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function I(o,l){if(1&o&&(t.j41(0,"div",24),t.DNE(1,f,3,3,"div",25)(2,b,3,3,"div",25),t.k0s()),2&o){let e,n;const i=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=i.loginFormGroup.get("userName").errors)?null:e.required),t.R7$(),t.Y8G("ngIf",null==(n=i.loginFormGroup.get("userName").errors)?null:n.email)}}function F(o,l){1&o&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"PASSWORD_IS_REQUIRED")," "))}function C(o,l){if(1&o&&(t.j41(0,"div",24),t.DNE(1,F,3,3,"div",25),t.k0s()),2&o){let e;const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=n.loginFormGroup.get("password").errors)?null:e.required)}}const G=[{path:"",component:(()=>{class o extends m.${fb;router;securityService;toastr;renderer;translationService;logoUrl;loginFormGroup;isLoading=!1;lat;lng;constructor(e,n,i,a,S,R){super(),this.fb=e,this.router=n,this.securityService=i,this.toastr=a,this.renderer=S,this.translationService=R}ngOnInit(){this.createFormGroup(),this.getCompanyProfile(),navigator.geolocation.getCurrentPosition(e=>{this.lat=e.coords.latitude,this.lng=e.coords.longitude})}onLoginSubmit(){if(this.loginFormGroup.valid){this.isLoading=!0;const e={...this.loginFormGroup.value,latitude:this.lat,longitude:this.lng};this.sub$.sink=this.securityService.login(e).subscribe({next:n=>{this.isLoading=!1,this.toastr.success(this.translationService.getValue("USER_LOGIN_SUCCESSFULLY")),this.securityService.hasClaim("dashboard_view_dashboard")?this.router.navigate(["/dashboard"]):this.router.navigate(["/"])},error:n=>{this.isLoading=!1,n.messages.forEach(i=>{this.toastr.error(i)})}})}}createFormGroup(){this.loginFormGroup=this.fb.group({userName:["",[s.k0.required,s.k0.email]],password:["",[s.k0.required]]})}onRegistrationClick(){this.router.navigate(["/registration"])}setBackgroundImage(e){const n=document.querySelector(".auth-bg");n&&this.renderer.setStyle(n,"background-image",`url(${e})`)}getCompanyProfile(){this.securityService.companyProfile.subscribe(e=>{e&&(this.logoUrl=e.logoUrl,this.setBackgroundImage(e.bannerUrl))})}static \u0275fac=function(n){return new(n||o)(t.rXU(s.ze),t.rXU(u.Ix),t.rXU(p.i),t.rXU(v.tw),t.rXU(t.sFG),t.rXU(h.L))};static \u0275cmp=t.VBU({type:o,selectors:[["app-login"]],features:[t.Vt3],decls:38,vars:17,consts:[[1,"container-fluid","p-0"],[1,"row","g-0"],[1,"col-lg-4"],[1,"auth-content","p-4","d-flex","align-items-center","min-vh-100"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"text-center"],[1,"text-center","logo-img","mb-3"],["alt","Logo",3,"src"],[1,"login100-form-title"],[1,"p-2","mt-5"],[3,"submit","formGroup"],[1,"row"],[1,"col-md-12","col-sm-12","col-12"],[1,"form-group"],["formControlName","userName","type","text",1,"form-control"],["class","k-tooltip-validation",4,"ngIf"],["type","password","formControlName","password","type","password",1,"form-control"],[1,"col-md-12","col-sm-6","col-12"],["type","submit",1,"btn","btn-success","btn-sm","mt-3",2,"width","100%",3,"disabled"],[1,"col-lg-8"],[1,"auth-bg"],[1,"bg-overlay"],[1,"k-tooltip-validation"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"div",7)(9,"div",8),t.nrm(10,"img",9),t.k0s(),t.j41(11,"span",10),t.EFF(12),t.nI1(13,"translate"),t.k0s()(),t.j41(14,"div",11)(15,"form",12),t.bIt("submit",function(){return i.onLoginSubmit()}),t.j41(16,"div",13)(17,"div",14)(18,"div",15)(19,"label"),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.nrm(22,"input",16),t.DNE(23,I,3,2,"div",17),t.k0s()(),t.j41(24,"div",14)(25,"div",15)(26,"label"),t.EFF(27),t.nI1(28,"translate"),t.k0s(),t.nrm(29,"input",18),t.DNE(30,C,2,1,"div",17),t.k0s()(),t.j41(31,"div",19)(32,"button",20),t.EFF(33),t.nI1(34,"translate"),t.k0s()()()()()()()()()()(),t.j41(35,"div",21)(36,"div",22),t.nrm(37,"div",23),t.k0s()()()()),2&n){let a;t.R7$(10),t.Y8G("src",i.logoUrl,t.B4B),t.R7$(2),t.SpI(" ",t.bMT(13,9,"LOGIN_TO_CONTINUE")," "),t.R7$(3),t.Y8G("formGroup",i.loginFormGroup),t.R7$(5),t.JRh(t.bMT(21,11,"EMAIL")),t.R7$(3),t.Y8G("ngIf",i.loginFormGroup.get("userName").touched&&i.loginFormGroup.get("userName").errors),t.R7$(4),t.JRh(t.bMT(28,13,"PASSWORD")),t.R7$(3),t.Y8G("ngIf",i.loginFormGroup.get("password").touched&&(null==(a=i.loginFormGroup.get("password").errors)?null:a.required)),t.R7$(2),t.Y8G("disabled",!i.loginFormGroup.valid),t.R7$(),t.SpI(" ",t.bMT(34,15,"LOGIN")," ")}},dependencies:[d.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,c.D9],styles:[".auth-bg[_ngcontent-%COMP%]{height:100vh;background-size:cover;background-position:center}.auth-bg[_ngcontent-%COMP%]   .bg-overlay[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;inset:0;opacity:.5;z-index:-1;background-color:#292626}@media (max-width: 991px){.auth-bg[_ngcontent-%COMP%]{display:none}}.auth-content[_ngcontent-%COMP%]{height:100vh;display:flex;background-color:#fff}.auth-form-group[_ngcontent-%COMP%]{position:relative}.auth-form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:60px;padding-left:60px;border-radius:5px}"]})}return o})()}];let L=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=t.$C({type:o});static \u0275inj=t.G2t({imports:[u.iI.forChild(G),u.iI]})}return o})(),y=(()=>{class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=t.$C({type:o});static \u0275inj=t.G2t({imports:[d.MD,L,s.X1,c.h]})}return o})()}}]);